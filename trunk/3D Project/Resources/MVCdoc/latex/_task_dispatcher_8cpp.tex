\hypertarget{_task_dispatcher_8cpp}{
\section{MVCDecoder/TaskDispatcher.cpp File Reference}
\label{_task_dispatcher_8cpp}\index{MVCDecoder/TaskDispatcher.cpp@{MVCDecoder/TaskDispatcher.cpp}}
}
{\ttfamily \#include $<$cstdio$>$}\par
{\ttfamily \#include $<$iostream$>$}\par
{\ttfamily \#include $<$cstdlib$>$}\par
{\ttfamily \#include $<$memory$>$}\par
{\ttfamily \#include \char`\"{}PictureInfo.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}Arch/Arch.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}Configure.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}Codec/SequenceParam.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}Controller/AFrameController.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}Controller/FrameController\_\-Parallel.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}SlidingWindow.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}RawData.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}CodecInfo.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}Codec/Bitstream.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}Stream/InStream.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}Codec/Consts4Standard.h\char`\"{}}\par
Include dependency graph for TaskDispatcher.cpp:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=420pt]{_task_dispatcher_8cpp__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=113pt]{_task_dispatcher_8cpp__dep__incl}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structtag_s_p_u_s_t_a_t_u_s}{tagSPUSTATUS}
\item 
struct \hyperlink{struct_working_status}{WorkingStatus}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structtag_s_p_u_s_t_a_t_u_s}{tagSPUSTATUS} \hyperlink{_task_dispatcher_8cpp_aaff9aea8fd1035c913630082fa89861e}{SPUSTATUS}
\item 
typedef \hyperlink{structtag_s_p_u_s_t_a_t_u_s}{SPUSTATUS} \hyperlink{_task_dispatcher_8cpp_a15a4699036bd1e013ed749094a8fca9b}{SPUSTATUSALL} \mbox{[}MAX\_\-SPU\_\-NUM\mbox{]}
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0f}{WORK\_\-STATUS} \{ \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a}{WS\_\-NONE}, 
\hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611}{WS\_\-RUNNING}, 
\hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e}{WS\_\-WAITING}
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{_task_dispatcher_8cpp_a4d4510d185efabc073b3e0ca88053fb1}{TransferParam} (\hyperlink{structtag_s_p_u_s_t_a_t_u_s}{SPUSTATUS} \&spu, \hyperlink{struct_coding_pict_info}{CodingPictInfo} $\ast$pictInfo)
\item 
bool \hyperlink{_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8}{WaitForSpu} ()
\item 
void \hyperlink{_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d}{QueryFreeSPU} ()
\item 
void \hyperlink{_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39}{QueryFreeAll} ()
\item 
void \hyperlink{_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60}{DispatchTask} (\hyperlink{struct_coding_pict_info}{CodingPictInfo} $\ast$pictInfo)
\item 
void \hyperlink{_task_dispatcher_8cpp_a1d60dff3d8b50942f03375c11e724af2}{ProcessFrames} ()
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{struct_working_status}{WorkingStatus} \hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}
\item 
MVCThreadEntry \hyperlink{_task_dispatcher_8cpp_a2bef13de19406924682c9866f1b9aa15}{decodeframe\_\-i}
\item 
MVCThreadEntry \hyperlink{_task_dispatcher_8cpp_a01af4dde438ce227a4bbd77c704f2d37}{decodeframe\_\-p}
\item 
MVCThreadEntry \hyperlink{_task_dispatcher_8cpp_ab85bffa192c32e8cd2d17a5fd100f15c}{decodeframe\_\-b}
\item 
\hyperlink{class_a_frame_controller}{AFrameController} $\ast$ \hyperlink{_task_dispatcher_8cpp_ab5d80279fc1eb333a1b618fee7c72293}{frameController}
\end{DoxyCompactItemize}


\subsection{Typedef Documentation}
\hypertarget{_task_dispatcher_8cpp_aaff9aea8fd1035c913630082fa89861e}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!SPUSTATUS@{SPUSTATUS}}
\index{SPUSTATUS@{SPUSTATUS}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{SPUSTATUS}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf tagSPUSTATUS}  {\bf SPUSTATUS}}}
\label{_task_dispatcher_8cpp_aaff9aea8fd1035c913630082fa89861e}
\hypertarget{_task_dispatcher_8cpp_a15a4699036bd1e013ed749094a8fca9b}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!SPUSTATUSALL@{SPUSTATUSALL}}
\index{SPUSTATUSALL@{SPUSTATUSALL}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{SPUSTATUSALL}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf SPUSTATUS} {\bf SPUSTATUSALL}\mbox{[}MAX\_\-SPU\_\-NUM\mbox{]}}}
\label{_task_dispatcher_8cpp_a15a4699036bd1e013ed749094a8fca9b}


\subsection{Enumeration Type Documentation}
\hypertarget{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0f}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!WORK\_\-STATUS@{WORK\_\-STATUS}}
\index{WORK\_\-STATUS@{WORK\_\-STATUS}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{WORK\_\-STATUS}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf WORK\_\-STATUS}}}
\label{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0f}
\begin{Desc}
\item[Enumerator: ]\par
\begin{description}
\index{WS\_\-NONE@{WS\_\-NONE}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!WS\_\-NONE@{WS\_\-NONE}}\item[{\em 
\hypertarget{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a}{
WS\_\-NONE}
\label{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a}
}]\index{WS\_\-RUNNING@{WS\_\-RUNNING}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!WS\_\-RUNNING@{WS\_\-RUNNING}}\item[{\em 
\hypertarget{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611}{
WS\_\-RUNNING}
\label{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611}
}]\index{WS\_\-WAITING@{WS\_\-WAITING}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!WS\_\-WAITING@{WS\_\-WAITING}}\item[{\em 
\hypertarget{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e}{
WS\_\-WAITING}
\label{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e}
}]\end{description}
\end{Desc}





\begin{footnotesize}\begin{alltt}
00033              \{
00034         \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a}{WS_NONE}, \textcolor{comment}{// No code}
00035         \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611}{WS_RUNNING}, \textcolor{comment}{// Running}
00036         \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e}{WS_WAITING} \textcolor{comment}{// Pending}
00037 \} \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0f}{WORK_STATUS}; \textcolor{comment}{// Spe Status}
\end{alltt}\end{footnotesize}




\subsection{Function Documentation}
\hypertarget{_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!DispatchTask@{DispatchTask}}
\index{DispatchTask@{DispatchTask}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{DispatchTask}]{\setlength{\rightskip}{0pt plus 5cm}void DispatchTask ({\bf CodingPictInfo} $\ast$ {\em pictInfo})}}
\label{_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60}




\begin{footnotesize}\begin{alltt}
00123 \{
00124         MVCThreadEntry *pEntry;
00125         \textcolor{keywordflow}{if} (pictInfo->\hyperlink{struct_coding_pict_info_a6bfb22b57d0d223546150c71e125fb39}{PictType} == \hyperlink{_picture_info_8h_a385c44f6fb256e5716a2302a5b940388ad73ce3031f74fa8f39aa61bd7df91d8c}{PICT_IFRAME})
00126                 pEntry = \hyperlink{_task_dispatcher_8cpp_a2bef13de19406924682c9866f1b9aa15}{decodeframe_i};
00127         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (pictInfo->\hyperlink{struct_coding_pict_info_a6bfb22b57d0d223546150c71e125fb39}{PictType} == \hyperlink{_picture_info_8h_a385c44f6fb256e5716a2302a5b940388a4a4a4b0f98ff5f5d64cddef4d44d3fdd}{PICT_PFRAME})
00128                 pEntry = \hyperlink{_task_dispatcher_8cpp_a01af4dde438ce227a4bbd77c704f2d37}{decodeframe_p};
00129         \textcolor{keywordflow}{else} \textcolor{comment}{//if (pictInfo->PictType == PICT\_BFRAME)}
00130                 pEntry = \hyperlink{_task_dispatcher_8cpp_ab85bffa192c32e8cd2d17a5fd100f15c}{decodeframe_b};
00131         \hyperlink{_debug_8h_aa184ead4583be424a256b0ee06fea736}{DEBUGINFP}(2100000000, (\textcolor{stringliteral}{"Working (%d,%d)"}, pictInfo->\hyperlink{struct_coding_pict_info_ad85dae4751165ea3cbb8f7b8c6e61dc3}{timeId}, pictInfo->
      \hyperlink{struct_coding_pict_info_a987595091bfba91b3166b04bca988697}{viewId}));
00132         \textcolor{keywordflow}{while} (1)
00133         \{
00134                 \hyperlink{_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8}{WaitForSpu}();
00135                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \hyperlink{class_configure_ac48067b7f9d47427e932b4c44f4c9248}{Configure::NUM_OF_SPU}; ++i)
00136                 \{
00137                         \textcolor{keywordflow}{if} (\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ct==pictInfo->\hyperlink{struct_coding_pict_info_a6bfb22b57d0d223546150c71e125fb39}{PictType} &&  \hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.
      \hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws==\hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e}{WS_WAITING})
00138                         \{
00139                                 \hyperlink{_debug_8h_aa184ead4583be424a256b0ee06fea736}{DEBUGINFP}(10000, (\textcolor{stringliteral}{"Dispatch to %d\(\backslash\)n"}, i));
00140                                 MVCWriteSignal(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave, 
      \hyperlink{_picture_info_8h_a562b615ec34d4eb99440e76b9b8a9174a435cbaa1d931366ee087951abb4d6f0a}{CTS_WORKNEXT});
00141                                 \hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws = \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611}{WS_RUNNING};
00142                                 
00143                                 \hyperlink{_task_dispatcher_8cpp_a4d4510d185efabc073b3e0ca88053fb1}{TransferParam}(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i], pictInfo);
00144                                 return ;
00145                         \}
00146                 \}
00147                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < Configure::NUM\_OF\_SPU; ++i)
00148                 \{
00149                         \textcolor{keywordflow}{if} (\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws==\hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a}{WS_NONE})
00150                         \{
00151                                 \hyperlink{_debug_8h_aa184ead4583be424a256b0ee06fea736}{DEBUGINFP}(10000, (\textcolor{stringliteral}{"Dispatch N to %d\(\backslash\)n"}, i));
00152 
00153                                 \hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave = MVCCreateThread(pEntry);
00154                                 \hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ct = pictInfo->\hyperlink{struct_coding_pict_info_a6bfb22b57d0d223546150c71e125fb39}{PictType};
00155                                 \hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws = \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611}{WS_RUNNING};
00156                                 
00157                                 \hyperlink{_task_dispatcher_8cpp_a4d4510d185efabc073b3e0ca88053fb1}{TransferParam}(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i], pictInfo);
00158                                 return ;
00159                         \}
00160                 \}
00161                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < Configure::NUM\_OF\_SPU; ++i)
00162                 \{
00163                         \textcolor{keywordflow}{if} (\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws==\hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e}{WS_WAITING})
00164                         \{
00165                                 \hyperlink{_debug_8h_aa184ead4583be424a256b0ee06fea736}{DEBUGINFP}(10000, (\textcolor{stringliteral}{"Dispatch DN to %d\(\backslash\)n"}, i));
00166                                 \hyperlink{_debug_8h_a3f7e58a01a8beb987f565ac1a304708c}{DEBUGBLK}(10, \textcolor{stringliteral}{"Dispatch"});
00167                                 MVCWriteSignal(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave, \hyperlink{_picture_info_8h_a562b615ec34d4eb99440e76b9b8a9174a559a610ab332f3ca38d82e7900772e99}{CTS_HALT});
00168                                 MVCReadSignal(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave);
00169                                 MVCWaitThread(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave);
00170                                 MVCDestroyThread(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave);
00171 
00172                                 \hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave = MVCCreateThread(pEntry);
00173                                 \hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ct = pictInfo->\hyperlink{struct_coding_pict_info_a6bfb22b57d0d223546150c71e125fb39}{PictType};
00174                                 \hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws = \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611}{WS_RUNNING};
00175                                 
00176                                 \hyperlink{_task_dispatcher_8cpp_a4d4510d185efabc073b3e0ca88053fb1}{TransferParam}(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i], pictInfo);
00177                                 return ;
00178                         \}
00179                 \}
00180         \}
00181 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=226pt]{_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=158pt]{_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60_icgraph}
\end{center}
\end{figure}


\hypertarget{_task_dispatcher_8cpp_a1d60dff3d8b50942f03375c11e724af2}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!ProcessFrames@{ProcessFrames}}
\index{ProcessFrames@{ProcessFrames}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{ProcessFrames}]{\setlength{\rightskip}{0pt plus 5cm}void ProcessFrames ()}}
\label{_task_dispatcher_8cpp_a1d60dff3d8b50942f03375c11e724af2}




\begin{footnotesize}\begin{alltt}
00184 \{
00185         \hyperlink{class_sliding_window}{SlidingWindow} sw;
00186         \hyperlink{class_bitstream_data}{BitstreamData} bd(&sw, \hyperlink{class_configure_a0e7dd4e79c40df653c7ca73ecbab5d39}{Configure::outputFileName});
00187         \textcolor{keywordflow}{while} (1)
00188         \{
00189                 \textcolor{keywordtype}{int} viewCount = \hyperlink{class_codec_info_ad439fd8062a03d868dfe9c9b615b747e}{CodecInfo::GetInstance}().\hyperlink{class_codec_info_aee785011cec77ff3c0c646b498fe1e7d}{sps}.\hyperlink{struct_sequence_parameters_set_af32c7819f630856ccd99aaf78e8f656c}{viewCount};
00190                 \textcolor{keywordflow}{if} (viewCount)
00191                         \textcolor{keywordflow}{break};
00192                 Sleep(10);
00193         \}
00194         \hyperlink{struct_sequence_parameters_set}{SequenceParametersSet} &sps = \hyperlink{class_codec_info_ad439fd8062a03d868dfe9c9b615b747e}{CodecInfo::GetInstance}().\hyperlink{class_codec_info_aee785011cec77ff3c0c646b498fe1e7d}{sps};
00195         \hyperlink{class_raw_data}{RawData} data(&sw, \hyperlink{class_configure_aa6d6606a0e2fb33b2f828f207df7e140}{Configure::inputPattern});
00196         \hyperlink{class_frame_controller___parallel}{FrameController_Parallel} fc(&sw);
00197         \hyperlink{_task_dispatcher_8cpp_ab5d80279fc1eb333a1b618fee7c72293}{frameController} = &fc;
00198 
00199         printf(\textcolor{stringliteral}{"Decoding...\(\backslash\)n"});
00200         memset(&\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}, 0, \textcolor{keyword}{sizeof}(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}));
00201 
00202         \textcolor{keywordtype}{long} start = \hyperlink{_arch_8h_aae16a08f453f828deb4ccd262d87a278}{MVCGetCurrentTime}();
00203 
00204         \textcolor{keywordflow}{while} (!\hyperlink{_task_dispatcher_8cpp_ab5d80279fc1eb333a1b618fee7c72293}{frameController}->\hyperlink{class_a_frame_controller_a92ba4b7f8c0c84fff8be7203fae5221d}{ProcessCompleted}())
00205         \{
00206                 \hyperlink{_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d}{QueryFreeSPU}();
00207                 \textcolor{keywordflow}{if} (!\hyperlink{_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8}{WaitForSpu}())
00208                         \textcolor{keywordflow}{continue};
00209                 \hyperlink{struct_coding_pict_info}{CodingPictInfo} *cpi = \hyperlink{_task_dispatcher_8cpp_ab5d80279fc1eb333a1b618fee7c72293}{frameController}->\hyperlink{class_a_frame_controller_acc142fa10ce535ee171698af719c4d27}{GetNextProcessing}();
00210                 \textcolor{keywordflow}{if} (cpi)
00211                 \{
00212                         \hyperlink{_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60}{DispatchTask}(cpi);
00213                 \}
00214                 \textcolor{keywordflow}{else}
00215                         Sleep(1);
00216         \}
00217         \hyperlink{_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39}{QueryFreeAll}();
00218 
00219         \textcolor{keywordtype}{long} stop = \hyperlink{_arch_8h_aae16a08f453f828deb4ccd262d87a278}{MVCGetCurrentTime}();
00220         printf(\textcolor{stringliteral}{"Time Used:%ld\(\backslash\)n"}, stop - start); 
00221 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=407pt]{_task_dispatcher_8cpp_a1d60dff3d8b50942f03375c11e724af2_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=102pt]{_task_dispatcher_8cpp_a1d60dff3d8b50942f03375c11e724af2_icgraph}
\end{center}
\end{figure}


\hypertarget{_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!QueryFreeAll@{QueryFreeAll}}
\index{QueryFreeAll@{QueryFreeAll}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{QueryFreeAll}]{\setlength{\rightskip}{0pt plus 5cm}void QueryFreeAll ()}}
\label{_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39}




\begin{footnotesize}\begin{alltt}
00099 \{
00100         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \hyperlink{class_configure_ac48067b7f9d47427e932b4c44f4c9248}{Configure::NUM_OF_SPU}; ++i)
00101         \{
00102                 \textcolor{keywordflow}{if} (\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws == \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611}{WS_RUNNING})
00103                 \{
00104                         \textcolor{keywordflow}{while} (!MVCIsSignaled(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave))
00105                                 \hyperlink{_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d}{QueryFreeSPU}();
00106                         MVCReadSignal(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave);
00107                         \hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws = \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e}{WS_WAITING};
00108                         \hyperlink{_task_dispatcher_8cpp_ab5d80279fc1eb333a1b618fee7c72293}{frameController}->\hyperlink{class_a_frame_controller_afd4834463eebfc33536fed009bfb966c}{OnFrameComplete}(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].pif);\textcolor{comment}{//-
      --}
00109                 \}
00110                 \textcolor{keywordflow}{if} (\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws==\hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e}{WS_WAITING})
00111                 \{
00112                         MVCWriteSignal(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave, \hyperlink{_picture_info_8h_a562b615ec34d4eb99440e76b9b8a9174a559a610ab332f3ca38d82e7900772e99}{CTS_HALT});
00113                         MVCReadSignal(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave);
00114                         MVCWaitThread(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave);
00115                         MVCDestroyThread(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave);
00116 
00117                         \hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws = \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a}{WS_NONE};
00118                 \}
00119         \}
00120 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=279pt]{_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=157pt]{_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39_icgraph}
\end{center}
\end{figure}


\hypertarget{_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!QueryFreeSPU@{QueryFreeSPU}}
\index{QueryFreeSPU@{QueryFreeSPU}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{QueryFreeSPU}]{\setlength{\rightskip}{0pt plus 5cm}void QueryFreeSPU ()}}
\label{_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d}




\begin{footnotesize}\begin{alltt}
00088 \{
00089         \textcolor{keywordflow}{while} (!\hyperlink{_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8}{WaitForSpu}())
00090         \{
00091                 MVCThreadHandle threads[\hyperlink{_configure_8h_ab58e1993d3e199885b35a2578cd2411a}{MAX_SPU_NUM}];
00092                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \hyperlink{class_configure_ac48067b7f9d47427e932b4c44f4c9248}{Configure::NUM_OF_SPU}; ++i)
00093                         threads[i] = \hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave;
00094                 WaitSignals(threads, Configure::NUM\_OF\_SPU);
00095         \}
00096 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=224pt]{_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=217pt]{_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d_icgraph}
\end{center}
\end{figure}


\hypertarget{_task_dispatcher_8cpp_a4d4510d185efabc073b3e0ca88053fb1}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!TransferParam@{TransferParam}}
\index{TransferParam@{TransferParam}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{TransferParam}]{\setlength{\rightskip}{0pt plus 5cm}void TransferParam ({\bf SPUSTATUS} \& {\em spu}, \/  {\bf CodingPictInfo} $\ast$ {\em pictInfo})}}
\label{_task_dispatcher_8cpp_a4d4510d185efabc073b3e0ca88053fb1}




\begin{footnotesize}\begin{alltt}
00061 \{
00062         spu.\hyperlink{structtag_s_p_u_s_t_a_t_u_s_a06878bf12155793c0264fd8e3ca8a4c8}{pif} = pictInfo;
00063         MVCWriteSignal(spu.\hyperlink{structtag_s_p_u_s_t_a_t_u_s_a527110a06626a2918c8f2129daafae57}{slave}, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int})pictInfo);
00064 \}
\end{alltt}\end{footnotesize}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=216pt]{_task_dispatcher_8cpp_a4d4510d185efabc073b3e0ca88053fb1_icgraph}
\end{center}
\end{figure}


\hypertarget{_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!WaitForSpu@{WaitForSpu}}
\index{WaitForSpu@{WaitForSpu}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{WaitForSpu}]{\setlength{\rightskip}{0pt plus 5cm}bool WaitForSpu ()}}
\label{_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8}




\begin{footnotesize}\begin{alltt}
00068 \{
00069         \textcolor{keywordtype}{bool} ret = \textcolor{keyword}{false};
00070         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \hyperlink{class_configure_ac48067b7f9d47427e932b4c44f4c9248}{Configure::NUM_OF_SPU}; ++i)
00071         \{
00072                 \textcolor{keywordflow}{if} (\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws == \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611}{WS_RUNNING})
00073                         \textcolor{keywordflow}{if} (MVCIsSignaled(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave))
00074                         \{
00075                                 MVCReadSignal(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].slave);
00076                                 \hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws = \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e}{WS_WAITING};
00077                                 
00078                                 \hyperlink{_task_dispatcher_8cpp_ab5d80279fc1eb333a1b618fee7c72293}{frameController}->\hyperlink{class_a_frame_controller_afd4834463eebfc33536fed009bfb966c}{OnFrameComplete}(\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].
      pif);
00079                         \}
00080                 \textcolor{keywordflow}{if} ((\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws == \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e}{WS_WAITING}) ||
00081                         (\hyperlink{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{wk}.\hyperlink{struct_working_status_a2f406a85ec2bf9b4b9c25eb8052e4fb3}{spustatus}[i].ws == \hyperlink{_task_dispatcher_8cpp_a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a}{WS_NONE}))
00082                         ret = \textcolor{keyword}{true};
00083         \}
00084         \textcolor{keywordflow}{return} ret;
00085 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=164pt]{_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=270pt]{_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8_icgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\hypertarget{_task_dispatcher_8cpp_ab85bffa192c32e8cd2d17a5fd100f15c}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!decodeframe\_\-b@{decodeframe\_\-b}}
\index{decodeframe\_\-b@{decodeframe\_\-b}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{decodeframe\_\-b}]{\setlength{\rightskip}{0pt plus 5cm}MVCThreadEntry decodeframe\_\-b}}
\label{_task_dispatcher_8cpp_ab85bffa192c32e8cd2d17a5fd100f15c}
\hypertarget{_task_dispatcher_8cpp_a2bef13de19406924682c9866f1b9aa15}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!decodeframe\_\-i@{decodeframe\_\-i}}
\index{decodeframe\_\-i@{decodeframe\_\-i}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{decodeframe\_\-i}]{\setlength{\rightskip}{0pt plus 5cm}MVCThreadEntry decodeframe\_\-i}}
\label{_task_dispatcher_8cpp_a2bef13de19406924682c9866f1b9aa15}
\hypertarget{_task_dispatcher_8cpp_a01af4dde438ce227a4bbd77c704f2d37}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!decodeframe\_\-p@{decodeframe\_\-p}}
\index{decodeframe\_\-p@{decodeframe\_\-p}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{decodeframe\_\-p}]{\setlength{\rightskip}{0pt plus 5cm}MVCThreadEntry decodeframe\_\-p}}
\label{_task_dispatcher_8cpp_a01af4dde438ce227a4bbd77c704f2d37}
\hypertarget{_task_dispatcher_8cpp_ab5d80279fc1eb333a1b618fee7c72293}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!frameController@{frameController}}
\index{frameController@{frameController}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{frameController}]{\setlength{\rightskip}{0pt plus 5cm}{\bf AFrameController}$\ast$ {\bf frameController}}}
\label{_task_dispatcher_8cpp_ab5d80279fc1eb333a1b618fee7c72293}
\hypertarget{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}{
\index{TaskDispatcher.cpp@{TaskDispatcher.cpp}!wk@{wk}}
\index{wk@{wk}!TaskDispatcher.cpp@{TaskDispatcher.cpp}}
\subsubsection[{wk}]{\setlength{\rightskip}{0pt plus 5cm}{\bf WorkingStatus} {\bf wk}}}
\label{_task_dispatcher_8cpp_aa0dd44fdd96656327b5f2d0ebd634930}
