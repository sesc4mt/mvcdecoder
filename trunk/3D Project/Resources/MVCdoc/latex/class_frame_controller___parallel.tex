\hypertarget{class_frame_controller___parallel}{
\section{FrameController\_\-Parallel Class Reference}
\label{class_frame_controller___parallel}\index{FrameController\_\-Parallel@{FrameController\_\-Parallel}}
}


{\ttfamily \#include $<$FrameController\_\-Parallel.h$>$}



Inheritance diagram for FrameController\_\-Parallel:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=400pt]{class_frame_controller___parallel__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for FrameController\_\-Parallel:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=400pt]{class_frame_controller___parallel__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_frame_controller___parallel_a5e258e822b7cea0eb61e02b28a7f0db7}{FrameController\_\-Parallel} (\hyperlink{class_sliding_window}{SlidingWindow} $\ast$slidingWindow)
\item 
virtual \hyperlink{struct_coding_pict_info}{CodingPictInfo} $\ast$ \hyperlink{class_frame_controller___parallel_a51792b5fe70db6d99be59c110dbc3041}{GetNextProcessing} ()
\item 
virtual void \hyperlink{class_frame_controller___parallel_a26429e70ddf3aa68cc2d28000a4935e1}{OnFrameComplete} (\hyperlink{struct_coding_pict_info}{CodingPictInfo} $\ast$cpi)
\item 
virtual bool \hyperlink{class_frame_controller___parallel_ac778eb523c6725a9e4da4e4239a88b2a}{ProcessCompleted} ()
\end{DoxyCompactItemize}


\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_frame_controller___parallel_a5e258e822b7cea0eb61e02b28a7f0db7}{
\index{FrameController\_\-Parallel@{FrameController\_\-Parallel}!FrameController\_\-Parallel@{FrameController\_\-Parallel}}
\index{FrameController\_\-Parallel@{FrameController\_\-Parallel}!FrameController_Parallel@{FrameController\_\-Parallel}}
\subsubsection[{FrameController\_\-Parallel}]{\setlength{\rightskip}{0pt plus 5cm}FrameController\_\-Parallel::FrameController\_\-Parallel ({\bf SlidingWindow} $\ast$ {\em slidingWindow})}}
\label{class_frame_controller___parallel_a5e258e822b7cea0eb61e02b28a7f0db7}




\begin{footnotesize}\begin{alltt}
00013                                                                                : 
      \hyperlink{class_a_frame_controller_a448319ad03f91eebc5da7fdf8a43516c}{AFrameController}(slidingWindow)
00014 \{
00015         countRun = 0;
00016 \}
\end{alltt}\end{footnotesize}




\subsection{Member Function Documentation}
\hypertarget{class_frame_controller___parallel_a51792b5fe70db6d99be59c110dbc3041}{
\index{FrameController\_\-Parallel@{FrameController\_\-Parallel}!GetNextProcessing@{GetNextProcessing}}
\index{GetNextProcessing@{GetNextProcessing}!FrameController_Parallel@{FrameController\_\-Parallel}}
\subsubsection[{GetNextProcessing}]{\setlength{\rightskip}{0pt plus 5cm}{\bf CodingPictInfo} $\ast$ FrameController\_\-Parallel::GetNextProcessing ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{class_frame_controller___parallel_a51792b5fe70db6d99be59c110dbc3041}


Implements \hyperlink{class_a_frame_controller_acc142fa10ce535ee171698af719c4d27}{AFrameController}.





\begin{footnotesize}\begin{alltt}
00019 \{
00020         \textcolor{keywordtype}{int} viewCount = \hyperlink{class_codec_info_ad439fd8062a03d868dfe9c9b615b747e}{CodecInfo::GetInstance}().\hyperlink{class_codec_info_aee785011cec77ff3c0c646b498fe1e7d}{sps}.\hyperlink{struct_sequence_parameters_set_af32c7819f630856ccd99aaf78e8f656c}{viewCount};
00021         \_lock.Lock();
00022         \hyperlink{struct_coding_pict_info}{CodingPictInfo} *ret = 0;
00023         \textcolor{keywordtype}{int} proc = \hyperlink{class_a_frame_controller_aca7790494d5c5d114171269ddaabd568}{_slidingWindow}->\hyperlink{class_sliding_window_a3be69abc76bff5b71ab96dadcced9f65}{GetFirstUnfinished}();
00024         \textcolor{keywordtype}{int} avail = \hyperlink{class_a_frame_controller_aca7790494d5c5d114171269ddaabd568}{_slidingWindow}->\hyperlink{class_sliding_window_a2128091c76b407cd0e244759ba5a2846}{GetFirstAvail}();
00025         \textcolor{keywordtype}{int} bi = -1, bj = -1, nref = 100;
00026         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = proc; !ret && (i < avail); ++i)
00027         \{
00028                 \textcolor{keywordtype}{int} gopOff = i&7;
00029                 \textcolor{keywordtype}{int} gopFirst = i - gopOff;
00030                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < viewCount; ++j)
00031                 \{
00032                         \hyperlink{struct_coding_pict_info}{CodingPictInfo} *check = \hyperlink{class_a_frame_controller_aca7790494d5c5d114171269ddaabd568}{_slidingWindow}->
      \hyperlink{class_sliding_window_ac50874323a2aaa4ef76fab47f80c9f92}{GetCodingPictInfo}(i, j);
00033                         \textcolor{keywordflow}{if} (!(check->\hyperlink{struct_coding_pict_info_a41498e5ba764405481005e6569d7f728}{pictStatus}&\hyperlink{_picture_info_8h_ade32bc4832afeaeeda7d862a70f2d70d}{PICT_STATUS_PROCESSING}))
00034                         \{
00035                                 \textcolor{keywordtype}{bool} ok = \textcolor{keyword}{true};
00036                                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} depCheck = 0; depCheck < check->
      \hyperlink{struct_coding_pict_info_ab48541faa825385baeca833ffe98b3d4}{Ref_Count}[0]; ++depCheck)
00037                                 \{
00038                                         \textcolor{keywordtype}{int} depTimeId = check->\hyperlink{struct_coding_pict_info_a37079a7e9c26b338a6978063f471a82f}{Ref_Id}[0][depCheck
      ][0],
00039                                                 depViewId = check->\hyperlink{struct_coding_pict_info_a37079a7e9c26b338a6978063f471a82f}{Ref_Id}[0][depC
      heck][1];
00040                                         \hyperlink{struct_coding_pict_info}{CodingPictInfo} *dep = \hyperlink{class_a_frame_controller_aca7790494d5c5d114171269ddaabd568}{_slidingWindow}->
      \hyperlink{class_sliding_window_ac50874323a2aaa4ef76fab47f80c9f92}{GetCodingPictInfo}(depTimeId, depViewId);
00041                                         \textcolor{keywordflow}{if} (!(dep->\hyperlink{struct_coding_pict_info_a41498e5ba764405481005e6569d7f728}{pictStatus}&
      \hyperlink{_picture_info_8h_a170d5962358e97425e08d5646653494b}{PICT_STATUS_FINISHED}))
00042                                         \{
00043                                                 ok = \textcolor{keyword}{false};
00044                                                 \textcolor{keywordflow}{break};
00045                                         \}
00046                                 \}
00047                                 \textcolor{keywordflow}{if} (ok)
00048                                 \{
00049                                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} depCheck = 0; depCheck < check->
      \hyperlink{struct_coding_pict_info_ab48541faa825385baeca833ffe98b3d4}{Ref_Count}[1]; ++depCheck)
00050                                         \{
00051                                                 \textcolor{keywordtype}{int} depTimeId = check->\hyperlink{struct_coding_pict_info_a37079a7e9c26b338a6978063f471a82f}{Ref_Id}[1][
      depCheck][0],
00052                                                         depViewId = check->
      \hyperlink{struct_coding_pict_info_a37079a7e9c26b338a6978063f471a82f}{Ref_Id}[1][depCheck][1];
00053                                                 \hyperlink{struct_coding_pict_info}{CodingPictInfo} *dep = 
      \hyperlink{class_a_frame_controller_aca7790494d5c5d114171269ddaabd568}{_slidingWindow}->\hyperlink{class_sliding_window_ac50874323a2aaa4ef76fab47f80c9f92}{GetCodingPictInfo}(depTimeId, depViewId);
00054                                                 \textcolor{keywordflow}{if} (!(dep->\hyperlink{struct_coding_pict_info_a41498e5ba764405481005e6569d7f728}{pictStatus}&
      \hyperlink{_picture_info_8h_a170d5962358e97425e08d5646653494b}{PICT_STATUS_FINISHED}))
00055                                                 \{
00056                                                         ok = \textcolor{keyword}{false};
00057                                                         \textcolor{keywordflow}{break};
00058                                                 \}
00059                                         \}
00060                                 \}
00061                                 \textcolor{keywordflow}{if} (ok && check->\hyperlink{struct_coding_pict_info_ab48541faa825385baeca833ffe98b3d4}{Ref_Count}[0] + check->\hyperlink{struct_coding_pict_info_ab48541faa825385baeca833ffe98b3d4}{Ref_Count}[
      1] < nref)
00062                                 \{
00063                                         nref = check->\hyperlink{struct_coding_pict_info_ab48541faa825385baeca833ffe98b3d4}{Ref_Count}[0] + check->
      \hyperlink{struct_coding_pict_info_ab48541faa825385baeca833ffe98b3d4}{Ref_Count}[1];
00064                                         bi = i;
00065                                         bj = j;
00066                                 \}
00067                         \}
00068                 \}
00069         \}
00070         \textcolor{keywordflow}{if} (bi!=-1)
00071         \{
00072                 ret = \hyperlink{class_a_frame_controller_aca7790494d5c5d114171269ddaabd568}{_slidingWindow}->\hyperlink{class_sliding_window_ac50874323a2aaa4ef76fab47f80c9f92}{GetCodingPictInfo}(bi, bj);;
00073                 \hyperlink{struct_slice_parameters}{SliceParameters} *sp = \hyperlink{class_a_frame_controller_aca7790494d5c5d114171269ddaabd568}{_slidingWindow}->\hyperlink{class_sliding_window_a020d2c25f1bda31337f91bf9b1a809d1}{GetSliceParameters}(bi, bj);
      
00074                 ret->\hyperlink{struct_coding_pict_info_ad85dae4751165ea3cbb8f7b8c6e61dc3}{timeId} = bi;
00075                 ret->\hyperlink{struct_coding_pict_info_a987595091bfba91b3166b04bca988697}{viewId} = bj;
00076                 ret->\hyperlink{struct_coding_pict_info_a6bfb22b57d0d223546150c71e125fb39}{PictType} = sp->\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType};
00077                 ret->\hyperlink{struct_coding_pict_info_a6e808cdf552c3a18da4b75f4d0c35c28}{baseQP} = \hyperlink{class_codec_info_ad439fd8062a03d868dfe9c9b615b747e}{CodecInfo::GetInstance}().\hyperlink{class_codec_info_abaa8d84a7d4045129ee64d91eaac4481}{pps}.\hyperlink{struct_picture_parameters_set_a1c6a508d31929ad84dec0b717ac484a4}{baseQP} + sp->\hyperlink{struct_slice_parameters_a5ca0d343251519b63746af21c1cb9f70}{QP_Delta};
      
00078                 ret->\hyperlink{struct_coding_pict_info_a41498e5ba764405481005e6569d7f728}{pictStatus} |= \hyperlink{_picture_info_8h_ade32bc4832afeaeeda7d862a70f2d70d}{PICT_STATUS_PROCESSING};
00079                 ret->\hyperlink{struct_coding_pict_info_ac290120f5d65f0497efa17928da82922}{log2nFrames} = \hyperlink{class_codec_info_ad439fd8062a03d868dfe9c9b615b747e}{CodecInfo::GetInstance}().\hyperlink{class_codec_info_aee785011cec77ff3c0c646b498fe1e7d}{sps}.\hyperlink{struct_sequence_parameters_set_ac5f0d82a961acfe4f966e7c35aa37339}{log2nFrames};
00080         \}
00081         \_lock.Unlock();
00082         \textcolor{keywordflow}{if} (ret)
00083         \{
00084                 ++countRun;
00085                 \textcolor{comment}{//ret->MP = (NCORE - 1) / countRun + 1;}
00086                 ret->\hyperlink{struct_coding_pict_info_ab254953ed2b4e1de64f05eadbc825646}{MP} = 1;
00087         \}
00088         \textcolor{keywordflow}{return} ret;
00089 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=420pt]{class_frame_controller___parallel_a51792b5fe70db6d99be59c110dbc3041_cgraph}
\end{center}
\end{figure}


\hypertarget{class_frame_controller___parallel_a26429e70ddf3aa68cc2d28000a4935e1}{
\index{FrameController\_\-Parallel@{FrameController\_\-Parallel}!OnFrameComplete@{OnFrameComplete}}
\index{OnFrameComplete@{OnFrameComplete}!FrameController_Parallel@{FrameController\_\-Parallel}}
\subsubsection[{OnFrameComplete}]{\setlength{\rightskip}{0pt plus 5cm}void FrameController\_\-Parallel::OnFrameComplete ({\bf CodingPictInfo} $\ast$ {\em cpi})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{class_frame_controller___parallel_a26429e70ddf3aa68cc2d28000a4935e1}


Implements \hyperlink{class_a_frame_controller_afd4834463eebfc33536fed009bfb966c}{AFrameController}.





\begin{footnotesize}\begin{alltt}
00092 \{
00093         cpi->\hyperlink{struct_coding_pict_info_a41498e5ba764405481005e6569d7f728}{pictStatus} |= \hyperlink{_picture_info_8h_a170d5962358e97425e08d5646653494b}{PICT_STATUS_FINISHED};
00094         \hyperlink{class_a_frame_controller_aca7790494d5c5d114171269ddaabd568}{_slidingWindow}->\hyperlink{class_sliding_window_a8f303bc211297021f20e09dced119207}{IncreaseFinish}();
00095 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=221pt]{class_frame_controller___parallel_a26429e70ddf3aa68cc2d28000a4935e1_cgraph}
\end{center}
\end{figure}


\hypertarget{class_frame_controller___parallel_ac778eb523c6725a9e4da4e4239a88b2a}{
\index{FrameController\_\-Parallel@{FrameController\_\-Parallel}!ProcessCompleted@{ProcessCompleted}}
\index{ProcessCompleted@{ProcessCompleted}!FrameController_Parallel@{FrameController\_\-Parallel}}
\subsubsection[{ProcessCompleted}]{\setlength{\rightskip}{0pt plus 5cm}bool FrameController\_\-Parallel::ProcessCompleted ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{class_frame_controller___parallel_ac778eb523c6725a9e4da4e4239a88b2a}


Implements \hyperlink{class_a_frame_controller_a92ba4b7f8c0c84fff8be7203fae5221d}{AFrameController}.





\begin{footnotesize}\begin{alltt}
00098 \{
00099         \textcolor{keywordflow}{return} \hyperlink{class_a_frame_controller_aca7790494d5c5d114171269ddaabd568}{_slidingWindow}->\hyperlink{class_sliding_window_afd67521d283b68f9fbc769ee9c0ba4b4}{IsDataFinished}() && (\hyperlink{class_a_frame_controller_aca7790494d5c5d114171269ddaabd568}{_slidingWindow}->\hyperlink{class_sliding_window_a3df64e20282ce10a45c4c3f3011e536d}{GetUnsaved}()=
      =\hyperlink{class_a_frame_controller_aca7790494d5c5d114171269ddaabd568}{_slidingWindow}->\hyperlink{class_sliding_window_a2128091c76b407cd0e244759ba5a2846}{GetFirstAvail}());
00100 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=396pt]{class_frame_controller___parallel_ac778eb523c6725a9e4da4e4239a88b2a_cgraph}
\end{center}
\end{figure}




The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
MVCDecoder/Controller/\hyperlink{_frame_controller___parallel_8h}{FrameController\_\-Parallel.h}\item 
MVCDecoder/Controller/\hyperlink{_frame_controller___parallel_8cpp}{FrameController\_\-Parallel.cpp}\end{DoxyCompactItemize}
