\hypertarget{class_in_stream}{
\section{InStream Class Reference}
\label{class_in_stream}\index{InStream@{InStream}}
}


{\ttfamily \#include $<$InStream.h$>$}



Collaboration diagram for InStream:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=400pt]{class_in_stream__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_in_stream_acef728594fc6f21e4b59fa7c37c04057}{InStream} (\hyperlink{_types_8h_a363e4d606232036a6b89060813c45489}{uint8\_\-t} $\ast$buf, int buflen)
\item 
virtual \hyperlink{class_in_stream_ab75c26c4747d2a23388735cdfebbe4fa}{$\sim$InStream} ()
\item 
void \hyperlink{class_in_stream_a299540fd5338ddf57f34b3c6a9df1ebe}{Init} (\hyperlink{_types_8h_a363e4d606232036a6b89060813c45489}{uint8\_\-t} $\ast$buf, int buflen)
\item 
void \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment} (char $\ast$)
\item 
int \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode} (\hyperlink{_types_8h_a04909d1366bb244ff2482beb51635f37}{uint32\_\-t} len)
\item 
int \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag} ()
\item 
\hyperlink{_types_8h_a04909d1366bb244ff2482beb51635f37}{uint32\_\-t} \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc} ()
\item 
\hyperlink{_types_8h_a115ba3a1b24a8702355c5dbd61ce01e0}{int32\_\-t} \hyperlink{class_in_stream_accc880522e6e43bd3a46297988de1c47}{ReadSvlc} ()
\item 
void \hyperlink{class_in_stream_a27fd3aaea580f6f7eaa5dd7744b9d54d}{ByteAlign} ()
\item 
void \hyperlink{class_in_stream_a700d52a510354fcf7787b118dbeb406f}{ResetBitstream} ()
\item 
bool \hyperlink{class_in_stream_afaa762eba65bc93c673a1cd97d67f812}{more\_\-rbsp\_\-data} ()
\item 
int \hyperlink{class_in_stream_a95ef1b146ee1d6ab6152001fc7719478}{GetNalType} ()
\item 
void \hyperlink{class_in_stream_abaa60d112267ece8de9f303623abd79d}{ReadSequenceParameterSet} (\hyperlink{struct_sequence_parameters_set}{SequenceParametersSet} \&sps)
\item 
void \hyperlink{class_in_stream_abb8e8d2b7eef014e7b6285e130a19a0a}{ReadSubsetSequenceParameterSet} (\hyperlink{struct_sequence_parameters_set}{SequenceParametersSet} \&sps)
\item 
void \hyperlink{class_in_stream_a0f4a6aeef628f4ec90e8ff9ea2e8b566}{ReadPictureParameterSet} (\hyperlink{struct_picture_parameters_set}{PictureParametersSet} \&pps)
\item 
void \hyperlink{class_in_stream_ab40abe55d480a2dc42e484a8a7eb53a4}{ReadSlicePrefix} (\hyperlink{struct_slice_parameters}{SliceParameters} \&sp, const \hyperlink{struct_sequence_parameters_set}{SequenceParametersSet} \&sps)
\item 
int \hyperlink{class_in_stream_a6369ed63c0fad1007f16e3e885825aea}{ReadSliceHeader} (\hyperlink{struct_slice_parameters}{SliceParameters} \&sp, \hyperlink{class_array_list}{ArrayList}$<$ int $>$ $\ast$\&ref\_\-frames, \hyperlink{class_sliding_window}{SlidingWindow} \&slidingWindow, int minTime)
\end{DoxyCompactItemize}


\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_in_stream_acef728594fc6f21e4b59fa7c37c04057}{
\index{InStream@{InStream}!InStream@{InStream}}
\index{InStream@{InStream}!InStream@{InStream}}
\subsubsection[{InStream}]{\setlength{\rightskip}{0pt plus 5cm}InStream::InStream ({\bf uint8\_\-t} $\ast$ {\em buf}, \/  int {\em buflen})}}
\label{class_in_stream_acef728594fc6f21e4b59fa7c37c04057}




\begin{footnotesize}\begin{alltt}
00010                                            : seq\_p\_id(0), pic\_p\_id(0)
00011 \{
00012         BitstreamInit(&bs, buf, buflen);
00013 \}
\end{alltt}\end{footnotesize}


\hypertarget{class_in_stream_ab75c26c4747d2a23388735cdfebbe4fa}{
\index{InStream@{InStream}!$\sim$InStream@{$\sim$InStream}}
\index{$\sim$InStream@{$\sim$InStream}!InStream@{InStream}}
\subsubsection[{$\sim$InStream}]{\setlength{\rightskip}{0pt plus 5cm}InStream::$\sim$InStream ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{class_in_stream_ab75c26c4747d2a23388735cdfebbe4fa}




\begin{footnotesize}\begin{alltt}
00016 \{
00017 \}
\end{alltt}\end{footnotesize}




\subsection{Member Function Documentation}
\hypertarget{class_in_stream_a27fd3aaea580f6f7eaa5dd7744b9d54d}{
\index{InStream@{InStream}!ByteAlign@{ByteAlign}}
\index{ByteAlign@{ByteAlign}!InStream@{InStream}}
\subsubsection[{ByteAlign}]{\setlength{\rightskip}{0pt plus 5cm}void InStream::ByteAlign ()}}
\label{class_in_stream_a27fd3aaea580f6f7eaa5dd7744b9d54d}




\begin{footnotesize}\begin{alltt}
00058 \{
00059         BitstreamByteAlign(&bs);
00060 \}
\end{alltt}\end{footnotesize}


\hypertarget{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{
\index{InStream@{InStream}!Comment@{Comment}}
\index{Comment@{Comment}!InStream@{InStream}}
\subsubsection[{Comment}]{\setlength{\rightskip}{0pt plus 5cm}void InStream::Comment (char $\ast$ {\em str})}}
\label{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}




\begin{footnotesize}\begin{alltt}
00025 \{
00026         \textcolor{comment}{//printf("%s  ", str);}
00027 \}
\end{alltt}\end{footnotesize}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=201pt]{class_in_stream_acab96485c6978e95e5ef747ebedf09d6_icgraph}
\end{center}
\end{figure}


\hypertarget{class_in_stream_a95ef1b146ee1d6ab6152001fc7719478}{
\index{InStream@{InStream}!GetNalType@{GetNalType}}
\index{GetNalType@{GetNalType}!InStream@{InStream}}
\subsubsection[{GetNalType}]{\setlength{\rightskip}{0pt plus 5cm}int InStream::GetNalType ()}}
\label{class_in_stream_a95ef1b146ee1d6ab6152001fc7719478}




\begin{footnotesize}\begin{alltt}
00086 \{
00087         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: forbidden\_zero\_bit"});
00088         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00089         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: nal\_ref\_idc"});
00090         \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(2);
00091         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: nal\_unit\_type"});
00092         \textcolor{keywordtype}{int} ret = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(5);
00093         \hyperlink{class_in_stream_a700d52a510354fcf7787b118dbeb406f}{ResetBitstream}();
00094         \textcolor{keywordflow}{return} ret;
00095 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=162pt]{class_in_stream_a95ef1b146ee1d6ab6152001fc7719478_cgraph}
\end{center}
\end{figure}


\hypertarget{class_in_stream_a299540fd5338ddf57f34b3c6a9df1ebe}{
\index{InStream@{InStream}!Init@{Init}}
\index{Init@{Init}!InStream@{InStream}}
\subsubsection[{Init}]{\setlength{\rightskip}{0pt plus 5cm}void InStream::Init ({\bf uint8\_\-t} $\ast$ {\em buf}, \/  int {\em buflen})}}
\label{class_in_stream_a299540fd5338ddf57f34b3c6a9df1ebe}




\begin{footnotesize}\begin{alltt}
00020 \{
00021         BitstreamInit(&bs, buf, buflen);
00022 \}
\end{alltt}\end{footnotesize}


\hypertarget{class_in_stream_afaa762eba65bc93c673a1cd97d67f812}{
\index{InStream@{InStream}!more\_\-rbsp\_\-data@{more\_\-rbsp\_\-data}}
\index{more\_\-rbsp\_\-data@{more\_\-rbsp\_\-data}!InStream@{InStream}}
\subsubsection[{more\_\-rbsp\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}bool InStream::more\_\-rbsp\_\-data ()}}
\label{class_in_stream_afaa762eba65bc93c673a1cd97d67f812}




\begin{footnotesize}\begin{alltt}
00068 \{
00069         \hyperlink{_types_8h_a115ba3a1b24a8702355c5dbd61ce01e0}{int32_t} pos = BitstreamPos(&bs);
00070         \hyperlink{_types_8h_a115ba3a1b24a8702355c5dbd61ce01e0}{int32_t} len = bs.\hyperlink{struct_bitstream_a56ea589bea2ad26a4512ff556b055fd8}{length} * 8;
00071         \hyperlink{_types_8h_a363e4d606232036a6b89060813c45489}{uint8_t} last = ((\hyperlink{_types_8h_adde6aaee8457bee49c2a92621fe22b79}{uint8}*)bs.\hyperlink{struct_bitstream_a4c2cb09a4fee7ed90d05f8b40914911e}{start})[bs.\hyperlink{struct_bitstream_a56ea589bea2ad26a4512ff556b055fd8}{length}-1];
00072         \textcolor{keywordflow}{if} (last==0)
00073                 len-=8;
00074         \textcolor{keywordflow}{else}
00075         \{
00076                 \textcolor{keywordflow}{while} (!(last&1))
00077                 \{
00078                         last>>=1;
00079                         --len;
00080                 \}
00081         \}
00082         \textcolor{keywordflow}{return} pos<len-1;
00083 \}
\end{alltt}\end{footnotesize}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=194pt]{class_in_stream_afaa762eba65bc93c673a1cd97d67f812_icgraph}
\end{center}
\end{figure}


\hypertarget{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{
\index{InStream@{InStream}!ReadCode@{ReadCode}}
\index{ReadCode@{ReadCode}!InStream@{InStream}}
\subsubsection[{ReadCode}]{\setlength{\rightskip}{0pt plus 5cm}int InStream::ReadCode ({\bf uint32\_\-t} {\em len})}}
\label{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}




\begin{footnotesize}\begin{alltt}
00030 \{
00031         \textcolor{keywordtype}{int} code = \hyperlink{_bitstream_8h_a3474bd178129247b388e870a0bd602a3}{eg_read_direct}(&bs, len);
00032         \textcolor{comment}{//printf("Code %08lX, %d\(\backslash\)n", code, len);}
00033         \textcolor{keywordflow}{return} code;
00034 \}
\end{alltt}\end{footnotesize}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=203pt]{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c_icgraph}
\end{center}
\end{figure}


\hypertarget{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{
\index{InStream@{InStream}!ReadFlag@{ReadFlag}}
\index{ReadFlag@{ReadFlag}!InStream@{InStream}}
\subsubsection[{ReadFlag}]{\setlength{\rightskip}{0pt plus 5cm}int InStream::ReadFlag ()}}
\label{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}




\begin{footnotesize}\begin{alltt}
00037 \{
00038         \textcolor{keywordtype}{int} code = \hyperlink{_bitstream_8h_a930f8a3acc36d15b74015dd4579f485c}{eg_read_direct1}(&bs);
00039         \textcolor{comment}{//printf("Flag %d\(\backslash\)n", code);}
00040         \textcolor{keywordflow}{return} code;
00041 \}
\end{alltt}\end{footnotesize}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=201pt]{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f_icgraph}
\end{center}
\end{figure}


\hypertarget{class_in_stream_a0f4a6aeef628f4ec90e8ff9ea2e8b566}{
\index{InStream@{InStream}!ReadPictureParameterSet@{ReadPictureParameterSet}}
\index{ReadPictureParameterSet@{ReadPictureParameterSet}!InStream@{InStream}}
\subsubsection[{ReadPictureParameterSet}]{\setlength{\rightskip}{0pt plus 5cm}void InStream::ReadPictureParameterSet ({\bf PictureParametersSet} \& {\em pps})}}
\label{class_in_stream_a0f4a6aeef628f4ec90e8ff9ea2e8b566}




\begin{footnotesize}\begin{alltt}
00495 \{
00496         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: forbidden\_zero\_bit"});
00497         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00498         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: nal\_ref\_idc"});
00499         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(2) == 3);
00500         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: nal\_unit\_type"});
00501         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(5) == \hyperlink{_consts4_standard_8h_a0ae628337fb17a2b11855dd3524f3d04a0a937a1dcddd0ed49b7bbcc120a0a800}{NAL_UNIT_PPS});
00502 
00503         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: pic\_parameter\_set\_id"});
00504         \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00505         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: seq\_parameter\_set\_id"});
00506         \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00507         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: entropy\_coding\_mode\_flag"});
00508         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00509         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: pic\_order\_present\_flag"});
00510         pps.\hyperlink{struct_picture_parameters_set_a9611d788502cf2646a1fafd8f1cc7e4f}{pic_order_present_flag} = (\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 1);
00511 
00512         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: num\_slice\_groups\_minus1"});
00513         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() == 0);
00514 
00515         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: num\_ref\_idx\_l0\_active\_minus1"});
00516         pps.\hyperlink{struct_picture_parameters_set_abc9eb8dcb637bef8a76a7c12380fccf9}{num_ref_idx_l0_active} = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() + 1;
00517         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: num\_ref\_idx\_l1\_active\_minus1"});
00518         pps.\hyperlink{struct_picture_parameters_set_afb1dc1e024b6c9263e33d3f1dd233203}{num_ref_idx_l1_active} = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() + 1;
00519         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: weighted\_pred\_flag"});
00520         pps.\hyperlink{struct_picture_parameters_set_a4cd484fee6229fd37fa2bf7519458f3a}{weighted_pred_flag} = \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00521         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(pps.\hyperlink{struct_picture_parameters_set_a4cd484fee6229fd37fa2bf7519458f3a}{weighted_pred_flag}==0);
00522         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: weighted\_bipred\_idc"});
00523         pps.\hyperlink{struct_picture_parameters_set_a436591953af7e22c28e0e2844acdf9f3}{weighted_bipred_idc} = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(2);
00524         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(pps.\hyperlink{struct_picture_parameters_set_a436591953af7e22c28e0e2844acdf9f3}{weighted_bipred_idc}==0);
00525         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: pic\_init\_qp\_minus26"});
00526         pps.\hyperlink{struct_picture_parameters_set_a1c6a508d31929ad84dec0b717ac484a4}{baseQP} = \hyperlink{class_in_stream_accc880522e6e43bd3a46297988de1c47}{ReadSvlc}() + 26;
00527         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: pic\_init\_qs\_minus26"});
00528         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_accc880522e6e43bd3a46297988de1c47}{ReadSvlc}() == 0);
00529         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: chroma\_qp\_index\_offset"});
00530         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_accc880522e6e43bd3a46297988de1c47}{ReadSvlc}() == 0);
00531         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: deblocking\_filter\_parameters\_present\_flag"});
00532         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00533         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: constrained\_intra\_pred\_flag"});
00534         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00535         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: redundant\_pic\_cnt\_present\_flag"});
00536         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00537 
00538         \textcolor{keywordflow}{if} (\hyperlink{class_in_stream_afaa762eba65bc93c673a1cd97d67f812}{more_rbsp_data}())
00539         \{
00540                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: transform\_8x8\_mode\_flag"});
00541                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 1);
00542                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: pic\_scaling\_matrix\_present\_flag"});
00543                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00544                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"PPS: second\_chroma\_qp\_index\_offset"});
00545                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_accc880522e6e43bd3a46297988de1c47}{ReadSvlc}() == 0);
00546         \}
00547 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=194pt]{class_in_stream_a0f4a6aeef628f4ec90e8ff9ea2e8b566_cgraph}
\end{center}
\end{figure}


\hypertarget{class_in_stream_abaa60d112267ece8de9f303623abd79d}{
\index{InStream@{InStream}!ReadSequenceParameterSet@{ReadSequenceParameterSet}}
\index{ReadSequenceParameterSet@{ReadSequenceParameterSet}!InStream@{InStream}}
\subsubsection[{ReadSequenceParameterSet}]{\setlength{\rightskip}{0pt plus 5cm}void InStream::ReadSequenceParameterSet ({\bf SequenceParametersSet} \& {\em sps})}}
\label{class_in_stream_abaa60d112267ece8de9f303623abd79d}




\begin{footnotesize}\begin{alltt}
00229 \{
00230         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: forbidden\_zero\_bit"});
00231         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00232         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: nal\_ref\_idc"});
00233         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(2) == 3);
00234         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: nal\_unit\_type"});
00235         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(5) == \hyperlink{_consts4_standard_8h_a0ae628337fb17a2b11855dd3524f3d04a87cac3a362213e69d6c5b959471f6f98}{NAL_UNIT_SPS});
00236 
00237         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: profile\_idc"});
00238         \textcolor{comment}{//ASSERT(ReadCode(8) == HIGH\_PROFILE);}
00239         sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(8);
00240         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: constrained\_set0\_flag"});
00241         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00242         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: constrained\_set1\_flag"});
00243         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00244         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: constrained\_set2\_flag"});
00245         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00246         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: constrained\_set3\_flag"});
00247         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00248         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: constrained\_set4\_flag"});
00249         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00250         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: constrained\_set5\_flag"});
00251         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00252         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: reserved\_zero\_2bits"});
00253         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(2) == 0);
00254         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: level\_idc"});
00255         \textcolor{keywordtype}{int} level\_idc = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(8);
00256         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(level\_idc==13 || level\_idc==21 || level\_idc==40 || level\_idc==30 |
      | level\_idc==31); \textcolor{comment}{// 40 for H.264}
00257         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: seq\_parameter\_set\_id"});
00258         \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00259         
00260         \textcolor{keywordflow}{if} (sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 100 || 
00261                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 110 || 
00262                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 122 || 
00263                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 244 || 
00264                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 44 || 
00265                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 83 || 
00266                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 86 || 
00267                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 118 ) \{
00268                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"--- fidelity range extension syntax ---"});
00269                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"ReadFrext"});
00270                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: chroma\_format\_idc"});
00271                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() == 1); \textcolor{comment}{// 4:2:0}
00272                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: bit\_depth\_luma\_minus8"});
00273                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() == 0);
00274                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: bit\_depth\_chroma\_minus8"});
00275                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() == 0);
00276                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: qpprime\_y\_zero\_transform\_bypass\_flag"});
00277                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00278                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: seq\_scaling\_matrix\_present\_flag"});
00279                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00280         \}
00281 
00282         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: log2\_max\_frame\_num\_minus4"});
00283         \textcolor{keywordtype}{int} log2nFramesM4 = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00284         sps.\hyperlink{struct_sequence_parameters_set_ac5f0d82a961acfe4f966e7c35aa37339}{log2nFrames} = log2nFramesM4 + 4;
00285         sps.\hyperlink{struct_sequence_parameters_set_afedac9d01de6ec718715ab45c63ee999}{nFramesM1} = (1<<sps.\hyperlink{struct_sequence_parameters_set_ac5f0d82a961acfe4f966e7c35aa37339}{log2nFrames})-1;
00286 
00287         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: pic\_order\_cnt\_type"});
00288         \hyperlink{_types_8h_a04909d1366bb244ff2482beb51635f37}{uint32_t} picOrderCntType = 0;
00289         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() == picOrderCntType);
00290         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: log2\_max\_pic\_order\_cnt\_lsb\_minus4"});
00291         \textcolor{keywordtype}{int} log2nPocM4 = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00292         sps.\hyperlink{struct_sequence_parameters_set_aff653fc637f7290b7edbaf1cfeacd6ca}{log2nPoc} = log2nPocM4 + 4;
00293 
00294         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: num\_ref\_frames"});
00295         sps.\hyperlink{struct_sequence_parameters_set_a8404973d25f8601dd012299638361f03}{numRefFrames} = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00296         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: required\_frame\_num\_update\_behaviour\_flag"});
00297         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00298 
00299         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: pic\_width\_in\_mbs\_minus\_1"});
00300         sps.\hyperlink{struct_sequence_parameters_set_a72286e512a40a01670e2519b3971cee2}{width}  = (\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() + 1) << 4;
00301         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: pic\_height\_in\_mbs\_units\_minus\_1"});
00302         sps.\hyperlink{struct_sequence_parameters_set_ab3b7bd818f9a0d1456d92496473a42eb}{height} = (\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() + 1) << 4;
00303         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: frame\_mbs\_only\_flag"});
00304         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 1);
00305         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: direct\_8x8\_inference\_flag"});
00306         \textcolor{comment}{//ASSERT(ReadFlag() == 1);}
00307         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00308         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: frame\_cropping\_flag"});
00309         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00310         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: vui\_parameters\_present\_flag"});
00311         sps.\hyperlink{struct_sequence_parameters_set_a557345c281f445eb71cbcd5d72a9aed0}{vui_parameters_present} = \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00312         \textcolor{keywordflow}{if} (sps.\hyperlink{struct_sequence_parameters_set_a557345c281f445eb71cbcd5d72a9aed0}{vui_parameters_present})
00313         \{
00314                 readVuiParameters(sps.\hyperlink{struct_sequence_parameters_set_ac473de5b97f08fefdbe39fe9c2c2c846}{vuiparams});
00315         \}
00316 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=188pt]{class_in_stream_abaa60d112267ece8de9f303623abd79d_cgraph}
\end{center}
\end{figure}


\hypertarget{class_in_stream_a6369ed63c0fad1007f16e3e885825aea}{
\index{InStream@{InStream}!ReadSliceHeader@{ReadSliceHeader}}
\index{ReadSliceHeader@{ReadSliceHeader}!InStream@{InStream}}
\subsubsection[{ReadSliceHeader}]{\setlength{\rightskip}{0pt plus 5cm}int InStream::ReadSliceHeader ({\bf SliceParameters} \& {\em sp}, \/  {\bf ArrayList}$<$ int $>$ $\ast$\& {\em ref\_\-frames}, \/  {\bf SlidingWindow} \& {\em slidingWindow}, \/  int {\em minTime})}}
\label{class_in_stream_a6369ed63c0fad1007f16e3e885825aea}




\begin{footnotesize}\begin{alltt}
00576 \{
00577         \textcolor{keywordtype}{int} long\_term\_reference\_flag = 0;
00578         \textcolor{keywordtype}{int} adaptive\_ref\_pic\_marking\_mode\_flag = 0;
00579         \textcolor{keywordtype}{int} ref\_pic\_list\_reordering\_flag0 = 0;
00580         \textcolor{keywordtype}{int} ref\_pic\_list\_reordering\_flag1 = 0;
00581         \hyperlink{struct_sequence_parameters_set}{SequenceParametersSet} &sps = \hyperlink{class_codec_info_ad439fd8062a03d868dfe9c9b615b747e}{CodecInfo::GetInstance}().\hyperlink{class_codec_info_aee785011cec77ff3c0c646b498fe1e7d}{sps};
00582         \hyperlink{struct_picture_parameters_set}{PictureParametersSet} &pps = \hyperlink{class_codec_info_ad439fd8062a03d868dfe9c9b615b747e}{CodecInfo::GetInstance}().\hyperlink{class_codec_info_abaa8d84a7d4045129ee64d91eaac4481}{pps};
00583         \textcolor{keywordtype}{int} num\_ref\_idx\_l0\_active = pps.\hyperlink{struct_picture_parameters_set_abc9eb8dcb637bef8a76a7c12380fccf9}{num_ref_idx_l0_active};
00584         \textcolor{keywordtype}{int} num\_ref\_idx\_l1\_active = pps.\hyperlink{struct_picture_parameters_set_afb1dc1e024b6c9263e33d3f1dd233203}{num_ref_idx_l1_active};
00585 
00586         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: forbidden\_zero\_bit"});
00587         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00588         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: nal\_ref\_idc"});
00589         \textcolor{keywordtype}{int} nal\_ref\_idc = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(2);
00590         sp.\hyperlink{struct_slice_parameters_a7e551828136a39ab347f77457aa11dbb}{isRef} = (nal\_ref\_idc != 0);
00591         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: nal\_unit\_type"});
00592         \textcolor{keywordtype}{int} nal\_unit\_type = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(5);
00593         \textcolor{keywordflow}{if} (nal\_unit\_type==20)
00594         \{
00595                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: svc\_mvc\_flag"});
00596                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00597                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: non\_idr\_flag"});
00598                 sp.\hyperlink{struct_slice_parameters_a60f8fe21acd611ec6892e47a2c6029e3}{IDR} = (\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}()==0);
00599                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: priority\_id"});
00600                 sp.\hyperlink{struct_slice_parameters_a82aa216a74ffaa7d1859aa1cfe135a8b}{priority_id} = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(6);
00601                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: view\_id"});
00602                 sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId} = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(10);
00603                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: temporal\_id"});
00604                 \textcolor{keywordtype}{int} temporal\_id = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(3);
00605 \textcolor{comment}{//              printf("\(\backslash\)t\(\backslash\)tTemporal Level = %d\(\backslash\)n", temporal\_id);}
00606                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: anchor\_pic\_flag"});
00607                 sp.\hyperlink{struct_slice_parameters_af8a7ea94e92b177c38277af8b827eb62}{isAnchor} = (\hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(1) == 1);
00608                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: inter\_view\_flag"});
00609                 \textcolor{keywordtype}{int} inter\_view\_flag = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(1);
00610 \textcolor{comment}{//              printf("\(\backslash\)t\(\backslash\)tInter view flag = %d\(\backslash\)n", inter\_view\_flag);}
00611                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: reserved\_zero\_one\_bit"});
00612                 \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(1);
00613         \}
00614         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SH: first\_mb\_in\_slice"});
00615         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() == 0);
00616         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SH: slice\_type"});
00617         sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType} = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00618         \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType}>=5)
00619                 sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType} -= 5;
00620         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SH: pic\_parameter\_set\_id"});
00621         \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00622         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SH: frame\_num"});
00623         sp.\hyperlink{struct_slice_parameters_a20319af06c76e833936a009f3c38d4ef}{frameNum} = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(sps.\hyperlink{struct_sequence_parameters_set_ac5f0d82a961acfe4f966e7c35aa37339}{log2nFrames});
00624 
00625         \textcolor{keywordflow}{if}( sp.\hyperlink{struct_slice_parameters_a60f8fe21acd611ec6892e47a2c6029e3}{IDR} || nal\_unit\_type==\hyperlink{_consts4_standard_8h_a0ae628337fb17a2b11855dd3524f3d04aa641b2e28c7c244e45e28f99dfc63a54}{NAL_UNIT_CODED_SLICE_IDR} )
00626         \{
00627                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SH: idr\_pic\_id"});
00628                 \textcolor{keywordtype}{int} idrPicId = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00629                 \textcolor{comment}{//printf("\(\backslash\)tIDR Picture ID = %d\(\backslash\)n", idrPicId);}
00630         \}
00631         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SH: pic\_order\_cnt\_lsb"});
00632         sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(sps.\hyperlink{struct_sequence_parameters_set_aff653fc637f7290b7edbaf1cfeacd6ca}{log2nPoc});
00633         \textcolor{comment}{//sp.timeId /= 2;}
00634         \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} < minTime)
00635         \{
00636                 sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} |= minTime & ~sps.\hyperlink{struct_sequence_parameters_set_a786d1401a47490d15c7f1512e21994ce}{nPocM1};
00637                 \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} < minTime)
00638                         sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} += (1<<sps.\hyperlink{struct_sequence_parameters_set_aff653fc637f7290b7edbaf1cfeacd6ca}{log2nPoc});
00639         \}
00640         \textcolor{comment}{//printf(" TIME,VIEW = %d, %d\(\backslash\)n", sp.timeId, sp.viewId);}
00641         \textcolor{comment}{//if (sp.timeId==1 && sp.viewId==1)}
00642         \textcolor{comment}{//\{}
00643         \textcolor{comment}{//      printf("");}
00644         \textcolor{comment}{//\}}
00645         \textcolor{keywordflow}{if} (pps.\hyperlink{struct_picture_parameters_set_a9611d788502cf2646a1fafd8f1cc7e4f}{pic_order_present_flag})
00646         \{
00647                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SH: delta\_pic\_order\_cnt\_bottom"});
00648                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_accc880522e6e43bd3a46297988de1c47}{ReadSvlc}() == 0);
00649         \}
00650         \hyperlink{class_array_list}{ArrayList<Pair<int, int>} > reo0, reo1;
00651         \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType}==1 || sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType}==6) \textcolor{comment}{// B, EB}
00652         \{
00653                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SH: direct\_spatial\_mv\_pred\_flag"});
00654                 \textcolor{keywordtype}{int} direct\_spatial\_mv\_pred\_flag = \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00655                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(direct\_spatial\_mv\_pred\_flag == 1)
00656         \}
00657         \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType}==0 || sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType}==1 || sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType}==5 || sp.
      \hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType}==6)
00658         \{
00659                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SH: num\_ref\_idx\_active\_override\_flag"});
00660                 \textcolor{keywordtype}{int} num\_ref\_idx\_active\_override\_flag = \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00661                 \textcolor{keywordflow}{if} (num\_ref\_idx\_active\_override\_flag)
00662                 \{
00663                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SH: num\_ref\_idx\_l0\_active\_minus1"});
00664                         num\_ref\_idx\_l0\_active = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() + 1;
00665                         \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType}==1 || sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType}==6)
00666                         \{
00667                                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SH: num\_ref\_idx\_l1\_active\_minus1"});
00668                                 num\_ref\_idx\_l1\_active = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() + 1;
00669                         \}
00670                 \}
00671                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"RIR: ref\_pic\_list\_reordering\_flag"});
00672                 ref\_pic\_list\_reordering\_flag0 = \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00673                 \textcolor{keywordflow}{if} (ref\_pic\_list\_reordering\_flag0)
00674                 \{
00675                         \textcolor{keywordtype}{int} reordering\_of\_pic\_nums\_idc;
00676                         \textcolor{keywordtype}{int} tt = 10;
00677                         \textcolor{keywordflow}{do} \{
00678                                 reordering\_of\_pic\_nums\_idc = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00679                                 \textcolor{keywordtype}{int} va = 0;
00680                                 \textcolor{keywordflow}{if} (reordering\_of\_pic\_nums\_idc != 3)
00681                                         va = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00682                                 reo0.\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(\hyperlink{_pair_8h_a76ecd40e2cff7790abf204644d74645e}{makePair}(reordering\_of\_pic\_nums\_id
      c, va+1));
00683                                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(tt--);
00684                         \} \textcolor{keywordflow}{while} (reordering\_of\_pic\_nums\_idc != 3);
00685                 \}
00686                 \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType}==1 || sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType}==6) \textcolor{comment}{// B, EB}
00687                 \{
00688                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"RIR: ref\_pic\_list\_reordering\_flag"});
00689                         ref\_pic\_list\_reordering\_flag1 = \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00690                         \textcolor{keywordtype}{int} tt = 5;
00691                         \textcolor{keywordflow}{if} (ref\_pic\_list\_reordering\_flag1)
00692                         \{
00693                                 \textcolor{keywordtype}{int} reordering\_of\_pic\_nums\_idc;
00694                                 \textcolor{keywordflow}{do} \{
00695                                         reordering\_of\_pic\_nums\_idc = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00696                                         \textcolor{keywordtype}{int} va = 0;
00697                                         \textcolor{keywordflow}{if} (reordering\_of\_pic\_nums\_idc != 3)
00698                                                 va = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00699                                         reo1.\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(\hyperlink{_pair_8h_a76ecd40e2cff7790abf204644d74645e}{makePair}(reordering\_of\_pic
      \_nums\_idc, va+1));
00700                                         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(tt--);
00701                                 \} \textcolor{keywordflow}{while} (reordering\_of\_pic\_nums\_idc != 3);
00702                         \}
00703                 \}
00704         \}
00705 
00706         \textcolor{keywordflow}{if} (nal\_ref\_idc)
00707         \{
00708                 \textcolor{keywordflow}{if} (nal\_unit\_type==5 || sp.\hyperlink{struct_slice_parameters_a60f8fe21acd611ec6892e47a2c6029e3}{IDR})
00709                 \{
00710                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"DRPM: no\_output\_of\_prior\_pics\_flag"});
00711                         \textcolor{keywordtype}{int} no\_output\_of\_prior\_pics\_flag = \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00712                         \textcolor{comment}{//printf("\(\backslash\)t\(\backslash\)tno\_output\_of\_prior\_pics\_flag = %d\(\backslash\)n", no\_ou
      tput\_of\_prior\_pics\_flag);}
00713                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"DRPM: long\_term\_reference\_flag"});
00714                         long\_term\_reference\_flag = \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00715                         \textcolor{comment}{//printf("\(\backslash\)t\(\backslash\)tlong\_term\_reference\_flag = %d\(\backslash\)n", long\_term
      \_reference\_flag);}
00716                 \}
00717                 \textcolor{keywordflow}{else}
00718                 \{
00719                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"adaptive\_ref\_pic\_marking\_mode\_flag"});
00720                         adaptive\_ref\_pic\_marking\_mode\_flag = \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00721                         \textcolor{keywordflow}{if} (adaptive\_ref\_pic\_marking\_mode\_flag)
00722                         \{
00723                                 \textcolor{keywordtype}{int} memory\_management\_control\_operation;
00724                                 \textcolor{keywordtype}{int} pb, pa;
00725                                 \textcolor{keywordflow}{do} \{
00726                                         memory\_management\_control\_operation = 
      \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00727                                         pa = pb = 0;
00728                                         \textcolor{keywordflow}{switch} (memory\_management\_control\_operati
      on)
00729                                         \{
00730                                         \textcolor{keywordflow}{case} 3:
00731                                                 pb = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00732 
00733                                         \textcolor{keywordflow}{case} 1:
00734                                         \textcolor{keywordflow}{case} 2:
00735                                         \textcolor{keywordflow}{case} 4:
00736                                         \textcolor{keywordflow}{case} 6:
00737                                                 pa = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00738 
00739                                         \textcolor{keywordflow}{case} 5:
00740                                         \textcolor{keywordflow}{default} : 
00741                                                 ;
00742                                         \}
00743                                         \textcolor{keywordflow}{if} (memory\_management\_control\_operation==
      0)
00744                                         \{
00745 
00746                                         \}
00747                                         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (memory\_management\_control\_operat
      ion==1)
00748                                         \{
00749                                                 \textcolor{keywordtype}{int} fn = sp.\hyperlink{struct_slice_parameters_a20319af06c76e833936a009f3c38d4ef}{frameNum} - pa - 1;
00750                                                 \textcolor{keywordtype}{bool} find = \textcolor{keyword}{false};
00751                                                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < ref\_frames[sp
      .\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); ++x)
00752                                                         \textcolor{keywordflow}{if} (slidingWindow.
      \hyperlink{class_sliding_window_a020d2c25f1bda31337f91bf9b1a809d1}{GetSliceParameters}(ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][x], sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId})->\hyperlink{struct_slice_parameters_a20319af06c76e833936a009f3c38d4ef}{frameNum} == fn)
00753                                                         \{
00754                                                                 ref\_frames[sp.
      \hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_a18695cf2c26e9c6ef585ec77afc19fc6}{erase}(x);
00755                                                                 find = \textcolor{keyword}{true};
00756                                                                 \textcolor{keywordflow}{break};
00757                                                         \}
00758                                                         \textcolor{keywordflow}{if} (!find)
00759                                                         \{
00760                                                                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(0);
00761                                                         \}
00762                                         \}
00763                                         \textcolor{keywordflow}{else}
00764                                         \{
00765                                                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(0);
00766                                         \}
00767 
00768                                 \} \textcolor{keywordflow}{while} (memory\_management\_control\_operation != 0
      );
00769                         \}
00770                 \}
00771         \}
00772 
00773         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SH: slice\_qp\_delta"});
00774         sp.\hyperlink{struct_slice_parameters_a5ca0d343251519b63746af21c1cb9f70}{QP_Delta} = \hyperlink{class_in_stream_accc880522e6e43bd3a46297988de1c47}{ReadSvlc}();
00775 
00776         \hyperlink{class_array_list}{ArrayList<Pair<int, int>} > list0, list1;
00777         \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType} == 2)
00778         \{
00779                 ; \textcolor{comment}{// Nothing}
00780         \}
00781         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType} == 1)
00782         \{
00783                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); ++i)
00784                         list0.\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(\hyperlink{_pair_8h_a76ecd40e2cff7790abf204644d74645e}{makePair}(ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][i], sp.
      \hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}));
00785                 list1 = list0;
00786                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = list0.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}() - 1; i >= 0; --i)
00787                 \{
00788                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < i; ++j)
00789                                 \textcolor{keywordflow}{if} (list0[j].first>=sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} && list0[j+1].first
      <sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} ||
00790                                         list0[j+1].first<sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} && list0[j+1].
      first>list0[j].first ||
00791                                         list0[j+1].first>=sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} && list0[j+1]
      .first<list0[j].first)
00792                                 \{
00793                                         \hyperlink{class_pair}{Pair<int, int>} tmp = list0[j]; list0[j] =
       list0[j+1]; list0[j+1] = tmp;
00794                                 \}
00795                 \}
00796                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = list0.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}() - 1; i >= 0; --i)
00797                 \{
00798                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < i; ++j)
00799                                 \textcolor{keywordflow}{if} (list1[j].first<=sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} && list1[j+1].first
      >sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} ||
00800                                         list1[j+1].first<=sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} && list1[j+1]
      .first>list1[j].first ||
00801                                         list1[j+1].first>sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} && list1[j+1].
      first<list1[j].first)
00802                                 \{
00803                                         \hyperlink{class_pair}{Pair<int, int>} tmp = list1[j]; list1[j] =
       list1[j+1]; list1[j+1] = tmp;
00804                                 \}
00805                 \}
00806         \}
00807         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_a8ab83c948c5e095477d918c0664fce0a}{SliceType} == 0)
00808         \{
00809                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); ++i)
00810                         list0.\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(\hyperlink{_pair_8h_a76ecd40e2cff7790abf204644d74645e}{makePair}(ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][i], sp.
      \hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}));
00811                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = list0.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}() - 1; i >= 0; --i)
00812                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < i; ++j)
00813                         \{
00814                                 \textcolor{keywordflow}{if} (slidingWindow.\hyperlink{class_sliding_window_a020d2c25f1bda31337f91bf9b1a809d1}{GetSliceParameters}(list0[j].fir
      st, list0[j].second)->\hyperlink{struct_slice_parameters_a20319af06c76e833936a009f3c38d4ef}{frameNum} <
00815                                         slidingWindow.\hyperlink{class_sliding_window_a020d2c25f1bda31337f91bf9b1a809d1}{GetSliceParameters}(list0[j+
      1].first, list0[j+1].second)->\hyperlink{struct_slice_parameters_a20319af06c76e833936a009f3c38d4ef}{frameNum})
00816                                 \{
00817                                         \hyperlink{class_pair}{Pair<int, int>} tmp = list0[j]; list0[j] =
       list0[j+1]; list0[j+1] = tmp;
00818                                 \}
00819                         \}
00820         \}
00821         \textcolor{keywordflow}{else}
00822         \{
00823                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(0);
00824         \}
00825 
00826 
00827 
00828         \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_af8a7ea94e92b177c38277af8b827eb62}{isAnchor})
00829         \{
00830                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < sps.\hyperlink{struct_sequence_parameters_set_ae9b6a7d85da9fec255cca59c3d750ecd}{anchorRefsList0}[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); ++i)
00831                         list0.\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(\hyperlink{_pair_8h_a76ecd40e2cff7790abf204644d74645e}{makePair}(sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId}, sps.\hyperlink{struct_sequence_parameters_set_ae9b6a7d85da9fec255cca59c3d750ecd}{anchorRefsList0}[s
      p.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][i]));
00832                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < sps.\hyperlink{struct_sequence_parameters_set_a7b865f89c34428785081c3c4acadc965}{anchorRefsList1}[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); ++i)
00833                         list1.\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(\hyperlink{_pair_8h_a76ecd40e2cff7790abf204644d74645e}{makePair}(sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId}, sps.\hyperlink{struct_sequence_parameters_set_a7b865f89c34428785081c3c4acadc965}{anchorRefsList1}[s
      p.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][i]));
00834         \}
00835         \textcolor{keywordflow}{else}
00836         \{
00837                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < sps.\hyperlink{struct_sequence_parameters_set_ab9b078b23e746ef60f7697896b963b93}{nonAnchorRefsList0}[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); ++i
      )
00838                         list0.\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(\hyperlink{_pair_8h_a76ecd40e2cff7790abf204644d74645e}{makePair}(sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId}, sps.
      \hyperlink{struct_sequence_parameters_set_ab9b078b23e746ef60f7697896b963b93}{nonAnchorRefsList0}[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][i]));
00839                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < sps.\hyperlink{struct_sequence_parameters_set_a68b7ffb23b151c53312798f7ab79a67a}{nonAnchorRefsList1}[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); ++i
      )
00840                         list1.\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(\hyperlink{_pair_8h_a76ecd40e2cff7790abf204644d74645e}{makePair}(sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId}, sps.
      \hyperlink{struct_sequence_parameters_set_a68b7ffb23b151c53312798f7ab79a67a}{nonAnchorRefsList1}[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][i]));
00841         \}
00842 
00843 \textcolor{preprocessor}{#define RPLR\_NEG 0}
00844 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define RPLR\_POS 1}
00845 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define RPLR\_LONG 2}
00846 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define RPLR\_END 3}
00847 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define RPLR\_VIEW\_NEG 4}
00848 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define RPLR\_VIEW\_POS 5}
00849 \textcolor{preprocessor}{}
00850         \textcolor{keywordflow}{if} (ref\_pic\_list\_reordering\_flag0)
00851         \{
00852                 \textcolor{keywordtype}{int}  uiPicNumPred    = sp.\hyperlink{struct_slice_parameters_a20319af06c76e833936a009f3c38d4ef}{frameNum};
00853                 \textcolor{keywordtype}{int}  uiIndex         = 0;   
00854                 \textcolor{keywordtype}{int}  uiCommand       = 0;   
00855                 \textcolor{keywordtype}{int}  uiIdentifier    = 0;   
00856                 \textcolor{comment}{// JVT-V043   }
00857                 \hyperlink{_types_8h_a943a9a9a987cd1f4d16d71dd0ae23721}{UInt}  uiPicViewIdx    = -1;   
00858                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < reo0.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); ++i)
00859                 \{   
00860                         uiCommand = reo0[i].first;
00861                         uiIdentifier = reo0[i].second - 1;
00862                         \textcolor{keywordflow}{if} (uiCommand == 3)
00863                                 \textcolor{keywordflow}{break};
00864                         \textcolor{keywordflow}{if}( uiCommand == RPLR\_LONG )   
00865                         \{   
00866                                 \textcolor{comment}{//===== long-term index =====   }
00867                                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(0);
00868                         \}   
00869                         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (uiCommand == RPLR\_NEG || uiCommand == RPLR\_POS) 
      \textcolor{comment}{// JVT-V043    }
00870                         \{   
00871                                 \textcolor{comment}{//===== short-term index =====   }
00872                                 \textcolor{keywordtype}{int} uiAbsDiff = uiIdentifier + 1;   
00873                                 \textcolor{keywordflow}{if}( uiCommand == RPLR\_NEG )
00874                                         uiAbsDiff = -uiAbsDiff;
00875                                 uiPicNumPred += uiAbsDiff;   
00876                                 uiPicNumPred &= sps.\hyperlink{struct_sequence_parameters_set_afedac9d01de6ec718715ab45c63ee999}{nFramesM1};
00877                                 uiIdentifier = uiPicNumPred;   
00878 
00879                                 \textcolor{comment}{//----- get frame -----   }
00880                                 \textcolor{keywordtype}{int} ft = -1;
00881                                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}();
       ++x)
00882                                         \textcolor{keywordflow}{if} (slidingWindow.\hyperlink{class_sliding_window_a020d2c25f1bda31337f91bf9b1a809d1}{GetSliceParameters}(ref\_
      frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][x], sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId})->\hyperlink{struct_slice_parameters_a20319af06c76e833936a009f3c38d4ef}{frameNum} == uiIdentifier)
00883                                         \{
00884                                                 ft = ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][x];
00885                                                 \textcolor{keywordflow}{break};
00886                                         \}
00887                                         \textcolor{keywordflow}{if} (ft < 0)
00888                                         \{
00889                                                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(0);
00890                                         \}
00891                                         \textcolor{keywordtype}{int} p = -1;
00892                                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = uiIndex; x < list0.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); +
      +x)
00893                                                 \textcolor{keywordflow}{if} (list0[x].first == ft && list0
      [x].second == sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId})
00894                                                 \{
00895                                                         list0.\hyperlink{class_array_list_a18695cf2c26e9c6ef585ec77afc19fc6}{erase}(x);
00896                                                         \textcolor{keywordflow}{break};
00897                                                 \}
00898                                                 list0.\hyperlink{class_array_list_addb12a5554260fa1f386160ce8534db0}{insert}(uiIndex, \hyperlink{_pair_8h_a76ecd40e2cff7790abf204644d74645e}{makePair}(ft
      , sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}));
00899                                                 uiIndex++;   
00900                         \} \textcolor{comment}{// short-term   }
00901                         \textcolor{keywordflow}{else} \textcolor{comment}{// 4 or 5   }
00902                         \{   
00903                                 \hyperlink{_types_8h_a943a9a9a987cd1f4d16d71dd0ae23721}{UInt} uiAbsDiff = uiIdentifier + 1;   
00904                                 \textcolor{comment}{// JVT-W066   }
00905                                 \hyperlink{_types_8h_a943a9a9a987cd1f4d16d71dd0ae23721}{UInt} uiMaxRef;
00906                                 \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_af8a7ea94e92b177c38277af8b827eb62}{isAnchor})
00907                                         uiMaxRef = sps.\hyperlink{struct_sequence_parameters_set_ae9b6a7d85da9fec255cca59c3d750ecd}{anchorRefsList0}[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}]
      .\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}();
00908                                 \textcolor{keywordflow}{else}
00909                                         uiMaxRef = sps.\hyperlink{struct_sequence_parameters_set_ab9b078b23e746ef60f7697896b963b93}{nonAnchorRefsList0}[sp.
      \hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}();
00910 
00911                                 \textcolor{keywordflow}{if}( uiCommand == RPLR\_VIEW\_NEG )   
00912                                         uiAbsDiff = uiMaxRef - uiAbsDiff;
00913                                 uiPicViewIdx +=   uiAbsDiff;   
00914                                 \textcolor{keywordflow}{if}( uiPicViewIdx >= uiMaxRef )   
00915                                         uiPicViewIdx -= uiMaxRef;
00916                                 \textcolor{comment}{// JVT-W066   }
00917                                 uiIdentifier = uiPicViewIdx;    
00918 
00919 
00920                                 \textcolor{keywordtype}{int} targetViewId;
00921                                 \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_af8a7ea94e92b177c38277af8b827eb62}{isAnchor})
00922                                         targetViewId = sps.\hyperlink{struct_sequence_parameters_set_ae9b6a7d85da9fec255cca59c3d750ecd}{anchorRefsList0}[sp.
      \hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][uiIdentifier];
00923                                 \textcolor{keywordflow}{else}
00924                                         targetViewId = sps.\hyperlink{struct_sequence_parameters_set_ab9b078b23e746ef60f7697896b963b93}{nonAnchorRefsList0}[sp.
      \hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][uiIdentifier];
00925 
00926                                 \textcolor{comment}{//----- find picture in reference list -----   }
00927                                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < list0.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); ++x)
00928                                         \textcolor{keywordflow}{if} (list0[x].first == sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} && list0[
      x].second == targetViewId)
00929                                         \{   
00930                                                 list0.\hyperlink{class_array_list_a18695cf2c26e9c6ef585ec77afc19fc6}{erase}(x);
00931                                                 \textcolor{keywordflow}{break};
00932                                         \}  
00933                                         list0.\hyperlink{class_array_list_addb12a5554260fa1f386160ce8534db0}{insert}(uiIndex, \hyperlink{_pair_8h_a76ecd40e2cff7790abf204644d74645e}{makePair}(sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId},
       targetViewId));
00934 
00935                                         uiIndex++;   
00936                         \} \textcolor{comment}{// inter-view    }
00937                 \} \textcolor{comment}{// while   }
00938         \}
00939         \textcolor{keywordflow}{if} (ref\_pic\_list\_reordering\_flag1)
00940         \{
00941                 \textcolor{keywordtype}{int}  uiPicNumPred    = sp.\hyperlink{struct_slice_parameters_a20319af06c76e833936a009f3c38d4ef}{frameNum};
00942                 \textcolor{keywordtype}{int}  uiIndex         = 0;   
00943                 \textcolor{keywordtype}{int}  uiCommand       = 0;   
00944                 \textcolor{keywordtype}{int}  uiIdentifier    = 0;   
00945                 \textcolor{comment}{// JVT-V043   }
00946                 \hyperlink{_types_8h_a943a9a9a987cd1f4d16d71dd0ae23721}{UInt}  uiPicViewIdx    = -1;   
00947                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < reo1.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); ++i)
00948                 \{   
00949                         uiCommand = reo1[i].first;
00950                         uiIdentifier = reo1[i].second - 1;
00951                         \textcolor{keywordflow}{if} (uiCommand == 3)
00952                                 \textcolor{keywordflow}{break};
00953                         \textcolor{keywordflow}{if}( uiCommand == RPLR\_LONG )   
00954                         \{   
00955                                 \textcolor{comment}{//===== long-term index =====   }
00956                                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(0);
00957                         \}   
00958                         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (uiCommand == RPLR\_NEG || uiCommand == RPLR\_POS) 
      \textcolor{comment}{// JVT-V043    }
00959                         \{   
00960                                 \textcolor{comment}{//===== short-term index =====   }
00961                                 \textcolor{keywordtype}{int} uiAbsDiff = uiIdentifier + 1;   
00962                                 \textcolor{keywordflow}{if}( uiCommand == RPLR\_NEG )
00963                                         uiAbsDiff = -uiAbsDiff;
00964                                 uiPicNumPred += uiAbsDiff;   
00965                                 uiPicNumPred &= sps.\hyperlink{struct_sequence_parameters_set_afedac9d01de6ec718715ab45c63ee999}{nFramesM1};
00966                                 uiIdentifier = uiPicNumPred;   
00967 
00968                                 \textcolor{comment}{//----- get frame -----   }
00969                                 \textcolor{keywordtype}{int} ft = -1;
00970                                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}();
       ++x)
00971                                         \textcolor{keywordflow}{if} (slidingWindow.\hyperlink{class_sliding_window_a020d2c25f1bda31337f91bf9b1a809d1}{GetSliceParameters}(ref\_
      frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][x], sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId})->\hyperlink{struct_slice_parameters_a20319af06c76e833936a009f3c38d4ef}{frameNum} == uiIdentifier)
00972                                         \{
00973                                                 ft = ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][x];
00974                                                 \textcolor{keywordflow}{break};
00975                                         \}
00976                                         \textcolor{keywordflow}{if} (ft < 0)
00977                                         \{
00978                                                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(0);
00979                                         \}
00980                                         \textcolor{keywordtype}{int} p = -1;
00981                                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = uiIndex; x < list1.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); +
      +x)
00982                                                 \textcolor{keywordflow}{if} (list1[x].first == ft && list1
      [x].second == sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId})
00983                                                 \{
00984                                                         list1.\hyperlink{class_array_list_a18695cf2c26e9c6ef585ec77afc19fc6}{erase}(x);
00985                                                         \textcolor{keywordflow}{break};
00986                                                 \}
00987                                                 list1.\hyperlink{class_array_list_addb12a5554260fa1f386160ce8534db0}{insert}(uiIndex, \hyperlink{_pair_8h_a76ecd40e2cff7790abf204644d74645e}{makePair}(ft
      , sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}));
00988                                                 uiIndex++;   
00989                         \} \textcolor{comment}{// short-term   }
00990                         \textcolor{keywordflow}{else} \textcolor{comment}{// 4 or 5   }
00991                         \{   
00992                                 \hyperlink{_types_8h_a943a9a9a987cd1f4d16d71dd0ae23721}{UInt} uiAbsDiff = uiIdentifier + 1;   
00993                                 \textcolor{comment}{// JVT-W066   }
00994                                 \hyperlink{_types_8h_a943a9a9a987cd1f4d16d71dd0ae23721}{UInt} uiMaxRef;
00995                                 \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_af8a7ea94e92b177c38277af8b827eb62}{isAnchor})
00996                                         uiMaxRef = sps.\hyperlink{struct_sequence_parameters_set_a7b865f89c34428785081c3c4acadc965}{anchorRefsList1}[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}]
      .\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}();
00997                                 \textcolor{keywordflow}{else}
00998                                         uiMaxRef = sps.\hyperlink{struct_sequence_parameters_set_a68b7ffb23b151c53312798f7ab79a67a}{nonAnchorRefsList1}[sp.
      \hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}();
00999 
01000                                 \textcolor{keywordflow}{if}( uiCommand == RPLR\_VIEW\_NEG )   
01001                                         uiAbsDiff = uiMaxRef - uiAbsDiff;
01002                                 uiPicViewIdx +=   uiAbsDiff;   
01003                                 \textcolor{keywordflow}{if}( uiPicViewIdx >= uiMaxRef )   
01004                                         uiPicViewIdx -= uiMaxRef;
01005                                 \textcolor{comment}{// JVT-W066   }
01006                                 uiIdentifier = uiPicViewIdx;    
01007 
01008 
01009                                 \textcolor{keywordtype}{int} targetViewId;
01010                                 \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_af8a7ea94e92b177c38277af8b827eb62}{isAnchor})
01011                                         targetViewId = sps.\hyperlink{struct_sequence_parameters_set_a7b865f89c34428785081c3c4acadc965}{anchorRefsList1}[sp.
      \hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][uiIdentifier];
01012                                 \textcolor{keywordflow}{else}
01013                                         targetViewId = sps.\hyperlink{struct_sequence_parameters_set_a68b7ffb23b151c53312798f7ab79a67a}{nonAnchorRefsList1}[sp.
      \hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}][uiIdentifier];
01014 
01015                                 \textcolor{comment}{//----- find picture in reference list -----   }
01016                                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < list1.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); ++x)
01017                                         \textcolor{keywordflow}{if} (list1[x].first == sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId} && list1[
      x].second == targetViewId)
01018                                         \{   
01019                                                 list1.\hyperlink{class_array_list_a18695cf2c26e9c6ef585ec77afc19fc6}{erase}(x);
01020                                                 \textcolor{keywordflow}{break};
01021                                         \}   
01022                                         list1.\hyperlink{class_array_list_addb12a5554260fa1f386160ce8534db0}{insert}(uiIndex, \hyperlink{_pair_8h_a76ecd40e2cff7790abf204644d74645e}{makePair}(sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId},
       targetViewId));
01023 
01024                                         uiIndex++;   
01025                         \} \textcolor{comment}{// inter-view    }
01026                 \} \textcolor{comment}{// while   }
01027         \}
01028 
01029         \textcolor{keywordflow}{while} (list0.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}() > num\_ref\_idx\_l0\_active)
01030                 list0.\hyperlink{class_array_list_ad98cc674ef8dcc42f53b4836416a289c}{pop_back}();
01031         \textcolor{keywordflow}{while} (list1.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}() > num\_ref\_idx\_l1\_active)
01032                 list1.\hyperlink{class_array_list_ad98cc674ef8dcc42f53b4836416a289c}{pop_back}();
01033 
01034         \textcolor{comment}{// }
01035         \textcolor{keywordflow}{if} (nal\_ref\_idc)
01036         \{
01037                 \textcolor{keywordflow}{if} (sp.\hyperlink{struct_slice_parameters_a60f8fe21acd611ec6892e47a2c6029e3}{IDR})
01038                 \{
01039                         ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_acb53d54675318c94332d0ec8b6819eb3}{clear}();
01040                         \textcolor{keywordflow}{if} (long\_term\_reference\_flag)
01041                         \{
01042                                 \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\textcolor{keyword}{false});
01043                         \}
01044                         \textcolor{keywordflow}{else}
01045                                 ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId});
01046                 \}
01047                 \textcolor{keywordflow}{else}
01048                 \{
01049                         \textcolor{keywordflow}{if} (adaptive\_ref\_pic\_marking\_mode\_flag)\textcolor{comment}{//8.2.5.4}
01050                         \{
01051                                 ;
01052                         \}
01053                         \textcolor{keywordflow}{else}\textcolor{comment}{//8.2.5.3}
01054                         \{
01055                                 \textcolor{keywordtype}{int} tref = 0;
01056                                 \textcolor{keywordtype}{int} j = sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId};
01057                                 \textcolor{keywordflow}{if} (ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}() == sps.
      \hyperlink{struct_sequence_parameters_set_a8404973d25f8601dd012299638361f03}{numRefFrames})
01058                                         ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_a18695cf2c26e9c6ef585ec77afc19fc6}{erase}(0);
01059                         \}
01060                         \textcolor{comment}{//if (!picts[sp.timeId][sp.viewId].LongRef)}
01061                         \{
01062                                 ref\_frames[sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId}].\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId});
01063                         \}
01064                 \}
01065         \}
01066         \textcolor{keywordflow}{else} \textcolor{comment}{// 8.2.5.2}
01067         \{
01068                 \textcolor{comment}{// TODO :}
01069         \}
01070 
01071         \textcolor{keywordflow}{while} (!(slidingWindow.\hyperlink{class_sliding_window_ac50874323a2aaa4ef76fab47f80c9f92}{GetCodingPictInfo}(sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId}, sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId})))
01072                 Sleep(10);
01073 
01074         \textcolor{comment}{//printf("REF Count 0 = %d\(\backslash\)n", list0.size());}
01075         \textcolor{comment}{//for (int i = 0; i < list0.size(); ++i)}
01076         \textcolor{comment}{//\{}
01077         \textcolor{comment}{//      printf("(%d,%d),", list0[i].first, list0[i].second);}
01078         \textcolor{comment}{//\}}
01079         \textcolor{comment}{//printf("\(\backslash\)n");}
01080         \textcolor{comment}{//printf("REF Count 1 = %d\(\backslash\)n", list1.size());}
01081         \textcolor{comment}{//for (int i = 0; i < list1.size(); ++i)}
01082         \textcolor{comment}{//\{}
01083         \textcolor{comment}{//      printf("(%d,%d),", list1[i].first, list1[i].second);}
01084         \textcolor{comment}{//\}}
01085         \textcolor{comment}{//printf("\(\backslash\)n");}
01086         \hyperlink{struct_coding_pict_info}{CodingPictInfo} &info = *slidingWindow.\hyperlink{class_sliding_window_ac50874323a2aaa4ef76fab47f80c9f92}{GetCodingPictInfo}(sp.\hyperlink{struct_slice_parameters_ad6a26fe2f228235e4f0c31c336cf5e12}{timeId}, sp.
      \hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId});
01087         info.\hyperlink{struct_coding_pict_info_ab48541faa825385baeca833ffe98b3d4}{Ref_Count}[0] = list0.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}();
01088         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < list0.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); ++i)
01089         \{
01090                 info.\hyperlink{struct_coding_pict_info_a37079a7e9c26b338a6978063f471a82f}{Ref_Id}[0][i][0] = list0[i].first;
01091                 info.\hyperlink{struct_coding_pict_info_a37079a7e9c26b338a6978063f471a82f}{Ref_Id}[0][i][1] = list0[i].second;
01092                 \hyperlink{struct_coding_pict_info}{CodingPictInfo} *ref = slidingWindow.\hyperlink{class_sliding_window_ac50874323a2aaa4ef76fab47f80c9f92}{GetCodingPictInfo}(list0[i].fi
      rst, list0[i].second);
01093                 info.\hyperlink{struct_coding_pict_info_a8c8c3eeff0744de167b9ea6c5a7938a0}{ref_lumaStart}[0][i] = ref->\hyperlink{struct_coding_pict_info_a62aee8cc8c9cac725d4f44a19ddc8c2b}{lumaStart};
01094                 info.\hyperlink{struct_coding_pict_info_a48b49b89c36f39af860936fbf3a3c991}{ref_chromaUStart}[0][i] = ref->\hyperlink{struct_coding_pict_info_a103a3180ba57db0bd984a53f0668b70b}{chromaUStart};
01095                 info.\hyperlink{struct_coding_pict_info_a5c703063430f731196d3acea2926d5bd}{ref_chromaVStart}[0][i] = ref->\hyperlink{struct_coding_pict_info_a7be3395b2a1e7f4b384421c2490dcfdc}{chromaVStart};
01096                 info.\hyperlink{struct_coding_pict_info_a1c02c2f7c7a4a9fb4ed10e422d64bd32}{ref_refVec}[0][i] = ref->\hyperlink{struct_coding_pict_info_aa49520dd613a44185d6a41af8992d66c}{refVec};
01097         \}
01098         info.\hyperlink{struct_coding_pict_info_ab48541faa825385baeca833ffe98b3d4}{Ref_Count}[1] = list1.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}();
01099         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < list1.\hyperlink{class_array_list_aff9c6ac40886044e4653174950d23e74}{size}(); ++i)
01100         \{
01101                 info.\hyperlink{struct_coding_pict_info_a37079a7e9c26b338a6978063f471a82f}{Ref_Id}[1][i][0] = list1[i].first;
01102                 info.\hyperlink{struct_coding_pict_info_a37079a7e9c26b338a6978063f471a82f}{Ref_Id}[1][i][1] = list1[i].second;
01103                 \hyperlink{struct_coding_pict_info}{CodingPictInfo} *ref = slidingWindow.\hyperlink{class_sliding_window_ac50874323a2aaa4ef76fab47f80c9f92}{GetCodingPictInfo}(list1[i].fi
      rst, list1[i].second);
01104                 info.\hyperlink{struct_coding_pict_info_a8c8c3eeff0744de167b9ea6c5a7938a0}{ref_lumaStart}[1][i] = ref->\hyperlink{struct_coding_pict_info_a62aee8cc8c9cac725d4f44a19ddc8c2b}{lumaStart};
01105                 info.\hyperlink{struct_coding_pict_info_a48b49b89c36f39af860936fbf3a3c991}{ref_chromaUStart}[1][i] = ref->\hyperlink{struct_coding_pict_info_a103a3180ba57db0bd984a53f0668b70b}{chromaUStart};
01106                 info.\hyperlink{struct_coding_pict_info_a5c703063430f731196d3acea2926d5bd}{ref_chromaVStart}[1][i] = ref->\hyperlink{struct_coding_pict_info_a7be3395b2a1e7f4b384421c2490dcfdc}{chromaVStart};
01107                 info.\hyperlink{struct_coding_pict_info_a1c02c2f7c7a4a9fb4ed10e422d64bd32}{ref_refVec}[1][i] = ref->\hyperlink{struct_coding_pict_info_aa49520dd613a44185d6a41af8992d66c}{refVec};
01108         \}
01109 
01110         \textcolor{keywordflow}{return} (bs.\hyperlink{struct_bitstream_addd740548c260796cf01e55597f749c6}{tail} - bs.\hyperlink{struct_bitstream_a4c2cb09a4fee7ed90d05f8b40914911e}{start}) * 32 + bs.\hyperlink{struct_bitstream_ac7479c4c4e57d10bbfdd90baf6e731a4}{pos};
01111 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=420pt]{class_in_stream_a6369ed63c0fad1007f16e3e885825aea_cgraph}
\end{center}
\end{figure}


\hypertarget{class_in_stream_ab40abe55d480a2dc42e484a8a7eb53a4}{
\index{InStream@{InStream}!ReadSlicePrefix@{ReadSlicePrefix}}
\index{ReadSlicePrefix@{ReadSlicePrefix}!InStream@{InStream}}
\subsubsection[{ReadSlicePrefix}]{\setlength{\rightskip}{0pt plus 5cm}void InStream::ReadSlicePrefix ({\bf SliceParameters} \& {\em sp}, \/  const {\bf SequenceParametersSet} \& {\em sps})}}
\label{class_in_stream_ab40abe55d480a2dc42e484a8a7eb53a4}




\begin{footnotesize}\begin{alltt}
00550 \{
00551         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: forbidden\_zero\_bit"});
00552         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00553         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: nal\_ref\_idc"});
00554         \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(2);
00555         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: nal\_unit\_type"});
00556         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(5) == \hyperlink{_consts4_standard_8h_a0ae628337fb17a2b11855dd3524f3d04a8c5dfdeb9a126add31b57b718eb32b46}{NAL_UNIT_CODED_SLICE_PREFIX});
00557         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: svc\_mvc\_flag"});
00558         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00559         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: non\_idr\_flag"});
00560         sp.\hyperlink{struct_slice_parameters_a60f8fe21acd611ec6892e47a2c6029e3}{IDR} = (\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00561         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: priority\_id"});
00562         sp.\hyperlink{struct_slice_parameters_a82aa216a74ffaa7d1859aa1cfe135a8b}{priority_id} = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(6);
00563         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: view\_id"});
00564         sp.\hyperlink{struct_slice_parameters_ae570f1ba10b1e091c7519264534a7143}{viewId} = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(10);
00565         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: temporal\_id"});
00566         \textcolor{keywordtype}{int} temporal\_id = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(3);
00567         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: anchor\_pic\_flag"});
00568         sp.\hyperlink{struct_slice_parameters_af8a7ea94e92b177c38277af8b827eb62}{isAnchor} = (\hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(1) == 1);
00569         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: inter\_view\_flag"});
00570         \textcolor{keywordtype}{int} inter\_view = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(1);
00571         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: reserved\_zero\_one\_bit"});
00572         \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(1);
00573 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=160pt]{class_in_stream_ab40abe55d480a2dc42e484a8a7eb53a4_cgraph}
\end{center}
\end{figure}


\hypertarget{class_in_stream_abb8e8d2b7eef014e7b6285e130a19a0a}{
\index{InStream@{InStream}!ReadSubsetSequenceParameterSet@{ReadSubsetSequenceParameterSet}}
\index{ReadSubsetSequenceParameterSet@{ReadSubsetSequenceParameterSet}!InStream@{InStream}}
\subsubsection[{ReadSubsetSequenceParameterSet}]{\setlength{\rightskip}{0pt plus 5cm}void InStream::ReadSubsetSequenceParameterSet ({\bf SequenceParametersSet} \& {\em sps})}}
\label{class_in_stream_abb8e8d2b7eef014e7b6285e130a19a0a}




\begin{footnotesize}\begin{alltt}
00319 \{
00320         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: forbidden\_zero\_bit"});
00321         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00322         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: nal\_ref\_idc"});
00323         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(2) == 3);
00324         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"NALU HEADER: nal\_unit\_type"});
00325         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(5) == \hyperlink{_consts4_standard_8h_a0ae628337fb17a2b11855dd3524f3d04ac483bd065332f7337e31c959e7034e6f}{NAL_UNIT_SUBSET_SPS});
00326 
00327         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: profile\_idc"});
00328         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(8) == \hyperlink{_consts4_standard_8h_a85b10143618f300ff4f5bc6d45c72c01ae06b14698b010f54b54227d57c5bc275}{MULTI_VIEW_PROFILE});
00329         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: constrained\_set0\_flag"});
00330         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00331         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: constrained\_set1\_flag"});
00332         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00333         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: constrained\_set2\_flag"});
00334         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00335         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: constrained\_set3\_flag"});
00336         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00337         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: constrained\_set4\_flag"});
00338         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00339         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: constrained\_set5\_flag"});
00340         \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00341         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: reserved\_zero\_2bits"});
00342         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(2) == 0);
00343         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: level\_idc"});
00344         \textcolor{keywordtype}{int} level\_idc = \hyperlink{class_in_stream_a07d84696f5dd53b6bbc881dc7507de4c}{ReadCode}(8);
00345         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(level\_idc==13 || level\_idc==31 || level\_idc==30 || level\_idc==21);
      
00346         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: seq\_parameter\_set\_id"});
00347         \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00348 
00349         \textcolor{keywordflow}{if} (sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 100 || 
00350                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 110 || 
00351                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 122 || 
00352                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 244 || 
00353                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 44 || 
00354                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 83 || 
00355                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 86 || 
00356                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 118 ||
00357                 sps.\hyperlink{struct_sequence_parameters_set_a53070cb0140d170507760e8422f2ef74}{profileIdc} == 128
00358                 ) \{
00359                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"--- fidelity range extension syntax ---"});
00360                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"ReadFrext"});
00361                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: chroma\_format\_idc"});
00362                         \textcolor{comment}{//sps.chromaFormatIdc = ReadUvlc();}
00363                         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() == 1); \textcolor{comment}{// 4:2:0 chroma\_format\_idc=1}
00364                         \textcolor{comment}{//chroma\_format\_idc 6.2 chroma\_form
      at\_idc 0}
00365                         \textcolor{comment}{//303chroma\_format\_idc1420
      }
00366                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: bit\_depth\_luma\_minus8"});
00367                         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() == 0); \textcolor{comment}{// BitDepthY = 8 + bit\_depth\_lum
      a\_minus8,  QpBdOffsetY = 6 * bit\_depth\_luma\_minus8 bit\_depth\_luma\_minus8=0}
00368                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: bit\_depth\_chroma\_minus8"});
00369                         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() == 0); \textcolor{comment}{// BitDepthC = 8 + bit\_depth\_chr
      oma\_minus8,  QpBdOffsetC = 6 * ( bit\_depth\_chroma\_minus8 + residual\_colour\_transf
      orm\_flag) bit\_depth\_chroma\_minus8=0}
00370                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: qpprime\_y\_zero\_transform\_bypass\_flag"});
00371                         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);\textcolor{comment}{//qpprime\_y\_zero\_transform\_bypass
      \_flag = 0}
00372                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: seq\_scaling\_matrix\_present\_flag"});
00373                         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);\textcolor{comment}{//seq\_scaling\_matrix\_present\_flag
      =0}
00374         \}
00375 
00376         \textcolor{keywordtype}{int} log2nFramesM4 = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00377         sps.\hyperlink{struct_sequence_parameters_set_ac5f0d82a961acfe4f966e7c35aa37339}{log2nFrames} = log2nFramesM4 + 4;
00378         sps.\hyperlink{struct_sequence_parameters_set_afedac9d01de6ec718715ab45c63ee999}{nFramesM1} = (1<<sps.\hyperlink{struct_sequence_parameters_set_ac5f0d82a961acfe4f966e7c35aa37339}{log2nFrames})-1;
00379 
00380         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: pic\_order\_cnt\_type"});
00381         \textcolor{keywordtype}{int} picOrderCntType = 0;
00382         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() == picOrderCntType);
00383         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: log2\_max\_pic\_order\_cnt\_lsb\_minus4"});
00384         \textcolor{keywordtype}{int} log2nPocM4 = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00385         sps.\hyperlink{struct_sequence_parameters_set_aff653fc637f7290b7edbaf1cfeacd6ca}{log2nPoc} = log2nPocM4 + 4;
00386         sps.\hyperlink{struct_sequence_parameters_set_a786d1401a47490d15c7f1512e21994ce}{nPocM1} = (1<<sps.\hyperlink{struct_sequence_parameters_set_aff653fc637f7290b7edbaf1cfeacd6ca}{log2nPoc}) - 1;
00387 
00388         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: num\_ref\_frames"});
00389         \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00390         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: required\_frame\_num\_update\_behaviour\_flag"});
00391         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 1);
00392 
00393         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: pic\_width\_in\_mbs\_minus\_1"});
00394         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() == (sps.\hyperlink{struct_sequence_parameters_set_a72286e512a40a01670e2519b3971cee2}{width}>>4)-1);
00395         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: pic\_height\_in\_mbs\_units\_minus\_1"});
00396         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() == (sps.\hyperlink{struct_sequence_parameters_set_ab3b7bd818f9a0d1456d92496473a42eb}{height}>>4) - 1);
00397         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: frame\_mbs\_only\_flag"});
00398         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 1);
00399         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: direct\_8x8\_inference\_flag"});
00400         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 1);
00401         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: frame\_cropping\_flag"});
00402         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00403         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: vui\_parameters\_present\_flag"});
00404         sps.\hyperlink{struct_sequence_parameters_set_a557345c281f445eb71cbcd5d72a9aed0}{vui_parameters_present} = \hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}();
00405         \textcolor{keywordflow}{if} (sps.\hyperlink{struct_sequence_parameters_set_a557345c281f445eb71cbcd5d72a9aed0}{vui_parameters_present})
00406         \{
00407                 readVuiParameters(sps.\hyperlink{struct_sequence_parameters_set_ac473de5b97f08fefdbe39fe9c2c2c846}{vuiparams});
00408         \}
00409 
00410         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SUBSET SPS: bit\_equal\_to\_one"});
00411         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 1);
00412 
00413         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: num\_views\_minus\_1"});
00414         sps.\hyperlink{struct_sequence_parameters_set_af32c7819f630856ccd99aaf78e8f656c}{viewCount} = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() + 1;
00415 
00416         sps.\hyperlink{struct_sequence_parameters_set_a082e13208bc0afd9377676e156e750b4}{viewCodingOrder}.\hyperlink{class_array_list_acb53d54675318c94332d0ec8b6819eb3}{clear}();
00417         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < sps.\hyperlink{struct_sequence_parameters_set_af32c7819f630856ccd99aaf78e8f656c}{viewCount}; ++i)
00418         \{
00419                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: view\_id[i]"});
00420                 sps.\hyperlink{struct_sequence_parameters_set_a082e13208bc0afd9377676e156e750b4}{viewCodingOrder}.\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}());
00421         \}
00422 
00423         sps.\hyperlink{struct_sequence_parameters_set_ae9b6a7d85da9fec255cca59c3d750ecd}{anchorRefsList0}.\hyperlink{class_array_list_acb53d54675318c94332d0ec8b6819eb3}{clear}();
00424         \hyperlink{class_array_list}{ArrayList<int>} tmp;
00425         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < sps.\hyperlink{struct_sequence_parameters_set_af32c7819f630856ccd99aaf78e8f656c}{viewCount}; ++i)
00426         \{
00427                 sps.\hyperlink{struct_sequence_parameters_set_ae9b6a7d85da9fec255cca59c3d750ecd}{anchorRefsList0}.\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(tmp);
00428         \}
00429         sps.\hyperlink{struct_sequence_parameters_set_a7b865f89c34428785081c3c4acadc965}{anchorRefsList1} = sps.\hyperlink{struct_sequence_parameters_set_ae9b6a7d85da9fec255cca59c3d750ecd}{anchorRefsList0};
00430         sps.\hyperlink{struct_sequence_parameters_set_ab9b078b23e746ef60f7697896b963b93}{nonAnchorRefsList0} = sps.\hyperlink{struct_sequence_parameters_set_ae9b6a7d85da9fec255cca59c3d750ecd}{anchorRefsList0};
00431         sps.\hyperlink{struct_sequence_parameters_set_a68b7ffb23b151c53312798f7ab79a67a}{nonAnchorRefsList1} = sps.\hyperlink{struct_sequence_parameters_set_ae9b6a7d85da9fec255cca59c3d750ecd}{anchorRefsList0};
00432         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < sps.\hyperlink{struct_sequence_parameters_set_af32c7819f630856ccd99aaf78e8f656c}{viewCount}; ++i)
00433         \{
00434                 \textcolor{keywordtype}{int} coding = sps.\hyperlink{struct_sequence_parameters_set_a082e13208bc0afd9377676e156e750b4}{viewCodingOrder}[i];
00435                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: num\_anchor\_refs\_l0[i]"});
00436                 \textcolor{keywordtype}{int} nAnchorRefs = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00437                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < nAnchorRefs; ++j)
00438                 \{
00439                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: anchor\_ref\_l0[i][j]"});
00440                         \textcolor{keywordtype}{int} refv = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00441                         sps.\hyperlink{struct_sequence_parameters_set_ae9b6a7d85da9fec255cca59c3d750ecd}{anchorRefsList0}[coding].\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(refv);
00442                 \}
00443 
00444                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: num\_anchor\_refs\_l1[i]"});
00445                 nAnchorRefs = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00446                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < nAnchorRefs; ++j)
00447                 \{
00448                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: anchor\_ref\_l1[i][j]"});
00449                         \textcolor{keywordtype}{int} refv = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00450                         sps.\hyperlink{struct_sequence_parameters_set_a7b865f89c34428785081c3c4acadc965}{anchorRefsList1}[coding].\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(refv);
00451                 \}
00452         \}
00453 
00454         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 1; i < sps.\hyperlink{struct_sequence_parameters_set_af32c7819f630856ccd99aaf78e8f656c}{viewCount}; ++i)
00455         \{
00456                 \textcolor{keywordtype}{int} coding = sps.\hyperlink{struct_sequence_parameters_set_a082e13208bc0afd9377676e156e750b4}{viewCodingOrder}[i];
00457                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: num\_non\_anchor\_refs\_l0[i]"});
00458                 \textcolor{keywordtype}{int} nAnchorRefs = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00459                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < nAnchorRefs; ++j)
00460                 \{
00461                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: non\_anchor\_ref\_l0[i][j]"});
00462                         \textcolor{keywordtype}{int} refv = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00463                         sps.\hyperlink{struct_sequence_parameters_set_ab9b078b23e746ef60f7697896b963b93}{nonAnchorRefsList0}[coding].\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(refv);
00464                 \}
00465 
00466                 \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: num\_non\_anchor\_refs\_l1[i]"});
00467                 nAnchorRefs = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00468                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < nAnchorRefs; ++j)
00469                 \{
00470                         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: non\_anchor\_ref\_l1[i][j]"});
00471                         \textcolor{keywordtype}{int} refv = \hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}();
00472                         sps.\hyperlink{struct_sequence_parameters_set_a68b7ffb23b151c53312798f7ab79a67a}{nonAnchorRefsList1}[coding].\hyperlink{class_array_list_a7b5376678a9b5af0e0ed913fbe04b902}{push_back}(refv);
00473                 \}
00474         \}
00475 
00476         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SPS: num\_level\_values\_signalled"});
00477         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{ReadUvlc}() == 0);
00478 
00479 \textcolor{comment}{/*}
00480 \textcolor{comment}{        ASSERT(ReadCode(8) == 0);}
00481 \textcolor{comment}{        ASSERT(ReadUvlc() == 0);}
00482 \textcolor{comment}{        ASSERT(ReadCode(3) == 0);}
00483 \textcolor{comment}{        ASSERT(ReadUvlc() == 0);}
00484 \textcolor{comment}{        ASSERT(ReadUvlc() == 0);}
00485 \textcolor{comment}{        ASSERT(ReadUvlc() == 0);}
00486 \textcolor{comment}{*/}
00487 
00488         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SUBSET SPS: mvc\_vui\_parameters\_present\_flag"});
00489         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00490         \hyperlink{class_in_stream_acab96485c6978e95e5ef747ebedf09d6}{Comment}(\textcolor{stringliteral}{"SUBSET SPS: Additional\_extension2\_flag"});
00491         \hyperlink{_debug_8h_a101586fab2b90a8adffe50a3550e235d}{ASSERT}(\hyperlink{class_in_stream_a340f8fadf6dfc7d17236b15285bba96f}{ReadFlag}() == 0);
00492 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=204pt]{class_in_stream_abb8e8d2b7eef014e7b6285e130a19a0a_cgraph}
\end{center}
\end{figure}


\hypertarget{class_in_stream_accc880522e6e43bd3a46297988de1c47}{
\index{InStream@{InStream}!ReadSvlc@{ReadSvlc}}
\index{ReadSvlc@{ReadSvlc}!InStream@{InStream}}
\subsubsection[{ReadSvlc}]{\setlength{\rightskip}{0pt plus 5cm}{\bf int32\_\-t} InStream::ReadSvlc ()}}
\label{class_in_stream_accc880522e6e43bd3a46297988de1c47}




\begin{footnotesize}\begin{alltt}
00051 \{
00052         \hyperlink{_types_8h_a115ba3a1b24a8702355c5dbd61ce01e0}{int32_t} svlc = eg\_read\_se(&bs);
00053         \textcolor{comment}{//printf("Svlc %d\(\backslash\)n", svlc);}
00054         \textcolor{keywordflow}{return} svlc;
00055 \}
\end{alltt}\end{footnotesize}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=179pt]{class_in_stream_accc880522e6e43bd3a46297988de1c47_icgraph}
\end{center}
\end{figure}


\hypertarget{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}{
\index{InStream@{InStream}!ReadUvlc@{ReadUvlc}}
\index{ReadUvlc@{ReadUvlc}!InStream@{InStream}}
\subsubsection[{ReadUvlc}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint32\_\-t} InStream::ReadUvlc ()}}
\label{class_in_stream_a8e8daf92cb96e583662cafdaf211093c}




\begin{footnotesize}\begin{alltt}
00044 \{
00045         \hyperlink{_types_8h_a04909d1366bb244ff2482beb51635f37}{uint32_t} uvlc = \hyperlink{_bitstream_8h_acad61027e3182912d2b9d95180d45250}{eg_read_ue}(&bs);
00046         \textcolor{comment}{//printf("Uvlc %d\(\backslash\)n", uvlc);}
00047         \textcolor{keywordflow}{return} uvlc;
00048 \}
\end{alltt}\end{footnotesize}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=200pt]{class_in_stream_a8e8daf92cb96e583662cafdaf211093c_icgraph}
\end{center}
\end{figure}


\hypertarget{class_in_stream_a700d52a510354fcf7787b118dbeb406f}{
\index{InStream@{InStream}!ResetBitstream@{ResetBitstream}}
\index{ResetBitstream@{ResetBitstream}!InStream@{InStream}}
\subsubsection[{ResetBitstream}]{\setlength{\rightskip}{0pt plus 5cm}void InStream::ResetBitstream ()}}
\label{class_in_stream_a700d52a510354fcf7787b118dbeb406f}




\begin{footnotesize}\begin{alltt}
00063 \{
00064         BitstreamReset(&bs);
00065 \}
\end{alltt}\end{footnotesize}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=162pt]{class_in_stream_a700d52a510354fcf7787b118dbeb406f_icgraph}
\end{center}
\end{figure}




The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
MVCDecoder/Stream/\hyperlink{_in_stream_8h}{InStream.h}\item 
MVCDecoder/Stream/\hyperlink{_in_stream_8cpp}{InStream.cpp}\end{DoxyCompactItemize}
