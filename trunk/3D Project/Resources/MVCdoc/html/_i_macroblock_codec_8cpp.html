<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MVC: MVCDecoder/Codec/IFrame/IMacroblockCodec.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MVCDecoder/Codec/IFrame/IMacroblockCodec.cpp File Reference</h1><code>#include &quot;<a class="el" href="_i_macroblock_codec_8cpp.html">IMacroblockCodec.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_common_8h_source.html">Common.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_d_c_t_transform_8h_source.html">Codec/DCTTransform.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_quantisation_8h_source.html">Codec/Quantisation.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_scanner_8h_source.html">Codec/Scanner.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_i_predict_8h_source.html">Codec/IFrame/IPredict.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_consts4_standard_8h_source.html">Codec/Consts4Standard.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for IMacroblockCodec.cpp:</div>
<div class="dynsection">
<div class="center"><img src="_i_macroblock_codec_8cpp__incl.png" border="0" usemap="#_m_v_c_decoder_2_codec_2_i_frame_2_i_macroblock_codec_8cpp_map" alt=""/></div>
<map name="_m_v_c_decoder_2_codec_2_i_frame_2_i_macroblock_codec_8cpp_map" id="_m_v_c_decoder_2_codec_2_i_frame_2_i_macroblock_codec_8cpp">
<area shape="rect" id="node4" href="_common_8h.html" title="Common.h" alt="" coords="312,160,397,190"/><area shape="rect" id="node15" href="_d_c_t_transform_8h.html" title="Codec/DCTTransform.h" alt="" coords="24,83,178,112"/><area shape="rect" id="node18" href="_quantisation_8h.html" title="Codec/Quantisation.h" alt="" coords="202,83,349,112"/><area shape="rect" id="node21" href="_scanner_8h.html" title="Codec/Scanner.h" alt="" coords="373,83,496,112"/><area shape="rect" id="node24" href="_i_predict_8h.html" title="Codec/IFrame/IPredict.h" alt="" coords="520,83,682,112"/><area shape="rect" id="node27" href="_consts4_standard_8h.html" title="Codec/Consts4Standard.h" alt="" coords="706,83,880,112"/><area shape="rect" id="node13" href="_types_8h.html" title="Types.h" alt="" coords="453,238,520,267"/></map>
</div>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<div class="center"><img src="_i_macroblock_codec_8cpp__dep__incl.png" border="0" usemap="#_m_v_c_decoder_2_codec_2_i_frame_2_i_macroblock_codec_8cppdep_map" alt=""/></div>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_macroblock_codec_8cpp.html#a3bb69edd67d7438ffa2148822898e335">macroblockIntraDecode_y</a> (<a class="el" href="structmacroblockdata.html">pmacroblockdata</a> dt, int Qp, <a class="el" href="structpredict_info.html">predictInfo</a> *pinfo, <a class="el" href="structmacroblock_info.html">pmacroblockInfo</a> mlist)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_macroblock_codec_8cpp.html#a0d5a08323fa05b03ffbebb448898663e">macroblockIntraDecode_uv</a> (<a class="el" href="structmacroblockdata.html">pmacroblockdata</a> dt, int Qp_uv, <a class="el" href="structpredict_info.html">predictInfo</a> *pinfo, <a class="el" href="structmacroblock_info.html">pmacroblockInfo</a> mlist)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_macroblock_codec_8cpp.html#acaa2acf29de1293461dea9f2882931c5">macroblockIntraDecode</a> (<a class="el" href="structmacroblockdata.html">pmacroblockdata</a> dt, int Qp_y, int Qp_uv, <a class="el" href="structmacroblock_info.html">pmacroblockInfo</a> rst, <a class="el" href="structpredict_info.html">predictInfo</a> *plist)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_macroblock_codec_8cpp.html#ae22bb3624a8e7a421b4e8008720d67a5">LUMA_INDEX</a> [16] = {0, 1, 4, 5, 2, 3, 6, 7, 8, 9, 12, 13, 10, 11, 14, 15}</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_i_macroblock_codec_8cpp.html#a12d5120842ae04b4f2743ad6b5fc6f74">LUMA_INDEX_INV</a> [16] = {0, 1, 4, 5, 2, 3, 6, 7, 8, 9, 12, 13, 10, 11, 14, 15}</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="acaa2acf29de1293461dea9f2882931c5"></a><!-- doxytag: member="IMacroblockCodec.cpp::macroblockIntraDecode" ref="acaa2acf29de1293461dea9f2882931c5" args="(pmacroblockdata dt, int Qp_y, int Qp_uv, pmacroblockInfo rst, predictInfo *plist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macroblockIntraDecode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmacroblockdata.html">pmacroblockdata</a>&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>Qp_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>Qp_uv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmacroblock_info.html">pmacroblockInfo</a>&nbsp;</td>
          <td class="paramname"> <em>rst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpredict_info.html">predictInfo</a> *&nbsp;</td>
          <td class="paramname"> <em>plist</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00294"></a>00294 {
<a name="l00295"></a>00295         <a class="code" href="_i_macroblock_codec_8cpp.html#a3bb69edd67d7438ffa2148822898e335">macroblockIntraDecode_y</a>(dt, Qp_y, plist, rst);
<a name="l00296"></a>00296         <a class="code" href="_i_macroblock_codec_8cpp.html#a0d5a08323fa05b03ffbebb448898663e">macroblockIntraDecode_uv</a>(dt, Qp_uv, plist, rst);
<a name="l00297"></a>00297 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_i_macroblock_codec_8cpp_acaa2acf29de1293461dea9f2882931c5_cgraph.png" border="0" usemap="#_i_macroblock_codec_8cpp_acaa2acf29de1293461dea9f2882931c5_cgraph_map" alt=""></div>
<map name="_i_macroblock_codec_8cpp_acaa2acf29de1293461dea9f2882931c5_cgraph_map" id="_i_macroblock_codec_8cpp_acaa2acf29de1293461dea9f2882931c5_cgraph">
<area shape="rect" id="node3" href="_i_macroblock_codec_8cpp.html#a0d5a08323fa05b03ffbebb448898663e" title="macroblockIntraDecode_uv" alt="" coords="215,192,391,221"/><area shape="rect" id="node19" href="_i_macroblock_codec_8cpp.html#a3bb69edd67d7438ffa2148822898e335" title="macroblockIntraDecode_y" alt="" coords="217,432,388,461"/><area shape="rect" id="node5" href="_i_predict_8cpp.html#a0988f72eec8591d5de83982c52e2b539" title="do_8x8_chroma_prediction" alt="" coords="441,112,617,141"/><area shape="rect" id="node7" href="_d_c_t_transform_8cpp.html#ada208d2366935100bdc2375bec45cc8f" title="idct2x2dc_c" alt="" coords="484,165,575,195"/><area shape="rect" id="node9" href="_d_c_t_transform_8cpp.html#a923ec91bf45c73e8baaf4e1bbad9a289" title="idct4x4_c" alt="" coords="491,219,568,248"/><area shape="rect" id="node11" href="_quantisation_8cpp.html#ad8c9813079b1dac9e7c7ab3d40a9a212" title="iquant2x2dc_c" alt="" coords="476,5,583,35"/><area shape="rect" id="node13" href="_quantisation_8cpp.html#a5985492c5cf012e5d7051f11fa86821c" title="iquant4x4_c" alt="" coords="484,272,575,301"/><area shape="rect" id="node15" href="_scanner_8h.html#aaa0324e6a8196220003838250cc45e75" title="unscan_zig_2x2" alt="" coords="472,59,587,88"/><area shape="rect" id="node17" href="_scanner_8h.html#a368d4bb8bcbc27ebecc3939c468dbcff" title="unscan_zig_4x4" alt="" coords="472,325,587,355"/><area shape="rect" id="node21" href="_i_predict_8cpp.html#a90c2994887c21abf5825c0262aa283c5" title="do_16x16_luma_prediction" alt="" coords="441,379,617,408"/><area shape="rect" id="node23" href="_i_predict_8cpp.html#acc4ad7a1035118020f7e66044e323e45" title="do_4x4_luma_prediction" alt="" coords="448,432,611,461"/><area shape="rect" id="node25" href="_i_predict_8cpp.html#a9076d5f73e7c0a6665e6e69eeaae6b10" title="do_8x8_luma_prediction" alt="" coords="448,485,611,515"/><area shape="rect" id="node28" href="_d_c_t_transform_8cpp.html#ac50d1e85c45ad67944176f8ce8219dba" title="idct4x4dc_c" alt="" coords="484,539,575,568"/><area shape="rect" id="node30" href="_d_c_t_transform_8cpp.html#aab666ffcda45ced06a5b5853c52c94bf" title="idct8x8" alt="" coords="497,592,561,621"/><area shape="rect" id="node33" href="_quantisation_8cpp.html#a480f9f1c650257964853863d5683ed34" title="iquant4x4dc_c" alt="" coords="476,645,583,675"/><area shape="rect" id="node35" href="_quantisation_8cpp.html#a6096528e049a8f3c2a463926db773e42" title="iquant8x8_c" alt="" coords="484,699,575,728"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_i_macroblock_codec_8cpp_acaa2acf29de1293461dea9f2882931c5_icgraph.png" border="0" usemap="#_i_macroblock_codec_8cpp_acaa2acf29de1293461dea9f2882931c5_icgraph_map" alt=""></div>
<map name="_i_macroblock_codec_8cpp_acaa2acf29de1293461dea9f2882931c5_icgraph_map" id="_i_macroblock_codec_8cpp_acaa2acf29de1293461dea9f2882931c5_icgraph">
<area shape="rect" id="node3" href="_i_slice_8h.html#a23c43acab8cba26c6a4938028715f817" title="process_data_decode_I" alt="" coords="215,32,372,61"/><area shape="rect" id="node5" href="_i_slice_8cpp.html#a582f95d234a6f0902b8df497f3712c01" title="macroblock_processor_I" alt="" coords="429,5,592,35"/><area shape="rect" id="node13" href="_p_slice_8cpp.html#a18283e001efb21359ea20ded9bc27eff" title="macroblock_processor_PB" alt="" coords="421,59,600,88"/><area shape="rect" id="node7" href="_i_slice_8h.html#a3d8b6dcdaff59baf9c7b27ae426f0a5a" title="ISliceDecode" alt="" coords="651,5,749,35"/><area shape="rect" id="node9" href="decodeframe__i_8cpp.html#ad773df895663c88740670e8e13891c1f" title="DoProcessDI" alt="" coords="803,5,901,35"/><area shape="rect" id="node11" href="decodeframe__i_8cpp.html#ab7628a5173510caf4fce82bfba6b4a40" title="decodeframe_i" alt="" coords="955,5,1061,35"/><area shape="rect" id="node15" href="_p_slice_8h.html#a08458d29753b64df9de1d40b748fdf0b" title="PSliceDecode" alt="" coords="648,59,752,88"/><area shape="rect" id="node17" href="decodeframe__b_8cpp.html#a01538ccadc6514406416e19a6ebae001" title="DoProcessDB" alt="" coords="800,59,904,88"/><area shape="rect" id="node21" href="decodeframe__p_8cpp.html#a49c748890470e9cac9c8f01ad19d562c" title="DoProcessDP" alt="" coords="800,112,904,141"/><area shape="rect" id="node19" href="decodeframe__b_8cpp.html#a501cfeae2c764e7998e9c9f2240748bd" title="decodeframe_b" alt="" coords="953,59,1063,88"/><area shape="rect" id="node23" href="decodeframe__p_8cpp.html#a7f615124f132ce807e3850fff0997a9a" title="decodeframe_p" alt="" coords="953,112,1063,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0d5a08323fa05b03ffbebb448898663e"></a><!-- doxytag: member="IMacroblockCodec.cpp::macroblockIntraDecode_uv" ref="a0d5a08323fa05b03ffbebb448898663e" args="(pmacroblockdata dt, int Qp_uv, predictInfo *pinfo, pmacroblockInfo mlist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macroblockIntraDecode_uv </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmacroblockdata.html">pmacroblockdata</a>&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>Qp_uv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpredict_info.html">predictInfo</a> *&nbsp;</td>
          <td class="paramname"> <em>pinfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmacroblock_info.html">pmacroblockInfo</a>&nbsp;</td>
          <td class="paramname"> <em>mlist</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00257"></a>00257 {
<a name="l00258"></a>00258         <a class="code" href="_types_8h.html#ae615613535a2b2445773922f5d45a861">int16_t</a> udct[4][4][4];
<a name="l00259"></a>00259         <a class="code" href="_types_8h.html#ae615613535a2b2445773922f5d45a861">int16_t</a> udct_h[2][2];
<a name="l00260"></a>00260 
<a name="l00261"></a>00261         <a class="code" href="structmacroblockdata.html">macroblockdata</a> pred;
<a name="l00262"></a>00262         memset(&amp;pred, 0, <span class="keyword">sizeof</span>(pred));
<a name="l00263"></a>00263         <a class="code" href="_i_predict_8cpp.html#a0988f72eec8591d5de83982c52e2b539">do_8x8_chroma_prediction</a>(pinfo-&gt;<a class="code" href="structpredict_info.html#a4bb62e14becc6e2eeac45bc8d6a66688">data_u</a>, pred.<a class="code" href="structmacroblockdata.html#a07e17343606921d436bfddef89d0d93f">uv</a>[0], mlist-&gt;<a class="code" href="structmacroblock_info.html#a562426f4ab2f9cd93c95cff91faaa0f6">mode_uv</a>);
<a name="l00264"></a>00264         <a class="code" href="_i_predict_8cpp.html#a0988f72eec8591d5de83982c52e2b539">do_8x8_chroma_prediction</a>(pinfo-&gt;<a class="code" href="structpredict_info.html#ad302972bab20c3c3c87ce4a25efd17a3">data_v</a>, pred.<a class="code" href="structmacroblockdata.html#a07e17343606921d436bfddef89d0d93f">uv</a>[1], mlist-&gt;<a class="code" href="structmacroblock_info.html#a562426f4ab2f9cd93c95cff91faaa0f6">mode_uv</a>);
<a name="l00265"></a>00265         <span class="keywordtype">int</span> l, i, j, k;
<a name="l00266"></a>00266         <span class="keywordtype">int</span> x, y;
<a name="l00267"></a>00267         <span class="keywordflow">for</span>(l = 0 ; l &lt; 2 ; l ++)
<a name="l00268"></a>00268         {
<a name="l00269"></a>00269                 <span class="keywordflow">for</span>(i = 0 ; i &lt; 4 ; i ++)
<a name="l00270"></a>00270                         <a class="code" href="_scanner_8h.html#a368d4bb8bcbc27ebecc3939c468dbcff">unscan_zig_4x4</a>(mlist-&gt;<a class="code" href="structmacroblock_info.html#a01c5c766f5445434369110a34cd1594e">dct_uv_z</a>[l][i], udct[i][0]);
<a name="l00271"></a>00271                 <a class="code" href="_scanner_8h.html#aaa0324e6a8196220003838250cc45e75">unscan_zig_2x2</a>(mlist-&gt;<a class="code" href="structmacroblock_info.html#a973346c837d8cf284586c33b4a4d478a">dct_uv_h</a>[l], udct_h[0]);
<a name="l00272"></a>00272                 
<a name="l00273"></a>00273                 <a class="code" href="_quantisation_8cpp.html#ad8c9813079b1dac9e7c7ab3d40a9a212">iquant2x2dc_c</a>(udct_h, Qp_uv);
<a name="l00274"></a>00274                 <a class="code" href="_d_c_t_transform_8cpp.html#ada208d2366935100bdc2375bec45cc8f">idct2x2dc_c</a>(udct_h);
<a name="l00275"></a>00275                 
<a name="l00276"></a>00276                 <span class="keywordflow">for</span>(i = 0 ; i &lt; 4 ; i ++)
<a name="l00277"></a>00277                 {
<a name="l00278"></a>00278                         <a class="code" href="_quantisation_8cpp.html#a5985492c5cf012e5d7051f11fa86821c">iquant4x4_c</a>(udct[i], Qp_uv);
<a name="l00279"></a>00279                         x = i&gt;&gt;1, y = i&amp;1;
<a name="l00280"></a>00280                         udct[i][0][0] = udct_h[x][y];
<a name="l00281"></a>00281                         x &lt;&lt;= 2; y &lt;&lt;= 2;
<a name="l00282"></a>00282                         <a class="code" href="_d_c_t_transform_8cpp.html#a923ec91bf45c73e8baaf4e1bbad9a289">idct4x4_c</a>(udct[i]);
<a name="l00283"></a>00283                         <span class="keywordflow">for</span> (j = 0; j &lt; 4; ++j)
<a name="l00284"></a>00284                                 <span class="keywordflow">for</span> (k = 0; k &lt; 4; ++k)
<a name="l00285"></a>00285                                 {
<a name="l00286"></a>00286                                         <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> v = pred.<a class="code" href="structmacroblockdata.html#a07e17343606921d436bfddef89d0d93f">uv</a>[l][x|j][y|k] + (<a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>)udct[i][j][k];
<a name="l00287"></a>00287                                         dt-&gt;<a class="code" href="structmacroblockdata.html#a07e17343606921d436bfddef89d0d93f">uv</a>[l][x|j][y|k] = <a class="code" href="_macros_8h.html#adf6642a5f8ea4af79e646df542b2ee06">CLIP1</a>(v);
<a name="l00288"></a>00288                                 }
<a name="l00289"></a>00289                 }
<a name="l00290"></a>00290         }
<a name="l00291"></a>00291 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_i_macroblock_codec_8cpp_a0d5a08323fa05b03ffbebb448898663e_cgraph.png" border="0" usemap="#_i_macroblock_codec_8cpp_a0d5a08323fa05b03ffbebb448898663e_cgraph_map" alt=""></div>
<map name="_i_macroblock_codec_8cpp_a0d5a08323fa05b03ffbebb448898663e_cgraph_map" id="_i_macroblock_codec_8cpp_a0d5a08323fa05b03ffbebb448898663e_cgraph">
<area shape="rect" id="node3" href="_i_predict_8cpp.html#a0988f72eec8591d5de83982c52e2b539" title="do_8x8_chroma_prediction" alt="" coords="233,5,409,35"/><area shape="rect" id="node5" href="_d_c_t_transform_8cpp.html#ada208d2366935100bdc2375bec45cc8f" title="idct2x2dc_c" alt="" coords="276,59,367,88"/><area shape="rect" id="node7" href="_d_c_t_transform_8cpp.html#a923ec91bf45c73e8baaf4e1bbad9a289" title="idct4x4_c" alt="" coords="283,112,360,141"/><area shape="rect" id="node9" href="_quantisation_8cpp.html#ad8c9813079b1dac9e7c7ab3d40a9a212" title="iquant2x2dc_c" alt="" coords="268,165,375,195"/><area shape="rect" id="node11" href="_quantisation_8cpp.html#a5985492c5cf012e5d7051f11fa86821c" title="iquant4x4_c" alt="" coords="276,219,367,248"/><area shape="rect" id="node13" href="_scanner_8h.html#aaa0324e6a8196220003838250cc45e75" title="unscan_zig_2x2" alt="" coords="264,272,379,301"/><area shape="rect" id="node15" href="_scanner_8h.html#a368d4bb8bcbc27ebecc3939c468dbcff" title="unscan_zig_4x4" alt="" coords="264,325,379,355"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_i_macroblock_codec_8cpp_a0d5a08323fa05b03ffbebb448898663e_icgraph.png" border="0" usemap="#_i_macroblock_codec_8cpp_a0d5a08323fa05b03ffbebb448898663e_icgraph_map" alt=""></div>
<map name="_i_macroblock_codec_8cpp_a0d5a08323fa05b03ffbebb448898663e_icgraph_map" id="_i_macroblock_codec_8cpp_a0d5a08323fa05b03ffbebb448898663e_icgraph">
<area shape="rect" id="node3" href="_i_macroblock_codec_8h.html#acaa2acf29de1293461dea9f2882931c5" title="macroblockIntraDecode" alt="" coords="233,32,391,61"/><area shape="rect" id="node5" href="_i_slice_8h.html#a23c43acab8cba26c6a4938028715f817" title="process_data_decode_I" alt="" coords="441,32,599,61"/><area shape="rect" id="node7" href="_i_slice_8cpp.html#a582f95d234a6f0902b8df497f3712c01" title="macroblock_processor_I" alt="" coords="656,5,819,35"/><area shape="rect" id="node15" href="_p_slice_8cpp.html#a18283e001efb21359ea20ded9bc27eff" title="macroblock_processor_PB" alt="" coords="648,59,827,88"/><area shape="rect" id="node9" href="_i_slice_8h.html#a3d8b6dcdaff59baf9c7b27ae426f0a5a" title="ISliceDecode" alt="" coords="877,5,976,35"/><area shape="rect" id="node11" href="decodeframe__i_8cpp.html#ad773df895663c88740670e8e13891c1f" title="DoProcessDI" alt="" coords="1029,5,1128,35"/><area shape="rect" id="node13" href="decodeframe__i_8cpp.html#ab7628a5173510caf4fce82bfba6b4a40" title="decodeframe_i" alt="" coords="1181,5,1288,35"/><area shape="rect" id="node17" href="_p_slice_8h.html#a08458d29753b64df9de1d40b748fdf0b" title="PSliceDecode" alt="" coords="875,59,979,88"/><area shape="rect" id="node19" href="decodeframe__b_8cpp.html#a01538ccadc6514406416e19a6ebae001" title="DoProcessDB" alt="" coords="1027,59,1131,88"/><area shape="rect" id="node23" href="decodeframe__p_8cpp.html#a49c748890470e9cac9c8f01ad19d562c" title="DoProcessDP" alt="" coords="1027,112,1131,141"/><area shape="rect" id="node21" href="decodeframe__b_8cpp.html#a501cfeae2c764e7998e9c9f2240748bd" title="decodeframe_b" alt="" coords="1180,59,1289,88"/><area shape="rect" id="node25" href="decodeframe__p_8cpp.html#a7f615124f132ce807e3850fff0997a9a" title="decodeframe_p" alt="" coords="1180,112,1289,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3bb69edd67d7438ffa2148822898e335"></a><!-- doxytag: member="IMacroblockCodec.cpp::macroblockIntraDecode_y" ref="a3bb69edd67d7438ffa2148822898e335" args="(pmacroblockdata dt, int Qp, predictInfo *pinfo, pmacroblockInfo mlist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void macroblockIntraDecode_y </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmacroblockdata.html">pmacroblockdata</a>&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>Qp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpredict_info.html">predictInfo</a> *&nbsp;</td>
          <td class="paramname"> <em>pinfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmacroblock_info.html">pmacroblockInfo</a>&nbsp;</td>
          <td class="paramname"> <em>mlist</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00024"></a>00024 {
<a name="l00025"></a>00025         <a class="code" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> dct[16][4][4];
<a name="l00026"></a>00026         <a class="code" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> dct_h[4][4];
<a name="l00027"></a>00027 
<a name="l00028"></a>00028         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 16; ++i)
<a name="l00029"></a>00029                 <a class="code" href="_scanner_8h.html#a368d4bb8bcbc27ebecc3939c468dbcff">unscan_zig_4x4</a>(mlist-&gt;<a class="code" href="structmacroblock_info.html#ae8398ee14b29db905e426da03b462417">dct_y_z</a>[i], dct[i][0]);
<a name="l00030"></a>00030         <span class="keywordflow">if</span> (mlist-&gt;<a class="code" href="structmacroblock_info.html#a6bb816cb458ac9c8f908c3f0464cd8ee">mode_I</a>==<a class="code" href="_consts4_standard_8h.html#abed82baf7f470b522273a3e37c24c600a5fc00bf550c7dd0aa35fe3c7fe664ff6">I_16x16</a>)
<a name="l00031"></a>00031         {
<a name="l00032"></a>00032                 <a class="code" href="_scanner_8h.html#a368d4bb8bcbc27ebecc3939c468dbcff">unscan_zig_4x4</a>(mlist-&gt;<a class="code" href="structmacroblock_info.html#a60437cc69d5df6184a6b768ff667a70f">dct_y_h</a>, dct_h[0]);
<a name="l00033"></a>00033                 <a class="code" href="_quantisation_8cpp.html#a480f9f1c650257964853863d5683ed34">iquant4x4dc_c</a>(dct_h, Qp);
<a name="l00034"></a>00034                 <a class="code" href="_d_c_t_transform_8cpp.html#ac50d1e85c45ad67944176f8ce8219dba">idct4x4dc_c</a>(dct_h);
<a name="l00035"></a>00035         }
<a name="l00036"></a>00036         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 16; ++i)
<a name="l00037"></a>00037         {
<a name="l00038"></a>00038                 <a class="code" href="_quantisation_8cpp.html#a5985492c5cf012e5d7051f11fa86821c">iquant4x4_c</a>(dct[i], Qp);
<a name="l00039"></a>00039                 <span class="keywordflow">if</span> (mlist-&gt;<a class="code" href="structmacroblock_info.html#a6bb816cb458ac9c8f908c3f0464cd8ee">mode_I</a>==<a class="code" href="_consts4_standard_8h.html#abed82baf7f470b522273a3e37c24c600a5fc00bf550c7dd0aa35fe3c7fe664ff6">I_16x16</a>)
<a name="l00040"></a>00040                         dct[i][0][0] = dct_h[0][i];
<a name="l00041"></a>00041         }
<a name="l00042"></a>00042         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 16; ++i)
<a name="l00043"></a>00043         {
<a name="l00044"></a>00044                 <a class="code" href="_d_c_t_transform_8cpp.html#a923ec91bf45c73e8baaf4e1bbad9a289">idct4x4_c</a>(dct[i]);
<a name="l00045"></a>00045         }
<a name="l00046"></a>00046 
<a name="l00047"></a>00047         <a class="code" href="structmacroblockdata.html">macroblockdata</a> pred;
<a name="l00048"></a>00048         memset(&amp;pred, 0, <span class="keyword">sizeof</span>(pred));
<a name="l00049"></a>00049         <a class="code" href="_types_8h.html#a363e4d606232036a6b89060813c45489">uint8_t</a> top[24], left[16], topleft;
<a name="l00050"></a>00050         <span class="keywordflow">if</span> (mlist-&gt;<a class="code" href="structmacroblock_info.html#a6bb816cb458ac9c8f908c3f0464cd8ee">mode_I</a> == <a class="code" href="_consts4_standard_8h.html#abed82baf7f470b522273a3e37c24c600a5fc00bf550c7dd0aa35fe3c7fe664ff6">I_16x16</a>)
<a name="l00051"></a>00051         {
<a name="l00052"></a>00052                 <a class="code" href="_i_predict_8cpp.html#a90c2994887c21abf5825c0262aa283c5">do_16x16_luma_prediction</a>(pinfo, pred.<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>, mlist-&gt;<a class="code" href="structmacroblock_info.html#a56fac1ac121007a216cd538adc034a16">mode_i16x16</a>);
<a name="l00053"></a>00053                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 16; ++i)
<a name="l00054"></a>00054                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 16; ++j)
<a name="l00055"></a>00055                         {
<a name="l00056"></a>00056                                 <span class="keywordtype">int</span> v = (pred.<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[i][j] + dct[i/4*4+j/4][i%4][j%4]);
<a name="l00057"></a>00057                                 dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[i][j] = <a class="code" href="_macros_8h.html#adf6642a5f8ea4af79e646df542b2ee06">CLIP1</a>(v);
<a name="l00058"></a>00058                         }
<a name="l00059"></a>00059         }
<a name="l00060"></a>00060         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mlist-&gt;<a class="code" href="structmacroblock_info.html#a0f244dcaf8b80e1f8adc3973e34e0a25">transform8x8</a>)<span class="comment">//mlist-&gt;mode_I == I_8x8) // )//</span>
<a name="l00061"></a>00061         {
<a name="l00062"></a>00062                 <span class="keyword">const</span> <a class="code" href="_types_8h.html#ac7cdb549645a4e51f5efa2fca122cc60">UChar</a> <a class="code" href="_p_b_macroblock_codec_8cpp.html#a1826216a962c3c8d20e6a32f7423ee05">g_aucFrameScan64</a>[64] =
<a name="l00063"></a>00063                 {
<a name="l00064"></a>00064                         0,  1,  8, 16,  9,  2,  3, 10,
<a name="l00065"></a>00065                         17, 24, 32, 25, 18, 11,  4,  5,
<a name="l00066"></a>00066                         12, 19, 26, 33, 40, 48, 41, 34,
<a name="l00067"></a>00067                         27, 20, 13,  6,  7, 14, 21, 28,
<a name="l00068"></a>00068                         35, 42, 49, 56, 57, 50, 43, 36,
<a name="l00069"></a>00069                         29, 22, 15, 23, 30, 37, 44, 51,
<a name="l00070"></a>00070                         58, 59, 52, 45, 38, 31, 39, 46,
<a name="l00071"></a>00071                         53, 60, 61, 54, 47, 55, 62, 63
<a name="l00072"></a>00072                 };
<a name="l00073"></a>00073                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i)
<a name="l00074"></a>00074                 {
<a name="l00075"></a>00075                         <a class="code" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> *tmp = dct[i*4][0];
<a name="l00076"></a>00076                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 4; ++j)
<a name="l00077"></a>00077                         {
<a name="l00078"></a>00078                                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 16; ++k)
<a name="l00079"></a>00079                                         tmp[g_aucFrameScan64[k*4+j]] = mlist-&gt;<a class="code" href="structmacroblock_info.html#ae8398ee14b29db905e426da03b462417">dct_y_z</a>[<a class="code" href="_i_macroblock_codec_8cpp.html#ae22bb3624a8e7a421b4e8008720d67a5">LUMA_INDEX</a>[i*4+j]][k];
<a name="l00080"></a>00080                         }
<a name="l00081"></a>00081                         <a class="code" href="_quantisation_8cpp.html#a6096528e049a8f3c2a463926db773e42">iquant8x8_c</a>(dct[i*4][0], Qp);
<a name="l00082"></a>00082                         <a class="code" href="_d_c_t_transform_8cpp.html#aab666ffcda45ced06a5b5853c52c94bf">idct8x8</a>(dct[i*4][0]);
<a name="l00083"></a>00083                 }
<a name="l00084"></a>00084                 <a class="code" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> *dct8 = dct[0][0];
<a name="l00085"></a>00085 
<a name="l00086"></a>00086                 memcpy(top, pinfo-&gt;<a class="code" href="structpredict_info.html#ab44f7aab3b6e76f7be44d5420f5f4407">top</a>, 24);
<a name="l00087"></a>00087                 memcpy(left, pinfo-&gt;<a class="code" href="structpredict_info.html#aaec86d32b8769dabe17f60051a792e19">left</a>, 8);
<a name="l00088"></a>00088                 topleft = pinfo-&gt;<a class="code" href="structpredict_info.html#a2f363beeef9ca2f90a0db2259fc88f7b">topleft</a>;
<a name="l00089"></a>00089                 <span class="keywordflow">if</span> (mlist-&gt;<a class="code" href="structmacroblock_info.html#a088e83914a079456b10a7f6db04dfc46">mode_i4x4</a>[0]==2)
<a name="l00090"></a>00090                 {
<a name="l00091"></a>00091                         <span class="keywordflow">if</span> (!pinfo-&gt;<a class="code" href="structpredict_info.html#a63e51107c5058064b6e8bc3fd6a08b46">hasTop</a> &amp;&amp; !pinfo-&gt;<a class="code" href="structpredict_info.html#abe5b70fdeb86bc2d99d9c3e65250fa8e">hasLeft</a>)
<a name="l00092"></a>00092                                 mlist-&gt;<a class="code" href="structmacroblock_info.html#a088e83914a079456b10a7f6db04dfc46">mode_i4x4</a>[0] = 23;
<a name="l00093"></a>00093                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!pinfo-&gt;<a class="code" href="structpredict_info.html#abe5b70fdeb86bc2d99d9c3e65250fa8e">hasLeft</a>)
<a name="l00094"></a>00094                                 mlist-&gt;<a class="code" href="structmacroblock_info.html#a088e83914a079456b10a7f6db04dfc46">mode_i4x4</a>[0] = 21;
<a name="l00095"></a>00095                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!pinfo-&gt;<a class="code" href="structpredict_info.html#a63e51107c5058064b6e8bc3fd6a08b46">hasTop</a>)
<a name="l00096"></a>00096                                 mlist-&gt;<a class="code" href="structmacroblock_info.html#a088e83914a079456b10a7f6db04dfc46">mode_i4x4</a>[0] = 22;
<a name="l00097"></a>00097                 }
<a name="l00098"></a>00098                 <a class="code" href="_i_predict_8h.html#a8fffa1f1faa3bee7fe022a135a996676">out_8x8_luma_prediction</a> pred8;
<a name="l00099"></a>00099                 <a class="code" href="_i_predict_8cpp.html#a9076d5f73e7c0a6665e6e69eeaae6b10">do_8x8_luma_prediction</a>(top, left, topleft, pred8, mlist-&gt;<a class="code" href="structmacroblock_info.html#a088e83914a079456b10a7f6db04dfc46">mode_i4x4</a>[0]);
<a name="l00100"></a>00100                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 8; ++i)
<a name="l00101"></a>00101                 {
<a name="l00102"></a>00102                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 8; ++j)
<a name="l00103"></a>00103                         {
<a name="l00104"></a>00104                                 <span class="keywordtype">int</span> v = (pred8[i][j] + dct8[i*8+j]);
<a name="l00105"></a>00105                                 dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[i][j] = <a class="code" href="_macros_8h.html#adf6642a5f8ea4af79e646df542b2ee06">CLIP1</a>(v);
<a name="l00106"></a>00106                         }
<a name="l00107"></a>00107                 }
<a name="l00108"></a>00108 
<a name="l00109"></a>00109                 dct8 += 64;
<a name="l00110"></a>00110                 memcpy(top, pinfo-&gt;<a class="code" href="structpredict_info.html#ab44f7aab3b6e76f7be44d5420f5f4407">top</a>+8, 16);
<a name="l00111"></a>00111                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 8; ++i)
<a name="l00112"></a>00112                         top[i+16] = top[15];
<a name="l00113"></a>00113                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 8; ++i)
<a name="l00114"></a>00114                         left[i] = dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[i][7];
<a name="l00115"></a>00115                 if (pinfo-&gt;<a class="code" href="structpredict_info.html#a63e51107c5058064b6e8bc3fd6a08b46">hasTop</a>)
<a name="l00116"></a>00116                         topleft = pinfo-&gt;<a class="code" href="structpredict_info.html#ab44f7aab3b6e76f7be44d5420f5f4407">top</a>[7];
<a name="l00117"></a>00117                 <span class="keywordflow">else</span>
<a name="l00118"></a>00118                         topleft = left[0];
<a name="l00119"></a>00119                 <span class="keywordflow">if</span> (mlist-&gt;<a class="code" href="structmacroblock_info.html#a088e83914a079456b10a7f6db04dfc46">mode_i4x4</a>[2]==2)
<a name="l00120"></a>00120                 {
<a name="l00121"></a>00121                         <span class="keywordflow">if</span> (!pinfo-&gt;<a class="code" href="structpredict_info.html#a63e51107c5058064b6e8bc3fd6a08b46">hasTop</a>)
<a name="l00122"></a>00122                                 mlist-&gt;<a class="code" href="structmacroblock_info.html#a088e83914a079456b10a7f6db04dfc46">mode_i4x4</a>[2] = 22;
<a name="l00123"></a>00123                 }
<a name="l00124"></a>00124                 <a class="code" href="_i_predict_8cpp.html#a9076d5f73e7c0a6665e6e69eeaae6b10">do_8x8_luma_prediction</a>(top, left, topleft, pred8, mlist-&gt;<a class="code" href="structmacroblock_info.html#a088e83914a079456b10a7f6db04dfc46">mode_i4x4</a>[2]);
<a name="l00125"></a>00125                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 8; ++i)
<a name="l00126"></a>00126                 {
<a name="l00127"></a>00127                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 8; ++j)
<a name="l00128"></a>00128                         {
<a name="l00129"></a>00129                                 <span class="keywordtype">int</span> v = (pred8[i][j] + dct8[i*8+j]);
<a name="l00130"></a>00130                                 dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[i][j+8] = <a class="code" href="_macros_8h.html#adf6642a5f8ea4af79e646df542b2ee06">CLIP1</a>(v);
<a name="l00131"></a>00131                         }
<a name="l00132"></a>00132                 }
<a name="l00133"></a>00133 
<a name="l00134"></a>00134                 dct8 += 64;
<a name="l00135"></a>00135                 memcpy(top, dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[7], 16);
<a name="l00136"></a>00136                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 8; ++i)
<a name="l00137"></a>00137                         top[i+16] = top[15];
<a name="l00138"></a>00138                 memcpy(left, pinfo-&gt;<a class="code" href="structpredict_info.html#aaec86d32b8769dabe17f60051a792e19">left</a>+8, 8);
<a name="l00139"></a>00139                 <span class="keywordflow">if</span> (!pinfo-&gt;<a class="code" href="structpredict_info.html#abe5b70fdeb86bc2d99d9c3e65250fa8e">hasLeft</a>)
<a name="l00140"></a>00140                         topleft = top[0];
<a name="l00141"></a>00141                 <span class="keywordflow">else</span>
<a name="l00142"></a>00142                         topleft = pinfo-&gt;<a class="code" href="structpredict_info.html#aaec86d32b8769dabe17f60051a792e19">left</a>[7];
<a name="l00143"></a>00143                 <span class="keywordflow">if</span> (mlist-&gt;<a class="code" href="structmacroblock_info.html#a088e83914a079456b10a7f6db04dfc46">mode_i4x4</a>[8]==2)
<a name="l00144"></a>00144                 {
<a name="l00145"></a>00145                         <span class="keywordflow">if</span> (!pinfo-&gt;<a class="code" href="structpredict_info.html#abe5b70fdeb86bc2d99d9c3e65250fa8e">hasLeft</a>)
<a name="l00146"></a>00146                                 mlist-&gt;<a class="code" href="structmacroblock_info.html#a088e83914a079456b10a7f6db04dfc46">mode_i4x4</a>[8] = 21;
<a name="l00147"></a>00147                 }
<a name="l00148"></a>00148                 <a class="code" href="_i_predict_8cpp.html#a9076d5f73e7c0a6665e6e69eeaae6b10">do_8x8_luma_prediction</a>(top, left, topleft, pred8, mlist-&gt;<a class="code" href="structmacroblock_info.html#a088e83914a079456b10a7f6db04dfc46">mode_i4x4</a>[8]);
<a name="l00149"></a>00149                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 8; ++i)
<a name="l00150"></a>00150                 {
<a name="l00151"></a>00151                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 8; ++j)
<a name="l00152"></a>00152                         {
<a name="l00153"></a>00153                                 <span class="keywordtype">int</span> v = (pred8[i][j] + dct8[i*8+j]);
<a name="l00154"></a>00154                                 dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[i+8][j] = <a class="code" href="_macros_8h.html#adf6642a5f8ea4af79e646df542b2ee06">CLIP1</a>(v);
<a name="l00155"></a>00155                         }
<a name="l00156"></a>00156                 }
<a name="l00157"></a>00157 
<a name="l00158"></a>00158                 dct8 += 64;
<a name="l00159"></a>00159                 memcpy(top, dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[7]+8, 8);
<a name="l00160"></a>00160                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 16; ++i)
<a name="l00161"></a>00161                         top[i+8] = top[7];
<a name="l00162"></a>00162                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 8; ++i)
<a name="l00163"></a>00163                         left[i] = dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[i+8][7];
<a name="l00164"></a>00164                 topleft = dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[7][7];
<a name="l00165"></a>00165                 <a class="code" href="_i_predict_8cpp.html#a9076d5f73e7c0a6665e6e69eeaae6b10">do_8x8_luma_prediction</a>(top, left, topleft, pred8, mlist-&gt;<a class="code" href="structmacroblock_info.html#a088e83914a079456b10a7f6db04dfc46">mode_i4x4</a>[10]);
<a name="l00166"></a>00166                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 8; ++i)
<a name="l00167"></a>00167                 {
<a name="l00168"></a>00168                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 8; ++j)
<a name="l00169"></a>00169                         {
<a name="l00170"></a>00170                                 <span class="keywordtype">int</span> v = (pred8[i][j] + dct8[i*8+j]);
<a name="l00171"></a>00171                                 dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[i+8][j+8] = <a class="code" href="_macros_8h.html#adf6642a5f8ea4af79e646df542b2ee06">CLIP1</a>(v);
<a name="l00172"></a>00172                         }
<a name="l00173"></a>00173                 }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175         }
<a name="l00176"></a>00176         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mlist-&gt;<a class="code" href="structmacroblock_info.html#a6bb816cb458ac9c8f908c3f0464cd8ee">mode_I</a> == <a class="code" href="_consts4_standard_8h.html#abed82baf7f470b522273a3e37c24c600af6e415e1d5e44181c2ba7131f203b694">I_4x4</a>)
<a name="l00177"></a>00177         {
<a name="l00178"></a>00178                 <a class="code" href="_i_predict_8h.html#ad13e421d5c8f05855f5e73faad950492">out_4x4_luma_prediction</a> pred4;
<a name="l00179"></a>00179                 <a class="code" href="_i_predict_8h.html#ac6170ef868fb47b246dc17d9767c6b7e">info_4x4_luma_prediction</a> ind;
<a name="l00180"></a>00180                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = 0; idx &lt; 16; ++idx)
<a name="l00181"></a>00181                 {
<a name="l00182"></a>00182                         <span class="keywordtype">int</span> x = (idx &gt;&gt; 2) * 4, y = (idx &amp; 3) * 4;
<a name="l00183"></a>00183                         <span class="keywordflow">if</span> (x==0)
<a name="l00184"></a>00184                         {
<a name="l00185"></a>00185                                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 8; ++j)
<a name="l00186"></a>00186                                         ind[j] = pinfo-&gt;<a class="code" href="structpredict_info.html#ab44f7aab3b6e76f7be44d5420f5f4407">top</a>[j+y];
<a name="l00187"></a>00187                                 if ((x&amp;4)&amp;&amp;(y&amp;4) || (x &amp;&amp; y==12))
<a name="l00188"></a>00188                                 {
<a name="l00189"></a>00189                                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 4; j &lt; 8; ++j)
<a name="l00190"></a>00190                                                 ind[j] = ind[3];
<a name="l00191"></a>00191                                 }
<a name="l00192"></a>00192                         }
<a name="l00193"></a>00193                         <span class="keywordflow">else</span>
<a name="l00194"></a>00194                         {
<a name="l00195"></a>00195                                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 4; ++j)
<a name="l00196"></a>00196                                         ind[j] = dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[x-1][y+j];
<a name="l00197"></a>00197                                 if ((y &lt; 12) &amp;&amp; ((y!=4) || (x==8))) <span class="comment">// Why</span>
<a name="l00198"></a>00198                                 {
<a name="l00199"></a>00199                                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 4; j &lt; 8; ++j)
<a name="l00200"></a>00200                                                 ind[j] = dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[x-1][y+j];
<a name="l00201"></a>00201                                 }
<a name="l00202"></a>00202                                 <span class="keywordflow">else</span>
<a name="l00203"></a>00203                                 {
<a name="l00204"></a>00204                                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 4; j &lt; 8; ++j)
<a name="l00205"></a>00205                                                 ind[j] = ind[3];
<a name="l00206"></a>00206                                 }
<a name="l00207"></a>00207                         }
<a name="l00208"></a>00208                         <span class="keywordflow">if</span> (y==0)
<a name="l00209"></a>00209                         {
<a name="l00210"></a>00210                                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 4; ++j)
<a name="l00211"></a>00211                                         ind[8+j] = pinfo-&gt;<a class="code" href="structpredict_info.html#aaec86d32b8769dabe17f60051a792e19">left</a>[x + j];
<a name="l00212"></a>00212                         }
<a name="l00213"></a>00213                         <span class="keywordflow">else</span>
<a name="l00214"></a>00214                         {
<a name="l00215"></a>00215                                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 4; ++j)
<a name="l00216"></a>00216                                         ind[8+j] = dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[x+j][y-1];
<a name="l00217"></a>00217                         }
<a name="l00218"></a>00218                         <span class="keywordflow">if</span> (x==0 &amp;&amp; y==0)
<a name="l00219"></a>00219                         {
<a name="l00220"></a>00220                                 ind[12] = pinfo-&gt;<a class="code" href="structpredict_info.html#a2f363beeef9ca2f90a0db2259fc88f7b">topleft</a>;
<a name="l00221"></a>00221                         }
<a name="l00222"></a>00222                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x==0)
<a name="l00223"></a>00223                         {
<a name="l00224"></a>00224                                 ind[12] = pinfo-&gt;<a class="code" href="structpredict_info.html#ab44f7aab3b6e76f7be44d5420f5f4407">top</a>[y-1];
<a name="l00225"></a>00225                         }
<a name="l00226"></a>00226                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (y==0)
<a name="l00227"></a>00227                         {
<a name="l00228"></a>00228                                 ind[12] = pinfo-&gt;<a class="code" href="structpredict_info.html#aaec86d32b8769dabe17f60051a792e19">left</a>[x - 1];
<a name="l00229"></a>00229                         }
<a name="l00230"></a>00230                         <span class="keywordflow">else</span>
<a name="l00231"></a>00231                                 ind[12] = dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[x-1][y-1];
<a name="l00232"></a>00232                         <span class="keywordtype">bool</span> hasTop = x || (pinfo-&gt;<a class="code" href="structpredict_info.html#a63e51107c5058064b6e8bc3fd6a08b46">hasTop</a>),
<a name="l00233"></a>00233                                 hasLeft = y || (pinfo-&gt;<a class="code" href="structpredict_info.html#abe5b70fdeb86bc2d99d9c3e65250fa8e">hasLeft</a>);
<a name="l00234"></a>00234                         <span class="keywordtype">int</span> mode = mlist-&gt;<a class="code" href="structmacroblock_info.html#a088e83914a079456b10a7f6db04dfc46">mode_i4x4</a>[idx];
<a name="l00235"></a>00235                         <span class="keywordflow">if</span> (mode == 2)
<a name="l00236"></a>00236                         {
<a name="l00237"></a>00237                                 <span class="keywordflow">if</span> (!hasTop &amp;&amp; !hasLeft)
<a name="l00238"></a>00238                                         mode = 23;
<a name="l00239"></a>00239                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!hasTop)
<a name="l00240"></a>00240                                         mode = 22;
<a name="l00241"></a>00241                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!hasLeft)
<a name="l00242"></a>00242                                         mode = 21;
<a name="l00243"></a>00243                         }
<a name="l00244"></a>00244                         <a class="code" href="_i_predict_8cpp.html#acc4ad7a1035118020f7e66044e323e45">do_4x4_luma_prediction</a>(ind, pred4, mode);
<a name="l00245"></a>00245                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> xx = 0; xx &lt; 4; ++xx)
<a name="l00246"></a>00246                                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> yy = 0; yy &lt; 4; ++yy)
<a name="l00247"></a>00247                                 {
<a name="l00248"></a>00248                                         <span class="keywordtype">int</span> v = (pred4[xx][yy] + dct[idx][xx][yy]);
<a name="l00249"></a>00249                                         dt-&gt;<a class="code" href="structmacroblockdata.html#ac3e45382bf0c21b9714fe7d8e9e1a12d">y</a>[x+xx][y+yy] = <a class="code" href="_macros_8h.html#adf6642a5f8ea4af79e646df542b2ee06">CLIP1</a>(v);
<a name="l00250"></a>00250                                 }
<a name="l00251"></a>00251                 }
<a name="l00252"></a>00252         }
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_i_macroblock_codec_8cpp_a3bb69edd67d7438ffa2148822898e335_cgraph.png" border="0" usemap="#_i_macroblock_codec_8cpp_a3bb69edd67d7438ffa2148822898e335_cgraph_map" alt=""></div>
<map name="_i_macroblock_codec_8cpp_a3bb69edd67d7438ffa2148822898e335_cgraph_map" id="_i_macroblock_codec_8cpp_a3bb69edd67d7438ffa2148822898e335_cgraph">
<area shape="rect" id="node3" href="_i_predict_8cpp.html#a90c2994887c21abf5825c0262aa283c5" title="do_16x16_luma_prediction" alt="" coords="227,5,403,35"/><area shape="rect" id="node5" href="_i_predict_8cpp.html#acc4ad7a1035118020f7e66044e323e45" title="do_4x4_luma_prediction" alt="" coords="233,59,396,88"/><area shape="rect" id="node7" href="_i_predict_8cpp.html#a9076d5f73e7c0a6665e6e69eeaae6b10" title="do_8x8_luma_prediction" alt="" coords="233,112,396,141"/><area shape="rect" id="node9" href="_d_c_t_transform_8cpp.html#a923ec91bf45c73e8baaf4e1bbad9a289" title="idct4x4_c" alt="" coords="276,165,353,195"/><area shape="rect" id="node11" href="_d_c_t_transform_8cpp.html#ac50d1e85c45ad67944176f8ce8219dba" title="idct4x4dc_c" alt="" coords="269,219,360,248"/><area shape="rect" id="node13" href="_d_c_t_transform_8cpp.html#aab666ffcda45ced06a5b5853c52c94bf" title="idct8x8" alt="" coords="283,272,347,301"/><area shape="rect" id="node15" href="_quantisation_8cpp.html#a5985492c5cf012e5d7051f11fa86821c" title="iquant4x4_c" alt="" coords="269,325,360,355"/><area shape="rect" id="node17" href="_quantisation_8cpp.html#a480f9f1c650257964853863d5683ed34" title="iquant4x4dc_c" alt="" coords="261,379,368,408"/><area shape="rect" id="node19" href="_quantisation_8cpp.html#a6096528e049a8f3c2a463926db773e42" title="iquant8x8_c" alt="" coords="269,432,360,461"/><area shape="rect" id="node21" href="_scanner_8h.html#a368d4bb8bcbc27ebecc3939c468dbcff" title="unscan_zig_4x4" alt="" coords="257,485,372,515"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_i_macroblock_codec_8cpp_a3bb69edd67d7438ffa2148822898e335_icgraph.png" border="0" usemap="#_i_macroblock_codec_8cpp_a3bb69edd67d7438ffa2148822898e335_icgraph_map" alt=""></div>
<map name="_i_macroblock_codec_8cpp_a3bb69edd67d7438ffa2148822898e335_icgraph_map" id="_i_macroblock_codec_8cpp_a3bb69edd67d7438ffa2148822898e335_icgraph">
<area shape="rect" id="node3" href="_i_macroblock_codec_8h.html#acaa2acf29de1293461dea9f2882931c5" title="macroblockIntraDecode" alt="" coords="228,32,385,61"/><area shape="rect" id="node5" href="_i_slice_8h.html#a23c43acab8cba26c6a4938028715f817" title="process_data_decode_I" alt="" coords="436,32,593,61"/><area shape="rect" id="node7" href="_i_slice_8cpp.html#a582f95d234a6f0902b8df497f3712c01" title="macroblock_processor_I" alt="" coords="651,5,813,35"/><area shape="rect" id="node15" href="_p_slice_8cpp.html#a18283e001efb21359ea20ded9bc27eff" title="macroblock_processor_PB" alt="" coords="643,59,821,88"/><area shape="rect" id="node9" href="_i_slice_8h.html#a3d8b6dcdaff59baf9c7b27ae426f0a5a" title="ISliceDecode" alt="" coords="872,5,971,35"/><area shape="rect" id="node11" href="decodeframe__i_8cpp.html#ad773df895663c88740670e8e13891c1f" title="DoProcessDI" alt="" coords="1024,5,1123,35"/><area shape="rect" id="node13" href="decodeframe__i_8cpp.html#ab7628a5173510caf4fce82bfba6b4a40" title="decodeframe_i" alt="" coords="1176,5,1283,35"/><area shape="rect" id="node17" href="_p_slice_8h.html#a08458d29753b64df9de1d40b748fdf0b" title="PSliceDecode" alt="" coords="869,59,973,88"/><area shape="rect" id="node19" href="decodeframe__b_8cpp.html#a01538ccadc6514406416e19a6ebae001" title="DoProcessDB" alt="" coords="1021,59,1125,88"/><area shape="rect" id="node23" href="decodeframe__p_8cpp.html#a49c748890470e9cac9c8f01ad19d562c" title="DoProcessDP" alt="" coords="1021,112,1125,141"/><area shape="rect" id="node21" href="decodeframe__b_8cpp.html#a501cfeae2c764e7998e9c9f2240748bd" title="decodeframe_b" alt="" coords="1175,59,1284,88"/><area shape="rect" id="node25" href="decodeframe__p_8cpp.html#a7f615124f132ce807e3850fff0997a9a" title="decodeframe_p" alt="" coords="1175,112,1284,141"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ae22bb3624a8e7a421b4e8008720d67a5"></a><!-- doxytag: member="IMacroblockCodec.cpp::LUMA_INDEX" ref="ae22bb3624a8e7a421b4e8008720d67a5" args="[16]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="_p_b_macroblock_codec_8cpp.html#ae22bb3624a8e7a421b4e8008720d67a5">LUMA_INDEX</a>[16] = {0, 1, 4, 5, 2, 3, 6, 7, 8, 9, 12, 13, 10, 11, 14, 15}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a12d5120842ae04b4f2743ad6b5fc6f74"></a><!-- doxytag: member="IMacroblockCodec.cpp::LUMA_INDEX_INV" ref="a12d5120842ae04b4f2743ad6b5fc6f74" args="[16]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="_p_b_macroblock_codec_8cpp.html#a12d5120842ae04b4f2743ad6b5fc6f74">LUMA_INDEX_INV</a>[16] = {0, 1, 4, 5, 2, 3, 6, 7, 8, 9, 12, 13, 10, 11, 14, 15}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Jun 10 20:56:38 2010 for MVC by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
