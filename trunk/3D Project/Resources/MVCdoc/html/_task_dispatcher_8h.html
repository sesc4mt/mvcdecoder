<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MVC: MVCDecoder/TaskDispatcher.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MVCDecoder/TaskDispatcher.h File Reference</h1>
<p><a href="_task_dispatcher_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8h.html#aac0db9a0280340fa820b89366c85d392">MASTER_CODE</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8h.html#a1d60dff3d8b50942f03375c11e724af2">ProcessFrames</a> ()</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="aac0db9a0280340fa820b89366c85d392"></a><!-- doxytag: member="TaskDispatcher.h::MASTER_CODE" ref="aac0db9a0280340fa820b89366c85d392" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MASTER_CODE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a1d60dff3d8b50942f03375c11e724af2"></a><!-- doxytag: member="TaskDispatcher.h::ProcessFrames" ref="a1d60dff3d8b50942f03375c11e724af2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProcessFrames </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00184"></a>00184 {
<a name="l00185"></a>00185         <a class="code" href="class_sliding_window.html">SlidingWindow</a> sw;
<a name="l00186"></a>00186         <a class="code" href="class_bitstream_data.html">BitstreamData</a> bd(&amp;sw, <a class="code" href="class_configure.html#a0e7dd4e79c40df653c7ca73ecbab5d39">Configure::outputFileName</a>);
<a name="l00187"></a>00187         <span class="keywordflow">while</span> (1)
<a name="l00188"></a>00188         {
<a name="l00189"></a>00189                 <span class="keywordtype">int</span> viewCount = <a class="code" href="class_codec_info.html#ad439fd8062a03d868dfe9c9b615b747e">CodecInfo::GetInstance</a>().<a class="code" href="class_codec_info.html#aee785011cec77ff3c0c646b498fe1e7d">sps</a>.<a class="code" href="struct_sequence_parameters_set.html#af32c7819f630856ccd99aaf78e8f656c">viewCount</a>;
<a name="l00190"></a>00190                 <span class="keywordflow">if</span> (viewCount)
<a name="l00191"></a>00191                         <span class="keywordflow">break</span>;
<a name="l00192"></a>00192                 Sleep(10);
<a name="l00193"></a>00193         }
<a name="l00194"></a>00194         <a class="code" href="struct_sequence_parameters_set.html">SequenceParametersSet</a> &amp;sps = <a class="code" href="class_codec_info.html#ad439fd8062a03d868dfe9c9b615b747e">CodecInfo::GetInstance</a>().<a class="code" href="class_codec_info.html#aee785011cec77ff3c0c646b498fe1e7d">sps</a>;
<a name="l00195"></a>00195         <a class="code" href="class_raw_data.html">RawData</a> data(&amp;sw, <a class="code" href="class_configure.html#aa6d6606a0e2fb33b2f828f207df7e140">Configure::inputPattern</a>);
<a name="l00196"></a>00196         <a class="code" href="class_frame_controller___parallel.html">FrameController_Parallel</a> fc(&amp;sw);
<a name="l00197"></a>00197         <a class="code" href="_task_dispatcher_8cpp.html#ab5d80279fc1eb333a1b618fee7c72293">frameController</a> = &amp;fc;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199         printf(<span class="stringliteral">&quot;Decoding...\n&quot;</span>);
<a name="l00200"></a>00200         memset(&amp;<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>));
<a name="l00201"></a>00201 
<a name="l00202"></a>00202         <span class="keywordtype">long</span> start = <a class="code" href="_arch_8h.html#aae16a08f453f828deb4ccd262d87a278">MVCGetCurrentTime</a>();
<a name="l00203"></a>00203 
<a name="l00204"></a>00204         <span class="keywordflow">while</span> (!<a class="code" href="_task_dispatcher_8cpp.html#ab5d80279fc1eb333a1b618fee7c72293">frameController</a>-&gt;<a class="code" href="class_a_frame_controller.html#a92ba4b7f8c0c84fff8be7203fae5221d">ProcessCompleted</a>())
<a name="l00205"></a>00205         {
<a name="l00206"></a>00206                 <a class="code" href="_task_dispatcher_8cpp.html#a9bcd530a1adc34d2682d1c3f4efde83d">QueryFreeSPU</a>();
<a name="l00207"></a>00207                 <span class="keywordflow">if</span> (!<a class="code" href="_task_dispatcher_8cpp.html#a1e5512b854fe00784fa90b20538f53a8">WaitForSpu</a>())
<a name="l00208"></a>00208                         <span class="keywordflow">continue</span>;
<a name="l00209"></a>00209                 <a class="code" href="struct_coding_pict_info.html">CodingPictInfo</a> *cpi = <a class="code" href="_task_dispatcher_8cpp.html#ab5d80279fc1eb333a1b618fee7c72293">frameController</a>-&gt;<a class="code" href="class_a_frame_controller.html#acc142fa10ce535ee171698af719c4d27">GetNextProcessing</a>();
<a name="l00210"></a>00210                 <span class="keywordflow">if</span> (cpi)
<a name="l00211"></a>00211                 {
<a name="l00212"></a>00212                         <a class="code" href="_task_dispatcher_8cpp.html#a5eb536390124a07fc11778cc184e7d60">DispatchTask</a>(cpi);
<a name="l00213"></a>00213                 }
<a name="l00214"></a>00214                 <span class="keywordflow">else</span>
<a name="l00215"></a>00215                         Sleep(1);
<a name="l00216"></a>00216         }
<a name="l00217"></a>00217         <a class="code" href="_task_dispatcher_8cpp.html#a683a180d77fb88a0f2a3d94bb592be39">QueryFreeAll</a>();
<a name="l00218"></a>00218 
<a name="l00219"></a>00219         <span class="keywordtype">long</span> stop = <a class="code" href="_arch_8h.html#aae16a08f453f828deb4ccd262d87a278">MVCGetCurrentTime</a>();
<a name="l00220"></a>00220         printf(<span class="stringliteral">&quot;Time Used:%ld\n&quot;</span>, stop - start); 
<a name="l00221"></a>00221 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8h_a1d60dff3d8b50942f03375c11e724af2_cgraph.png" border="0" usemap="#_task_dispatcher_8h_a1d60dff3d8b50942f03375c11e724af2_cgraph_map" alt=""></div>
<map name="_task_dispatcher_8h_a1d60dff3d8b50942f03375c11e724af2_cgraph_map" id="_task_dispatcher_8h_a1d60dff3d8b50942f03375c11e724af2_cgraph">
<area shape="rect" id="node3" href="_task_dispatcher_8cpp.html#a5eb536390124a07fc11778cc184e7d60" title="DispatchTask" alt="" coords="240,56,341,85"/><area shape="rect" id="node7" href="_task_dispatcher_8cpp.html#a1e5512b854fe00784fa90b20538f53a8" title="WaitForSpu" alt="" coords="653,240,744,269"/><area shape="rect" id="node11" href="class_codec_info.html#ad439fd8062a03d868dfe9c9b615b747e" title="CodecInfo::GetInstance" alt="" coords="212,160,369,189"/><area shape="rect" id="node15" href="class_a_frame_controller.html#acc142fa10ce535ee171698af719c4d27" title="AFrameController::GetNextProcessing" alt="" coords="169,213,412,243"/><area shape="rect" id="node17" href="_arch_8h.html#aae16a08f453f828deb4ccd262d87a278" title="MVCGetCurrentTime" alt="" coords="220,267,361,296"/><area shape="rect" id="node19" href="class_a_frame_controller.html#a92ba4b7f8c0c84fff8be7203fae5221d" title="AFrameController::ProcessCompleted" alt="" coords="171,320,411,349"/><area shape="rect" id="node21" href="_task_dispatcher_8cpp.html#a683a180d77fb88a0f2a3d94bb592be39" title="QueryFreeAll" alt="" coords="241,424,340,453"/><area shape="rect" id="node24" href="_task_dispatcher_8cpp.html#a9bcd530a1adc34d2682d1c3f4efde83d" title="QueryFreeSPU" alt="" coords="479,372,588,401"/><area shape="rect" id="node5" href="_task_dispatcher_8cpp.html#a4d4510d185efabc073b3e0ca88053fb1" title="TransferParam" alt="" coords="480,5,587,35"/><area shape="rect" id="node9" href="class_a_frame_controller.html#afd4834463eebfc33536fed009bfb966c" title="AFrameController::OnFrameComplete" alt="" coords="792,332,1032,361"/><area shape="rect" id="node13" href="class_codec_info.html#ab2ecf673aaa2480fafb0b3d22896e4b6" title="CodecInfo::CodecInfo" alt="" coords="461,160,605,189"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8h_a1d60dff3d8b50942f03375c11e724af2_icgraph.png" border="0" usemap="#_task_dispatcher_8h_a1d60dff3d8b50942f03375c11e724af2_icgraph_map" alt=""></div>
<map name="_task_dispatcher_8h_a1d60dff3d8b50942f03375c11e724af2_icgraph_map" id="_task_dispatcher_8h_a1d60dff3d8b50942f03375c11e724af2_icgraph">
<area shape="rect" id="node3" href="_mvc_decoder_8cpp.html#ac0f2228420376f4db7e1274f2b41667c" title="main" alt="" coords="168,5,219,35"/></map>
</div>
</p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Jun 10 20:58:10 2010 for MVC by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
