<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MVC: MVCCommonLib/Codec/vlcPred.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MVCCommonLib/Codec/vlcPred.cpp File Reference</h1><code>#include &quot;<a class="el" href="vlc_pred_8cpp.html">vlcPred.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_types_8h_source.html">Types.h</a>&quot;</code><br/>
<code>#include &lt;iostream&gt;</code><br/>
<div class="dynheader">
Include dependency graph for vlcPred.cpp:</div>
<div class="dynsection">
<div class="center"><img src="vlc_pred_8cpp__incl.png" border="0" usemap="#_m_v_c_common_lib_2_codec_2vlc_pred_8cpp_map" alt=""/></div>
<map name="_m_v_c_common_lib_2_codec_2vlc_pred_8cpp_map" id="_m_v_c_common_lib_2_codec_2vlc_pred_8cpp">
<area shape="rect" id="node4" href="_types_8h.html" title="Types.h" alt="" coords="41,83,108,112"/></map>
</div>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<div class="center"><img src="vlc_pred_8cpp__dep__incl.png" border="0" usemap="#_m_v_c_common_lib_2_codec_2vlc_pred_8cppdep_map" alt=""/></div>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vlc_pred_8cpp.html#a6f45a44e2899810a4eac9ae0f637ecaa">MEDIAN</a>(a, b, c)&nbsp;&nbsp;&nbsp;((a)&gt;(b)?(a)&gt;(c)?(b)&gt;(c)?(b):(c):(a):(b)&gt;(c)?(a)&gt;(c)?(a):(c):(b))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vlc_pred_8cpp.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>(a, b)&nbsp;&nbsp;&nbsp;((a)&gt;(b)?(b):(a))</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vlc_pred_8cpp.html#ab68d6bc1fd9bc79cce8d7ab25983f092">getRefXYP</a> (<a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *ref_list, int r, int c1, int c2, <a class="el" href="structref_vector.html">refVector</a> &amp;ref, bool allowAboveRight, int type, int prefered)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vlc_pred_8cpp.html#a9d220d785c4b722cdecc8dcd7e1aa00f">getRefXYB</a> (<a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *ref_list, int r, int c1, int c2, <a class="el" href="structref_vector.html">refVector</a> *ref, bool allowAboveRight, int type, int prefered0, int prefered1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vlc_pred_8cpp.html#a1948c1579087f1b413f0db7dfdb3ca2c">getRefXY</a> (<a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *ref_list, int listId, int r, int c1, int c2, <a class="el" href="structref_vector.html">refVector</a> &amp;ref, bool allowAboveRight, int type, int prefered)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vlc_pred_8cpp.html#abfa7f4848a4146dd209263effc3c80d0">getRefXY_SKIP</a> (<a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *ref_list, int listId, int r, int c1, int c2, <a class="el" href="structref_vector.html">refVector</a> &amp;ref, bool allowAboveRight, int type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vlc_pred_8cpp.html#a87631dc54f2e2ca4fa038211f5bf07fa">setRefXY</a> (<a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *ref_list, int r, int c, <a class="el" href="structref_vector.html">refVector</a> &amp;ref)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vlc_pred_8cpp.html#a410c0bb38de1076a65df22538ef325de">setRefXY</a> (<a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *ref_list, int listId, int r, int c, <a class="el" href="structref_vector.html">refVector</a> &amp;ref)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vlc_pred_8cpp.html#a8e3b2d1b28e66aabfcb678547cd94545">getRefXYDirectB</a> (<a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *ref_list, <a class="el" href="structref_vector.html">refVector</a> *col_refs, <a class="el" href="structmacroblock_info.html">pmacroblockInfo</a> info, int r, int c1, int c2, <a class="el" href="structref_vector.html">refVector</a> *ref)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a6f45a44e2899810a4eac9ae0f637ecaa"></a><!-- doxytag: member="vlcPred.cpp::MEDIAN" ref="a6f45a44e2899810a4eac9ae0f637ecaa" args="(a, b, c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEDIAN</td>
          <td>(</td>
          <td class="paramtype">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">b, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">c&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((a)&gt;(b)?(a)&gt;(c)?(b)&gt;(c)?(b):(c):(a):(b)&gt;(c)?(a)&gt;(c)?(a):(c):(b))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac6afabdc09a49a433ee19d8a9486056d"></a><!-- doxytag: member="vlcPred.cpp::min" ref="ac6afabdc09a49a433ee19d8a9486056d" args="(a, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define min</td>
          <td>(</td>
          <td class="paramtype">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">b&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((a)&gt;(b)?(b):(a))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a1948c1579087f1b413f0db7dfdb3ca2c"></a><!-- doxytag: member="vlcPred.cpp::getRefXY" ref="a1948c1579087f1b413f0db7dfdb3ca2c" args="(cavlc_ref_list *ref_list, int listId, int r, int c1, int c2, refVector &amp;ref, bool allowAboveRight, int type, int prefered)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getRefXY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *&nbsp;</td>
          <td class="paramname"> <em>ref_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>listId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>c1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>c2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structref_vector.html">refVector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>allowAboveRight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>prefered</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00078"></a>00078 {
<a name="l00079"></a>00079         <span class="keywordtype">int</span> x1 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#a854c970004394513901757cc3dcb65e5">left</a>[r].<a class="code" href="structtag__cavlc__ref.html#a890a9186d3db3787c7a451e51f4fc0bf">mv_x</a>[listId],
<a name="l00080"></a>00080                 x2 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c1].<a class="code" href="structtag__cavlc__ref.html#a890a9186d3db3787c7a451e51f4fc0bf">mv_x</a>[listId],
<a name="l00081"></a>00081                 x3 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c2].<a class="code" href="structtag__cavlc__ref.html#a890a9186d3db3787c7a451e51f4fc0bf">mv_x</a>[listId];
<a name="l00082"></a>00082         <span class="keywordtype">int</span> y1 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#a854c970004394513901757cc3dcb65e5">left</a>[r].<a class="code" href="structtag__cavlc__ref.html#abae0c90668fedb380b2cc0773cfa351d">mv_y</a>[listId],
<a name="l00083"></a>00083                 y2 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c1].<a class="code" href="structtag__cavlc__ref.html#abae0c90668fedb380b2cc0773cfa351d">mv_y</a>[listId],
<a name="l00084"></a>00084                 y3 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c2].<a class="code" href="structtag__cavlc__ref.html#abae0c90668fedb380b2cc0773cfa351d">mv_y</a>[listId];
<a name="l00085"></a>00085         <span class="keywordtype">int</span> n1 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#a854c970004394513901757cc3dcb65e5">left</a>[r].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId],
<a name="l00086"></a>00086                 n2 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c1].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId],
<a name="l00087"></a>00087                 n3 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c2].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId];
<a name="l00088"></a>00088         <span class="keywordflow">if</span> (!allowAboveRight || x3 == 0x4000)
<a name="l00089"></a>00089         {
<a name="l00090"></a>00090                 x3 = ref.<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a>;
<a name="l00091"></a>00091                 y3 = ref.<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a>;
<a name="l00092"></a>00092                 n3 = ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>;
<a name="l00093"></a>00093         }
<a name="l00094"></a>00094         <span class="keywordtype">bool</span> o1 = (x1!=0x2000) &amp;&amp; (x1!=0x4000),
<a name="l00095"></a>00095                 o2 = (x2!=0x2000) &amp;&amp; (x2!=0x4000),
<a name="l00096"></a>00096                 o3 = (x3!=0x2000) &amp;&amp; (x3!=0x4000);
<a name="l00097"></a>00097         <span class="keywordflow">if</span> (prefered&gt;=0)
<a name="l00098"></a>00098         {
<a name="l00099"></a>00099                 ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = prefered;
<a name="l00100"></a>00100         }
<a name="l00101"></a>00101         <span class="keywordflow">else</span>
<a name="l00102"></a>00102         {
<a name="l00103"></a>00103                 ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = -1;
<a name="l00104"></a>00104                 <span class="keywordflow">if</span> (o1 &amp;&amp; (<a class="code" href="_types_8h.html#a363e4d606232036a6b89060813c45489">uint8_t</a>)ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#a854c970004394513901757cc3dcb65e5">left</a>[r].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId] &lt; (<a class="code" href="_types_8h.html#a363e4d606232036a6b89060813c45489">uint8_t</a>)ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>)
<a name="l00105"></a>00105                         ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#a854c970004394513901757cc3dcb65e5">left</a>[r].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId];
<a name="l00106"></a>00106                 <span class="keywordflow">if</span> (o2 &amp;&amp; (<a class="code" href="_types_8h.html#a363e4d606232036a6b89060813c45489">uint8_t</a>)ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c1].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId] &lt; (<a class="code" href="_types_8h.html#a363e4d606232036a6b89060813c45489">uint8_t</a>)ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>)
<a name="l00107"></a>00107                         ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c1].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId];
<a name="l00108"></a>00108                 <span class="keywordflow">if</span> (o3 &amp;&amp; (<a class="code" href="_types_8h.html#a363e4d606232036a6b89060813c45489">uint8_t</a>)n3 &lt; (<a class="code" href="_types_8h.html#a363e4d606232036a6b89060813c45489">uint8_t</a>)ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>)
<a name="l00109"></a>00109                         ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = n3;
<a name="l00110"></a>00110         }
<a name="l00111"></a>00111         <span class="keywordflow">if</span> (ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> &lt; 0)
<a name="l00112"></a>00112         {
<a name="l00113"></a>00113                 ref.<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = 0x2000;
<a name="l00114"></a>00114                 ref.<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = 0x2000;
<a name="l00115"></a>00115         }
<a name="l00116"></a>00116         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (o1 &amp;&amp; (type==1 &amp;&amp; n1==ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> <span class="comment">/*|| !o2 &amp;&amp; !o3*/</span> || n1==ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>&amp;&amp;n2!=ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>&amp;&amp;n3!=ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>))
<a name="l00117"></a>00117         {
<a name="l00118"></a>00118                 ref.<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = x1;
<a name="l00119"></a>00119                 ref.<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = y1;
<a name="l00120"></a>00120         }
<a name="l00121"></a>00121         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (o2 &amp;&amp; (type==2 &amp;&amp; n2==ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> <span class="comment">/*|| !o1 &amp;&amp; !o3*/</span> || n2==ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>&amp;&amp;n1!=ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>&amp;&amp;n3!=ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>))
<a name="l00122"></a>00122         {
<a name="l00123"></a>00123                 ref.<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = x2;
<a name="l00124"></a>00124                 ref.<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = y2;
<a name="l00125"></a>00125         }
<a name="l00126"></a>00126         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (o3 &amp;&amp; (type==3 &amp;&amp; n3==ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> <span class="comment">/*|| !o1 &amp;&amp; !o2*/</span> || n3==ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>&amp;&amp;n2!=ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>&amp;&amp;n1!=ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>))
<a name="l00127"></a>00127         {
<a name="l00128"></a>00128                 ref.<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = x3;
<a name="l00129"></a>00129                 ref.<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = y3;
<a name="l00130"></a>00130         }
<a name="l00131"></a>00131         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x2==0x4000 &amp;&amp; x3==0x4000)
<a name="l00132"></a>00132         {
<a name="l00133"></a>00133                 ref.<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = (x1&amp;0x0FFF)-(x1&amp;0x1000);
<a name="l00134"></a>00134                 ref.<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = (y1&amp;0x0FFF)-(y1&amp;0x1000);
<a name="l00135"></a>00135         }
<a name="l00136"></a>00136         <span class="keywordflow">else</span>
<a name="l00137"></a>00137         {
<a name="l00138"></a>00138                 ref.<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = <a class="code" href="vlc_pred_8cpp.html#a6f45a44e2899810a4eac9ae0f637ecaa">MEDIAN</a>((x1&amp;0x0FFF)-(x1&amp;0x1000), (x2&amp;0x0FFF)-(x2&amp;0x1000), (x3&amp;0x0FFF)-(x3&amp;0x1000));
<a name="l00139"></a>00139                 ref.<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = <a class="code" href="vlc_pred_8cpp.html#a6f45a44e2899810a4eac9ae0f637ecaa">MEDIAN</a>((y1&amp;0x0FFF)-(y1&amp;0x1000), (y2&amp;0x0FFF)-(y2&amp;0x1000), (y3&amp;0x0FFF)-(y3&amp;0x1000));
<a name="l00140"></a>00140         }
<a name="l00141"></a>00141 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="vlc_pred_8cpp_a1948c1579087f1b413f0db7dfdb3ca2c_icgraph.png" border="0" usemap="#vlc_pred_8cpp_a1948c1579087f1b413f0db7dfdb3ca2c_icgraph_map" alt=""></div>
<map name="vlc_pred_8cpp_a1948c1579087f1b413f0db7dfdb3ca2c_icgraph_map" id="vlc_pred_8cpp_a1948c1579087f1b413f0db7dfdb3ca2c_icgraph">
<area shape="rect" id="node3" href="vlc_pred_8h.html#a02dab9112419ae319a7abbe063c8f40a" title="getRefXY_SKIP" alt="" coords="128,5,240,35"/><area shape="rect" id="node17" href="vlc_pred_8h.html#a4222a40d553e245422dc095af407aefe" title="getRefXYB" alt="" coords="143,59,225,88"/><area shape="rect" id="node19" href="vlc_pred_8h.html#ab68d6bc1fd9bc79cce8d7ab25983f092" title="getRefXYP" alt="" coords="143,112,225,141"/><area shape="rect" id="node22" href="_p_b_c_a_v_l_c_8h.html#a9d0d19143ae03ff45bcfbf2c9980b11b" title="macroblock_read_cavlc_B_slice" alt="" coords="289,164,495,193"/><area shape="rect" id="node5" href="_p_b_c_a_v_l_c_8h.html#afe9c114999f137df97529d13c1e485bb" title="macroblock_read_cavlc_P_slice" alt="" coords="289,111,495,140"/><area shape="rect" id="node7" href="_p_slice_8h.html#a08458d29753b64df9de1d40b748fdf0b" title="PSliceDecode" alt="" coords="544,137,648,167"/><area shape="rect" id="node9" href="decodeframe__b_8cpp.html#a01538ccadc6514406416e19a6ebae001" title="DoProcessDB" alt="" coords="696,111,800,140"/><area shape="rect" id="node13" href="decodeframe__p_8cpp.html#a49c748890470e9cac9c8f01ad19d562c" title="DoProcessDP" alt="" coords="696,164,800,193"/><area shape="rect" id="node11" href="decodeframe__b_8cpp.html#a501cfeae2c764e7998e9c9f2240748bd" title="decodeframe_b" alt="" coords="849,111,959,140"/><area shape="rect" id="node15" href="decodeframe__p_8cpp.html#a7f615124f132ce807e3850fff0997a9a" title="decodeframe_p" alt="" coords="849,164,959,193"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abfa7f4848a4146dd209263effc3c80d0"></a><!-- doxytag: member="vlcPred.cpp::getRefXY_SKIP" ref="abfa7f4848a4146dd209263effc3c80d0" args="(cavlc_ref_list *ref_list, int listId, int r, int c1, int c2, refVector &amp;ref, bool allowAboveRight, int type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getRefXY_SKIP </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *&nbsp;</td>
          <td class="paramname"> <em>ref_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>listId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>c1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>c2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structref_vector.html">refVector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>allowAboveRight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00144"></a>00144 {
<a name="l00145"></a>00145         <span class="keywordtype">int</span> x1 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#a854c970004394513901757cc3dcb65e5">left</a>[r].<a class="code" href="structtag__cavlc__ref.html#a890a9186d3db3787c7a451e51f4fc0bf">mv_x</a>[listId],
<a name="l00146"></a>00146                 x2 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c1].<a class="code" href="structtag__cavlc__ref.html#a890a9186d3db3787c7a451e51f4fc0bf">mv_x</a>[listId];
<a name="l00147"></a>00147         <span class="keywordtype">int</span> y1 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#a854c970004394513901757cc3dcb65e5">left</a>[r].<a class="code" href="structtag__cavlc__ref.html#abae0c90668fedb380b2cc0773cfa351d">mv_y</a>[listId],
<a name="l00148"></a>00148                 y2 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c1].<a class="code" href="structtag__cavlc__ref.html#abae0c90668fedb380b2cc0773cfa351d">mv_y</a>[listId];
<a name="l00149"></a>00149         <span class="keywordflow">if</span> ((x1==0x4000) || (x2==0x4000) || 
<a name="l00150"></a>00150                 x1==0 &amp;&amp; y1==0 &amp;&amp; ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#a854c970004394513901757cc3dcb65e5">left</a>[r].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId]==0 ||
<a name="l00151"></a>00151                 x2==0 &amp;&amp; y2==0 &amp;&amp; ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c1].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId]==0)
<a name="l00152"></a>00152         {
<a name="l00153"></a>00153                 ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = 0;
<a name="l00154"></a>00154                 ref.<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = 0;
<a name="l00155"></a>00155                 ref.<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = 0;
<a name="l00156"></a>00156                 return ;
<a name="l00157"></a>00157         }
<a name="l00158"></a>00158         <a class="code" href="vlc_pred_8cpp.html#a1948c1579087f1b413f0db7dfdb3ca2c">getRefXY</a>(ref_list, listId, r, c1, c2, ref, allowAboveRight, type);
<a name="l00159"></a>00159 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="vlc_pred_8cpp_abfa7f4848a4146dd209263effc3c80d0_cgraph.png" border="0" usemap="#vlc_pred_8cpp_abfa7f4848a4146dd209263effc3c80d0_cgraph_map" alt=""></div>
<map name="vlc_pred_8cpp_abfa7f4848a4146dd209263effc3c80d0_cgraph_map" id="vlc_pred_8cpp_abfa7f4848a4146dd209263effc3c80d0_cgraph">
<area shape="rect" id="node3" href="vlc_pred_8cpp.html#a1948c1579087f1b413f0db7dfdb3ca2c" title="getRefXY" alt="" coords="165,5,240,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="vlc_pred_8cpp_abfa7f4848a4146dd209263effc3c80d0_icgraph.png" border="0" usemap="#vlc_pred_8cpp_abfa7f4848a4146dd209263effc3c80d0_icgraph_map" alt=""></div>
<map name="vlc_pred_8cpp_abfa7f4848a4146dd209263effc3c80d0_icgraph_map" id="vlc_pred_8cpp_abfa7f4848a4146dd209263effc3c80d0_icgraph">
<area shape="rect" id="node3" href="_p_b_c_a_v_l_c_8h.html#afe9c114999f137df97529d13c1e485bb" title="macroblock_read_cavlc_P_slice" alt="" coords="167,32,372,61"/><area shape="rect" id="node5" href="_p_slice_8h.html#a08458d29753b64df9de1d40b748fdf0b" title="PSliceDecode" alt="" coords="421,32,525,61"/><area shape="rect" id="node7" href="decodeframe__b_8cpp.html#a01538ccadc6514406416e19a6ebae001" title="DoProcessDB" alt="" coords="573,5,677,35"/><area shape="rect" id="node11" href="decodeframe__p_8cpp.html#a49c748890470e9cac9c8f01ad19d562c" title="DoProcessDP" alt="" coords="573,59,677,88"/><area shape="rect" id="node9" href="decodeframe__b_8cpp.html#a501cfeae2c764e7998e9c9f2240748bd" title="decodeframe_b" alt="" coords="727,5,836,35"/><area shape="rect" id="node13" href="decodeframe__p_8cpp.html#a7f615124f132ce807e3850fff0997a9a" title="decodeframe_p" alt="" coords="727,59,836,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9d220d785c4b722cdecc8dcd7e1aa00f"></a><!-- doxytag: member="vlcPred.cpp::getRefXYB" ref="a9d220d785c4b722cdecc8dcd7e1aa00f" args="(cavlc_ref_list *ref_list, int r, int c1, int c2, refVector *ref, bool allowAboveRight, int type, int prefered0, int prefered1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getRefXYB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *&nbsp;</td>
          <td class="paramname"> <em>ref_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>c1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>c2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structref_vector.html">refVector</a> *&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>allowAboveRight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>prefered0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>prefered1</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00072"></a>00072 {
<a name="l00073"></a>00073         <a class="code" href="vlc_pred_8cpp.html#a1948c1579087f1b413f0db7dfdb3ca2c">getRefXY</a>(ref_list, 0, r, c1, c2, ref[0], allowAboveRight, type, prefered0);
<a name="l00074"></a>00074         <a class="code" href="vlc_pred_8cpp.html#a1948c1579087f1b413f0db7dfdb3ca2c">getRefXY</a>(ref_list, 1, r, c1, c2, ref[1], allowAboveRight, type, prefered1);
<a name="l00075"></a>00075 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="vlc_pred_8cpp_a9d220d785c4b722cdecc8dcd7e1aa00f_cgraph.png" border="0" usemap="#vlc_pred_8cpp_a9d220d785c4b722cdecc8dcd7e1aa00f_cgraph_map" alt=""></div>
<map name="vlc_pred_8cpp_a9d220d785c4b722cdecc8dcd7e1aa00f_cgraph_map" id="vlc_pred_8cpp_a9d220d785c4b722cdecc8dcd7e1aa00f_cgraph">
<area shape="rect" id="node3" href="vlc_pred_8cpp.html#a1948c1579087f1b413f0db7dfdb3ca2c" title="getRefXY" alt="" coords="139,5,213,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8e3b2d1b28e66aabfcb678547cd94545"></a><!-- doxytag: member="vlcPred.cpp::getRefXYDirectB" ref="a8e3b2d1b28e66aabfcb678547cd94545" args="(cavlc_ref_list *ref_list, refVector *col_refs, pmacroblockInfo info, int r, int c1, int c2, refVector *ref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getRefXYDirectB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *&nbsp;</td>
          <td class="paramname"> <em>ref_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structref_vector.html">refVector</a> *&nbsp;</td>
          <td class="paramname"> <em>col_refs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmacroblock_info.html">pmacroblockInfo</a>&nbsp;</td>
          <td class="paramname"> <em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>c1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>c2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structref_vector.html">refVector</a> *&nbsp;</td>
          <td class="paramname"> <em>ref</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00202"></a>00202 {
<a name="l00203"></a>00203 
<a name="l00204"></a>00204         <a class="code" href="_types_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a>          bDirectZeroPred   = <span class="keyword">false</span>;
<a name="l00205"></a>00205         <a class="code" href="_types_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a>          bAllColNonZero    = <span class="keyword">false</span>;
<a name="l00206"></a>00206         <a class="code" href="_types_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a>          bColZeroFlagBlk0  = <span class="keyword">false</span>;
<a name="l00207"></a>00207         <a class="code" href="_types_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a>          bColZeroFlagBlk1  = <span class="keyword">false</span>;
<a name="l00208"></a>00208         <a class="code" href="_types_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a>          bColZeroFlagBlk2  = <span class="keyword">false</span>;
<a name="l00209"></a>00209         <a class="code" href="_types_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a>          bColZeroFlagBlk3  = <span class="keyword">false</span>;
<a name="l00210"></a>00210 
<a name="l00211"></a>00211         <span class="comment">//===== get reference indices and spatially predicted motion vectors =====</span>
<a name="l00212"></a>00212         <span class="keywordtype">int</span> ascRefIdx[2];
<a name="l00213"></a>00213         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; ++i)
<a name="l00214"></a>00214         {
<a name="l00215"></a>00215                 <span class="keywordtype">int</span> listId = i;
<a name="l00216"></a>00216                 <span class="keywordtype">int</span> x1 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#ae9fad3ab9c8086e7dd826492ee027b7d">lefts</a>[0].<a class="code" href="structtag__cavlc__ref.html#a890a9186d3db3787c7a451e51f4fc0bf">mv_x</a>[listId],
<a name="l00217"></a>00217                         x2 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#ab4d9282dda63bfa7f48cff76db26de04">tops</a>[0].<a class="code" href="structtag__cavlc__ref.html#a890a9186d3db3787c7a451e51f4fc0bf">mv_x</a>[listId],
<a name="l00218"></a>00218                         x3 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#ab4d9282dda63bfa7f48cff76db26de04">tops</a>[4].<a class="code" href="structtag__cavlc__ref.html#a890a9186d3db3787c7a451e51f4fc0bf">mv_x</a>[listId];
<a name="l00219"></a>00219                 <span class="keywordtype">int</span> y1 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#ae9fad3ab9c8086e7dd826492ee027b7d">lefts</a>[0].<a class="code" href="structtag__cavlc__ref.html#abae0c90668fedb380b2cc0773cfa351d">mv_y</a>[listId],
<a name="l00220"></a>00220                         y2 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#ab4d9282dda63bfa7f48cff76db26de04">tops</a>[0].<a class="code" href="structtag__cavlc__ref.html#abae0c90668fedb380b2cc0773cfa351d">mv_y</a>[listId],
<a name="l00221"></a>00221                         y3 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#ab4d9282dda63bfa7f48cff76db26de04">tops</a>[4].<a class="code" href="structtag__cavlc__ref.html#abae0c90668fedb380b2cc0773cfa351d">mv_y</a>[listId];
<a name="l00222"></a>00222                 <span class="keywordtype">int</span> n1 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#ae9fad3ab9c8086e7dd826492ee027b7d">lefts</a>[0].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId],
<a name="l00223"></a>00223                         n2 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#ab4d9282dda63bfa7f48cff76db26de04">tops</a>[0].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId],
<a name="l00224"></a>00224                         n3 = ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#ab4d9282dda63bfa7f48cff76db26de04">tops</a>[4].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId];
<a name="l00225"></a>00225                 <span class="keywordflow">if</span> (x3 == 0x4000)
<a name="l00226"></a>00226                 {
<a name="l00227"></a>00227                         x3 = ref[listId].<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a>;
<a name="l00228"></a>00228                         y3 = ref[listId].<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a>;
<a name="l00229"></a>00229                         n3 = ref[listId].<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>;
<a name="l00230"></a>00230                 }
<a name="l00231"></a>00231                 ref[listId].<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = -1;
<a name="l00232"></a>00232                 ref[listId].<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = 0x2000;
<a name="l00233"></a>00233                 ref[listId].<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = 0x2000;
<a name="l00234"></a>00234                 ascRefIdx[listId] = n1;
<a name="l00235"></a>00235                 <span class="keywordflow">if</span> (n2&gt;=0 &amp;&amp; ((n2&lt;ascRefIdx[listId]) || ascRefIdx[listId]&lt;0))
<a name="l00236"></a>00236                         ascRefIdx[listId] = n2;
<a name="l00237"></a>00237                 <span class="keywordflow">if</span> (n3&gt;=0 &amp;&amp; ((n3&lt;ascRefIdx[listId]) || ascRefIdx[listId]&lt;0))
<a name="l00238"></a>00238                         ascRefIdx[listId] = n3;
<a name="l00239"></a>00239                 <span class="keywordflow">if</span>( ascRefIdx[listId] &gt;= 0 )
<a name="l00240"></a>00240                 {
<a name="l00241"></a>00241                         <span class="keywordflow">if</span> (n1==ascRefIdx[listId] &amp;&amp; n2!=ascRefIdx[listId] &amp;&amp; n3!=ascRefIdx[listId] ||
<a name="l00242"></a>00242                                 x2==0x4000 &amp;&amp; x3==0x4000)
<a name="l00243"></a>00243                         {
<a name="l00244"></a>00244                                 ref[listId].<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = n1;
<a name="l00245"></a>00245                                 ref[listId].<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = x1;
<a name="l00246"></a>00246                                 ref[listId].<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = y1;
<a name="l00247"></a>00247                         }
<a name="l00248"></a>00248                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n2==ascRefIdx[listId] &amp;&amp; n1!=ascRefIdx[listId] &amp;&amp; n3!=ascRefIdx[listId] ||
<a name="l00249"></a>00249                                 x1==0x4000 &amp;&amp; x3==0x4000)
<a name="l00250"></a>00250                         {
<a name="l00251"></a>00251                                 ref[listId].<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = n2;
<a name="l00252"></a>00252                                 ref[listId].<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = x2;
<a name="l00253"></a>00253                                 ref[listId].<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = y2;
<a name="l00254"></a>00254                         }
<a name="l00255"></a>00255                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n3==ascRefIdx[listId] &amp;&amp; n1!=ascRefIdx[listId] &amp;&amp; n2!=ascRefIdx[listId] ||
<a name="l00256"></a>00256                                 x1==0x4000 &amp;&amp; x2==0x4000)
<a name="l00257"></a>00257                         {
<a name="l00258"></a>00258                                 ref[listId].<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = n3;
<a name="l00259"></a>00259                                 ref[listId].<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = x3;
<a name="l00260"></a>00260                                 ref[listId].<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = y3;
<a name="l00261"></a>00261                         }
<a name="l00262"></a>00262                         <span class="keywordflow">else</span>
<a name="l00263"></a>00263                         {
<a name="l00264"></a>00264                                 ref[listId].<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = ascRefIdx[listId];
<a name="l00265"></a>00265                                 ref[listId].<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = <a class="code" href="vlc_pred_8cpp.html#a6f45a44e2899810a4eac9ae0f637ecaa">MEDIAN</a>((x1&amp;0x0FFF)-(x1&amp;0x1000), (x2&amp;0x0FFF)-(x2&amp;0x1000), (x3&amp;0x0FFF)-(x3&amp;0x1000));
<a name="l00266"></a>00266                                 ref[listId].<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = <a class="code" href="vlc_pred_8cpp.html#a6f45a44e2899810a4eac9ae0f637ecaa">MEDIAN</a>((y1&amp;0x0FFF)-(y1&amp;0x1000), (y2&amp;0x0FFF)-(y2&amp;0x1000), (y3&amp;0x0FFF)-(y3&amp;0x1000));
<a name="l00267"></a>00267                         }
<a name="l00268"></a>00268                 }
<a name="l00269"></a>00269         }
<a name="l00270"></a>00270 
<a name="l00271"></a>00271         <span class="keywordflow">if</span>( ascRefIdx[0] &lt; 0 &amp;&amp; ascRefIdx[1] &lt; 0 )
<a name="l00272"></a>00272         {
<a name="l00273"></a>00273                 ascRefIdx[0] = 0;
<a name="l00274"></a>00274                 ascRefIdx[1] = 0;
<a name="l00275"></a>00275                 ref[0].<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = 0;
<a name="l00276"></a>00276                 ref[1].<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = 0;
<a name="l00277"></a>00277                 bDirectZeroPred   = <span class="keyword">true</span>;
<a name="l00278"></a>00278                 bAllColNonZero    = <span class="keyword">true</span>;
<a name="l00279"></a>00279         }
<a name="l00280"></a>00280 
<a name="l00281"></a>00281         <span class="comment">//===== check co-located =====</span>
<a name="l00282"></a>00282         <span class="keywordflow">if</span>( ! bAllColNonZero )
<a name="l00283"></a>00283         {
<a name="l00284"></a>00284                 <span class="keywordtype">int</span>   scRefIdxCol;
<a name="l00285"></a>00285                 <a class="code" href="structref_vector.html">refVector</a>      acMvCol[4];
<a name="l00286"></a>00286 
<a name="l00287"></a>00287                 <span class="keywordflow">if</span>( ! bAllColNonZero )
<a name="l00288"></a>00288                 {
<a name="l00289"></a>00289                         <span class="comment">//if( b8x8 )</span>
<a name="l00290"></a>00290                         {
<a name="l00291"></a>00291                                 <span class="comment">//SParIdx4x4 eSubMbPartIdx = ( eParIdx &lt;= PART_8x8_1 ? ( eParIdx == PART_8x8_0 ? SPART_4x4_0 : SPART_4x4_1 )</span>
<a name="l00292"></a>00292                                 <span class="comment">//      : ( eParIdx == PART_8x8_2 ? SPART_4x4_2 : SPART_4x4_3 ) );</span>
<a name="l00293"></a>00293 
<a name="l00294"></a>00294                                 <span class="comment">//xGetColocatedMvRefIdx( acMvCol[0], scRefIdxCol, B4x4Idx( eParIdx + eSubMbPartIdx ) );</span>
<a name="l00295"></a>00295                                 <span class="comment">// todo:</span>
<a name="l00296"></a>00296                                 <span class="keywordtype">int</span> px = r, py = c1;
<a name="l00297"></a>00297                                 <span class="keywordflow">if</span> (px) ++px;
<a name="l00298"></a>00298                                 <span class="keywordflow">if</span> (py) ++py;
<a name="l00299"></a>00299                                 acMvCol[0] = col_refs[px*8 + py*2];
<a name="l00300"></a>00300                                 <span class="keywordflow">if</span> (acMvCol[0].refno&lt;0)
<a name="l00301"></a>00301                                 {
<a name="l00302"></a>00302                                         acMvCol[0] = col_refs[px*8 + py*2 + 1];
<a name="l00303"></a>00303                                 }
<a name="l00304"></a>00304                                 scRefIdxCol = acMvCol[0].<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>;
<a name="l00305"></a>00305                         }
<a name="l00306"></a>00306                         <span class="comment">//else</span>
<a name="l00307"></a>00307                         <span class="comment">//{</span>
<a name="l00308"></a>00308                                 <span class="comment">//===== THIS SHALL NEVER BE CALLED FOR INTERLACED SEQUENCES =====</span>
<a name="l00309"></a>00309                         <span class="comment">//      xGetColocatedMvsRefIdxNonInterlaced( acMvCol, scRefIdxCol, eParIdx );</span>
<a name="l00310"></a>00310                         <span class="comment">//}</span>
<a name="l00311"></a>00311 
<a name="l00312"></a>00312                         bAllColNonZero = ( scRefIdxCol != 0 );
<a name="l00313"></a>00313                 }
<a name="l00314"></a>00314 
<a name="l00315"></a>00315                 <span class="keywordflow">if</span>( ! bAllColNonZero )
<a name="l00316"></a>00316                 {
<a name="l00317"></a>00317                         bColZeroFlagBlk0   = ( abs(acMvCol[0].x) &lt;= 1 &amp;&amp; abs(acMvCol[0].y) &lt;= 1 );
<a name="l00318"></a>00318 
<a name="l00319"></a>00319                         <span class="comment">//if( ! b8x8 )</span>
<a name="l00320"></a>00320                         <span class="comment">//{</span>
<a name="l00321"></a>00321                         <span class="comment">//      bColZeroFlagBlk1 = ( acMvCol[1].getAbsHor() &lt;= 1 &amp;&amp; acMvCol[1].getAbsVer() &lt;= 1 );</span>
<a name="l00322"></a>00322                         <span class="comment">//      bColZeroFlagBlk2 = ( acMvCol[2].getAbsHor() &lt;= 1 &amp;&amp; acMvCol[2].getAbsVer() &lt;= 1 );</span>
<a name="l00323"></a>00323                         <span class="comment">//      bColZeroFlagBlk3 = ( acMvCol[3].getAbsHor() &lt;= 1 &amp;&amp; acMvCol[3].getAbsVer() &lt;= 1 );</span>
<a name="l00324"></a>00324                         <span class="comment">//}</span>
<a name="l00325"></a>00325                 }
<a name="l00326"></a>00326         }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328         <span class="comment">//===== set motion vectors and reference frames =====</span>
<a name="l00329"></a>00329         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; ++i)
<a name="l00330"></a>00330         {
<a name="l00331"></a>00331                 <span class="keywordtype">int</span> listId = i;
<a name="l00332"></a>00332                 <span class="keywordtype">int</span>         scRefIdx          = ascRefIdx[ listId ];
<a name="l00333"></a>00333 
<a name="l00334"></a>00334                 <a class="code" href="_types_8h.html#a76a8b016e5ad61faf9062cc387df5016">Bool</a>          bZeroMv;
<a name="l00335"></a>00335 
<a name="l00336"></a>00336 
<a name="l00337"></a>00337 
<a name="l00338"></a>00338                 <span class="comment">//----- set motion vectors -----</span>
<a name="l00339"></a>00339                 <span class="comment">//if( /*b8x8 ||*/ bAllColNonZero || scRefIdx &lt; 0 )</span>
<a name="l00340"></a>00340                 {
<a name="l00341"></a>00341                         bZeroMv         = ( bDirectZeroPred || scRefIdx &lt; 0 || ( scRefIdx == 0 &amp;&amp; bColZeroFlagBlk0 ) );
<a name="l00342"></a>00342                         <span class="keywordflow">if</span> (bZeroMv)
<a name="l00343"></a>00343                         {
<a name="l00344"></a>00344                                 ref[listId].<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = 0;
<a name="l00345"></a>00345                                 ref[listId].<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = 0;
<a name="l00346"></a>00346                         }
<a name="l00347"></a>00347                         <span class="comment">//const Mv&amp; rcMv  = ( bZeroMv ? Mv::ZeroMv() : acMvPred [ listId ] );</span>
<a name="l00348"></a>00348                         <span class="comment">//rcMbMotionDataLX.setAllMv( rcMv, eParIdx );</span>
<a name="l00349"></a>00349                 }
<a name="l00350"></a>00350                 <span class="comment">/*</span>
<a name="l00351"></a>00351 <span class="comment">                else</span>
<a name="l00352"></a>00352 <span class="comment">                {</span>
<a name="l00353"></a>00353 <span class="comment">                        bZeroMv         = ( scRefIdx == 1 &amp;&amp; bColZeroFlagBlk0 );</span>
<a name="l00354"></a>00354 <span class="comment">                        const Mv&amp; rcMv0 = ( bZeroMv ? Mv::ZeroMv() : acMvPred [ eListIdx ] );</span>
<a name="l00355"></a>00355 <span class="comment">                        rcMbMotionDataLX.setAllMv( rcMv0, eParIdx, SPART_4x4_0 );</span>
<a name="l00356"></a>00356 <span class="comment"></span>
<a name="l00357"></a>00357 <span class="comment">                        bZeroMv         = ( scRefIdx == 1 &amp;&amp; bColZeroFlagBlk1 );</span>
<a name="l00358"></a>00358 <span class="comment">                        const Mv&amp; rcMv1 = ( bZeroMv ? Mv::ZeroMv() : acMvPred [ eListIdx ] );</span>
<a name="l00359"></a>00359 <span class="comment">                        rcMbMotionDataLX.setAllMv( rcMv1, eParIdx, SPART_4x4_1 );</span>
<a name="l00360"></a>00360 <span class="comment"></span>
<a name="l00361"></a>00361 <span class="comment">                        bZeroMv         = ( scRefIdx == 1 &amp;&amp; bColZeroFlagBlk2 );</span>
<a name="l00362"></a>00362 <span class="comment">                        const Mv&amp; rcMv2 = ( bZeroMv ? Mv::ZeroMv() : acMvPred [ eListIdx ] );</span>
<a name="l00363"></a>00363 <span class="comment">                        rcMbMotionDataLX.setAllMv( rcMv2, eParIdx, SPART_4x4_2 );</span>
<a name="l00364"></a>00364 <span class="comment"></span>
<a name="l00365"></a>00365 <span class="comment">                        bZeroMv         = ( scRefIdx == 1 &amp;&amp; bColZeroFlagBlk3 );</span>
<a name="l00366"></a>00366 <span class="comment">                        const Mv&amp; rcMv3 = ( bZeroMv ? Mv::ZeroMv() : acMvPred [ eListIdx ] );</span>
<a name="l00367"></a>00367 <span class="comment">                        rcMbMotionDataLX.setAllMv( rcMv3, eParIdx, SPART_4x4_3 );</span>
<a name="l00368"></a>00368 <span class="comment">                }</span>
<a name="l00369"></a>00369 <span class="comment">                */</span>
<a name="l00370"></a>00370 
<a name="l00371"></a>00371 
<a name="l00372"></a>00372                 <span class="comment">//----- set reference indices and reference pictures -----</span>
<a name="l00373"></a>00373                 <span class="comment">/*</span>
<a name="l00374"></a>00374 <span class="comment">                rcMbMotionDataLX.setRefIdx ( scRefIdx,  eParIdx );</span>
<a name="l00375"></a>00375 <span class="comment"></span>
<a name="l00376"></a>00376 <span class="comment">                if( m_rcSliceHeader.getRefPicList( getMbPicType(), eListIdx ).size() )</span>
<a name="l00377"></a>00377 <span class="comment">                {</span>
<a name="l00378"></a>00378 <span class="comment">                        const Frame* pcFrame = ( scRefIdx &lt; 1 ? 0 : m_rcSliceHeader.getRefPic ( scRefIdx, getMbPicType(), eListIdx ).getFrame() );</span>
<a name="l00379"></a>00379 <span class="comment">                        rcMbMotionDataLX.setRefPic ( pcFrame,   eParIdx );</span>
<a name="l00380"></a>00380 <span class="comment">                }</span>
<a name="l00381"></a>00381 <span class="comment">                */</span>
<a name="l00382"></a>00382         }
<a name="l00383"></a>00383 
<a name="l00384"></a>00384 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="vlc_pred_8cpp_a8e3b2d1b28e66aabfcb678547cd94545_icgraph.png" border="0" usemap="#vlc_pred_8cpp_a8e3b2d1b28e66aabfcb678547cd94545_icgraph_map" alt=""></div>
<map name="vlc_pred_8cpp_a8e3b2d1b28e66aabfcb678547cd94545_icgraph_map" id="vlc_pred_8cpp_a8e3b2d1b28e66aabfcb678547cd94545_icgraph">
<area shape="rect" id="node3" href="_p_b_c_a_v_l_c_8cpp.html#a4a7eda3fa0f5c1be7775144cf14ff34e" title="calc_B_skip_refs" alt="" coords="175,5,295,35"/><area shape="rect" id="node5" href="_p_b_c_a_v_l_c_8h.html#a9d0d19143ae03ff45bcfbf2c9980b11b" title="macroblock_read_cavlc_B_slice" alt="" coords="345,32,551,61"/><area shape="rect" id="node7" href="_p_slice_8h.html#a08458d29753b64df9de1d40b748fdf0b" title="PSliceDecode" alt="" coords="600,32,704,61"/><area shape="rect" id="node9" href="decodeframe__b_8cpp.html#a01538ccadc6514406416e19a6ebae001" title="DoProcessDB" alt="" coords="752,5,856,35"/><area shape="rect" id="node13" href="decodeframe__p_8cpp.html#a49c748890470e9cac9c8f01ad19d562c" title="DoProcessDP" alt="" coords="752,59,856,88"/><area shape="rect" id="node11" href="decodeframe__b_8cpp.html#a501cfeae2c764e7998e9c9f2240748bd" title="decodeframe_b" alt="" coords="905,5,1015,35"/><area shape="rect" id="node15" href="decodeframe__p_8cpp.html#a7f615124f132ce807e3850fff0997a9a" title="decodeframe_p" alt="" coords="905,59,1015,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab68d6bc1fd9bc79cce8d7ab25983f092"></a><!-- doxytag: member="vlcPred.cpp::getRefXYP" ref="ab68d6bc1fd9bc79cce8d7ab25983f092" args="(cavlc_ref_list *ref_list, int r, int c1, int c2, refVector &amp;ref, bool allowAboveRight, int type, int prefered)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getRefXYP </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *&nbsp;</td>
          <td class="paramname"> <em>ref_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>c1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>c2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structref_vector.html">refVector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>allowAboveRight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>prefered</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00063"></a>00063 {
<a name="l00064"></a>00064         <a class="code" href="vlc_pred_8cpp.html#a1948c1579087f1b413f0db7dfdb3ca2c">getRefXY</a>(ref_list, 0, r, c1, c2, ref, allowAboveRight, type, prefered);
<a name="l00065"></a>00065         <span class="keywordflow">if</span> (ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> &lt; 0)
<a name="l00066"></a>00066         {
<a name="l00067"></a>00067                 ref.<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a> = ref.<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a> = ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> = 0;
<a name="l00068"></a>00068         }
<a name="l00069"></a>00069 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="vlc_pred_8cpp_ab68d6bc1fd9bc79cce8d7ab25983f092_cgraph.png" border="0" usemap="#vlc_pred_8cpp_ab68d6bc1fd9bc79cce8d7ab25983f092_cgraph_map" alt=""></div>
<map name="vlc_pred_8cpp_ab68d6bc1fd9bc79cce8d7ab25983f092_cgraph_map" id="vlc_pred_8cpp_ab68d6bc1fd9bc79cce8d7ab25983f092_cgraph">
<area shape="rect" id="node3" href="vlc_pred_8cpp.html#a1948c1579087f1b413f0db7dfdb3ca2c" title="getRefXY" alt="" coords="139,5,213,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="vlc_pred_8cpp_ab68d6bc1fd9bc79cce8d7ab25983f092_icgraph.png" border="0" usemap="#vlc_pred_8cpp_ab68d6bc1fd9bc79cce8d7ab25983f092_icgraph_map" alt=""></div>
<map name="vlc_pred_8cpp_ab68d6bc1fd9bc79cce8d7ab25983f092_icgraph_map" id="vlc_pred_8cpp_ab68d6bc1fd9bc79cce8d7ab25983f092_icgraph">
<area shape="rect" id="node3" href="_p_b_c_a_v_l_c_8h.html#afe9c114999f137df97529d13c1e485bb" title="macroblock_read_cavlc_P_slice" alt="" coords="140,32,345,61"/><area shape="rect" id="node5" href="_p_slice_8h.html#a08458d29753b64df9de1d40b748fdf0b" title="PSliceDecode" alt="" coords="395,32,499,61"/><area shape="rect" id="node7" href="decodeframe__b_8cpp.html#a01538ccadc6514406416e19a6ebae001" title="DoProcessDB" alt="" coords="547,5,651,35"/><area shape="rect" id="node11" href="decodeframe__p_8cpp.html#a49c748890470e9cac9c8f01ad19d562c" title="DoProcessDP" alt="" coords="547,59,651,88"/><area shape="rect" id="node9" href="decodeframe__b_8cpp.html#a501cfeae2c764e7998e9c9f2240748bd" title="decodeframe_b" alt="" coords="700,5,809,35"/><area shape="rect" id="node13" href="decodeframe__p_8cpp.html#a7f615124f132ce807e3850fff0997a9a" title="decodeframe_p" alt="" coords="700,59,809,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a410c0bb38de1076a65df22538ef325de"></a><!-- doxytag: member="vlcPred.cpp::setRefXY" ref="a410c0bb38de1076a65df22538ef325de" args="(cavlc_ref_list *ref_list, int listId, int r, int c, refVector &amp;ref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setRefXY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *&nbsp;</td>
          <td class="paramname"> <em>ref_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>listId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structref_vector.html">refVector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>ref</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00167"></a>00167 {
<a name="l00168"></a>00168         <span class="comment">//const int refno = ref.refno;</span>
<a name="l00169"></a>00169         ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#a854c970004394513901757cc3dcb65e5">left</a>[r].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId] = ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>;
<a name="l00170"></a>00170         ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c].<a class="code" href="structtag__cavlc__ref.html#a071bb830fe08f1df5618d391ed428221">refid</a>[listId] = ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a>;
<a name="l00171"></a>00171         <span class="keywordflow">if</span> (ref.<a class="code" href="structref_vector.html#a87a1d38b9e235b983b82abd3a0eb47ab">refno</a> == -1)
<a name="l00172"></a>00172         {
<a name="l00173"></a>00173                 ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#a854c970004394513901757cc3dcb65e5">left</a>[r].<a class="code" href="structtag__cavlc__ref.html#a890a9186d3db3787c7a451e51f4fc0bf">mv_x</a>[listId] = 0x2000;
<a name="l00174"></a>00174                 ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#a854c970004394513901757cc3dcb65e5">left</a>[r].<a class="code" href="structtag__cavlc__ref.html#abae0c90668fedb380b2cc0773cfa351d">mv_y</a>[listId] = 0x2000;
<a name="l00175"></a>00175                 ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c].<a class="code" href="structtag__cavlc__ref.html#a890a9186d3db3787c7a451e51f4fc0bf">mv_x</a>[listId] = 0x2000;
<a name="l00176"></a>00176                 ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c].<a class="code" href="structtag__cavlc__ref.html#abae0c90668fedb380b2cc0773cfa351d">mv_y</a>[listId] = 0x2000;
<a name="l00177"></a>00177         }
<a name="l00178"></a>00178         <span class="keywordflow">else</span>
<a name="l00179"></a>00179         {
<a name="l00180"></a>00180                 ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#a854c970004394513901757cc3dcb65e5">left</a>[r].<a class="code" href="structtag__cavlc__ref.html#a890a9186d3db3787c7a451e51f4fc0bf">mv_x</a>[listId] = ref.<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a>;
<a name="l00181"></a>00181                 ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c].<a class="code" href="structtag__cavlc__ref.html#a890a9186d3db3787c7a451e51f4fc0bf">mv_x</a>[listId] = ref.<a class="code" href="structref_vector.html#adeb9dca3f08b25112b9f6bccb5002f48">x</a>;
<a name="l00182"></a>00182                 ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#a854c970004394513901757cc3dcb65e5">left</a>[r].<a class="code" href="structtag__cavlc__ref.html#abae0c90668fedb380b2cc0773cfa351d">mv_y</a>[listId] = ref.<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a>;
<a name="l00183"></a>00183                 ref_list-&gt;<a class="code" href="structtag__cavlc__ref__list.html#af93b34de26224281e33b951333a665c7">top</a>[c].<a class="code" href="structtag__cavlc__ref.html#abae0c90668fedb380b2cc0773cfa351d">mv_y</a>[listId] = ref.<a class="code" href="structref_vector.html#a899825821ce74c5622ea369e32dcf67c">y</a>;
<a name="l00184"></a>00184         }
<a name="l00185"></a>00185 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a87631dc54f2e2ca4fa038211f5bf07fa"></a><!-- doxytag: member="vlcPred.cpp::setRefXY" ref="a87631dc54f2e2ca4fa038211f5bf07fa" args="(cavlc_ref_list *ref_list, int r, int c, refVector &amp;ref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setRefXY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtag__cavlc__ref__list.html">cavlc_ref_list</a> *&nbsp;</td>
          <td class="paramname"> <em>ref_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structref_vector.html">refVector</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>ref</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00162"></a>00162 {
<a name="l00163"></a>00163         <a class="code" href="vlc_pred_8cpp.html#a87631dc54f2e2ca4fa038211f5bf07fa">setRefXY</a>(ref_list, 0, r, c, ref);
<a name="l00164"></a>00164 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="vlc_pred_8cpp_a87631dc54f2e2ca4fa038211f5bf07fa_cgraph.png" border="0" usemap="#vlc_pred_8cpp_a87631dc54f2e2ca4fa038211f5bf07fa_cgraph_map" alt=""></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="vlc_pred_8cpp_a87631dc54f2e2ca4fa038211f5bf07fa_icgraph.png" border="0" usemap="#vlc_pred_8cpp_a87631dc54f2e2ca4fa038211f5bf07fa_icgraph_map" alt=""></div>
<map name="vlc_pred_8cpp_a87631dc54f2e2ca4fa038211f5bf07fa_icgraph_map" id="vlc_pred_8cpp_a87631dc54f2e2ca4fa038211f5bf07fa_icgraph">
<area shape="rect" id="node3" href="_p_b_c_a_v_l_c_8cpp.html#a4a7eda3fa0f5c1be7775144cf14ff34e" title="calc_B_skip_refs" alt="" coords="295,34,415,63"/><area shape="rect" id="node5" href="_p_b_c_a_v_l_c_8h.html#a9d0d19143ae03ff45bcfbf2c9980b11b" title="macroblock_read_cavlc_B_slice" alt="" coords="508,60,713,90"/><area shape="rect" id="node18" href="_p_b_c_a_v_l_c_8h.html#afe9c114999f137df97529d13c1e485bb" title="macroblock_read_cavlc_P_slice" alt="" coords="252,138,457,167"/><area shape="rect" id="node21" href="vlc_pred_8h.html#a87631dc54f2e2ca4fa038211f5bf07fa" title="setRefXY" alt="" coords="128,96,203,126"/><area shape="rect" id="node7" href="_p_slice_8h.html#a08458d29753b64df9de1d40b748fdf0b" title="PSliceDecode" alt="" coords="763,87,867,116"/><area shape="rect" id="node9" href="decodeframe__b_8cpp.html#a01538ccadc6514406416e19a6ebae001" title="DoProcessDB" alt="" coords="915,60,1019,90"/><area shape="rect" id="node13" href="decodeframe__p_8cpp.html#a49c748890470e9cac9c8f01ad19d562c" title="DoProcessDP" alt="" coords="915,114,1019,143"/><area shape="rect" id="node11" href="decodeframe__b_8cpp.html#a501cfeae2c764e7998e9c9f2240748bd" title="decodeframe_b" alt="" coords="1068,60,1177,90"/><area shape="rect" id="node15" href="decodeframe__p_8cpp.html#a7f615124f132ce807e3850fff0997a9a" title="decodeframe_p" alt="" coords="1068,114,1177,143"/></map>
</div>
</p>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Jun 10 20:55:23 2010 for MVC by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
