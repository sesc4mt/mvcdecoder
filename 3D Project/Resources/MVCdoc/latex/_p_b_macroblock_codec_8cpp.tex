\hypertarget{_p_b_macroblock_codec_8cpp}{
\section{MVCDecoder/Codec/PBFrame/PBMacroblockCodec.cpp File Reference}
\label{_p_b_macroblock_codec_8cpp}\index{MVCDecoder/Codec/PBFrame/PBMacroblockCodec.cpp@{MVCDecoder/Codec/PBFrame/PBMacroblockCodec.cpp}}
}
{\ttfamily \#include \char`\"{}PBMacroblockCodec.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}Common.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}Codec/DCTTransform.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}Codec/Quantisation.h\char`\"{}}\par
{\ttfamily \#include \char`\"{}Codec/Scanner.h\char`\"{}}\par
Include dependency graph for PBMacroblockCodec.cpp:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=206pt]{_p_b_macroblock_codec_8cpp__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=162pt]{_p_b_macroblock_codec_8cpp__dep__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{_p_b_macroblock_codec_8cpp_abbc239e3b8c30f008cb5e540e168a743}{macroblockInterDecode16x16\_\-y} (\hyperlink{_types_8h_a0f66eed76a4d7c1c98b92eb97caf0186}{exmacroblockdata\_\-y} dt, int Qp, \hyperlink{structmacroblock_info}{pmacroblockInfo} rst)
\item 
void \hyperlink{_p_b_macroblock_codec_8cpp_a907948e514ef3d05386e93a64d576c02}{macroblockInterDecode\_\-uv} (\hyperlink{_types_8h_a76c3a1d0417486239b5034c010e36ece}{exmacroblockdata\_\-uv} dt, int Qp\_\-uv, \hyperlink{_types_8h_a4a042a6cb76a44ae3f79ece0d72bccde}{scanlist\_\-uv} sl, \hyperlink{_types_8h_a7afd079e016df28b6c6b0f2eb7bf70c2}{scanlist\_\-uv\_\-h} sl\_\-h)
\item 
void \hyperlink{_p_b_macroblock_codec_8cpp_ad7127f8c7dabe086c8648f61be463740}{macroblockInterDecode} (\hyperlink{structexmacroblockdata}{pexmacroblockdata} dt, int Qp\_\-y, int Qp\_\-uv, \hyperlink{structmacroblock_info}{pmacroblockInfo} rst)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const int \hyperlink{_p_b_macroblock_codec_8cpp_ae22bb3624a8e7a421b4e8008720d67a5}{LUMA\_\-INDEX} \mbox{[}16\mbox{]} = \{0, 1, 4, 5, 2, 3, 6, 7, 8, 9, 12, 13, 10, 11, 14, 15\}
\item 
const int \hyperlink{_p_b_macroblock_codec_8cpp_a12d5120842ae04b4f2743ad6b5fc6f74}{LUMA\_\-INDEX\_\-INV} \mbox{[}16\mbox{]} = \{0, 1, 4, 5, 2, 3, 6, 7, 8, 9, 12, 13, 10, 11, 14, 15\}
\item 
const \hyperlink{_types_8h_ac7cdb549645a4e51f5efa2fca122cc60}{UChar} \hyperlink{_p_b_macroblock_codec_8cpp_a1826216a962c3c8d20e6a32f7423ee05}{g\_\-aucFrameScan64} \mbox{[}64\mbox{]}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{_p_b_macroblock_codec_8cpp_ad7127f8c7dabe086c8648f61be463740}{
\index{PBMacroblockCodec.cpp@{PBMacroblockCodec.cpp}!macroblockInterDecode@{macroblockInterDecode}}
\index{macroblockInterDecode@{macroblockInterDecode}!PBMacroblockCodec.cpp@{PBMacroblockCodec.cpp}}
\subsubsection[{macroblockInterDecode}]{\setlength{\rightskip}{0pt plus 5cm}void macroblockInterDecode ({\bf pexmacroblockdata} {\em dt}, \/  int {\em Qp\_\-y}, \/  int {\em Qp\_\-uv}, \/  {\bf pmacroblockInfo} {\em rst})}}
\label{_p_b_macroblock_codec_8cpp_ad7127f8c7dabe086c8648f61be463740}




\begin{footnotesize}\begin{alltt}
00148 \{
00149         \hyperlink{_p_b_macroblock_codec_8cpp_abbc239e3b8c30f008cb5e540e168a743}{macroblockInterDecode16x16_y}(dt->\hyperlink{structexmacroblockdata_a1a0e62951bdb79d51731b73601701cba}{y}, Qp\_y, rst);
00150         \hyperlink{_p_b_macroblock_codec_8cpp_a907948e514ef3d05386e93a64d576c02}{macroblockInterDecode_uv}(dt->\hyperlink{structexmacroblockdata_aeb6134d7ce9eb3883acb9858d303f475}{uv}, Qp\_uv, rst->\hyperlink{structmacroblock_info_a01c5c766f5445434369110a34cd1594e}{dct_uv_z}, rst->\hyperlink{structmacroblock_info_a973346c837d8cf284586c33b4a4d478a}{dct_uv_h});
00151 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=240pt]{_p_b_macroblock_codec_8cpp_ad7127f8c7dabe086c8648f61be463740_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=415pt]{_p_b_macroblock_codec_8cpp_ad7127f8c7dabe086c8648f61be463740_icgraph}
\end{center}
\end{figure}


\hypertarget{_p_b_macroblock_codec_8cpp_abbc239e3b8c30f008cb5e540e168a743}{
\index{PBMacroblockCodec.cpp@{PBMacroblockCodec.cpp}!macroblockInterDecode16x16\_\-y@{macroblockInterDecode16x16\_\-y}}
\index{macroblockInterDecode16x16\_\-y@{macroblockInterDecode16x16\_\-y}!PBMacroblockCodec.cpp@{PBMacroblockCodec.cpp}}
\subsubsection[{macroblockInterDecode16x16\_\-y}]{\setlength{\rightskip}{0pt plus 5cm}void macroblockInterDecode16x16\_\-y ({\bf exmacroblockdata\_\-y} {\em dt}, \/  int {\em Qp}, \/  {\bf pmacroblockInfo} {\em rst})}}
\label{_p_b_macroblock_codec_8cpp_abbc239e3b8c30f008cb5e540e168a743}




\begin{footnotesize}\begin{alltt}
00032 \{
00033         \hyperlink{_types_8h_a259fa4834387bd68627ddf37bb3ebdb9}{int16} dct[16][4][4];
00034 
00035         \textcolor{keywordflow}{if} (!rst->\hyperlink{structmacroblock_info_a0f244dcaf8b80e1f8adc3973e34e0a25}{transform8x8})
00036         \{
00037                 \textcolor{keywordtype}{int} i, j, k;
00038                 \textcolor{keywordtype}{int} x, y;
00039                 \textcolor{keywordflow}{for} (i = 0; i < 16; ++i)
00040                         \hyperlink{_scanner_8h_a368d4bb8bcbc27ebecc3939c468dbcff}{unscan_zig_4x4}(rst->\hyperlink{structmacroblock_info_ae8398ee14b29db905e426da03b462417}{dct_y_z}[i], dct[i][0]);
00041                 \textcolor{keywordflow}{for} (i = 0; i < 16; ++i)
00042                 \{
00043                         \hyperlink{_quantisation_8cpp_a5985492c5cf012e5d7051f11fa86821c}{iquant4x4_c}(dct[i], Qp);
00044                         x = i >> 2, y = i & 3;
00045                         x <<= 2; y <<= 2;
00046                         \hyperlink{_d_c_t_transform_8cpp_a923ec91bf45c73e8baaf4e1bbad9a289}{idct4x4_c}(dct[i]);
00047                         \textcolor{keywordflow}{for} (j = 0; j < 4; ++j)
00048                                 \textcolor{keywordflow}{for} (k = 0; k < 4; ++k)
00049                                 \{
00050                                         \hyperlink{_types_8h_a43d43196463bde49cb067f5c20ab8481}{int32} v = (\hyperlink{_types_8h_a43d43196463bde49cb067f5c20ab8481}{int32})dct[i][j][k];
00051                                         dt[x|j][y|k] = (v);
00052                                 \}
00053                 \}
00054         \}
00055         \textcolor{keywordflow}{else}
00056         \{
00057                 \textcolor{keywordtype}{int} i,j,k;
00058                 \textcolor{keywordflow}{for} (i = 0; i < 4; ++i)
00059                 \{
00060                         \hyperlink{_types_8h_a259fa4834387bd68627ddf37bb3ebdb9}{int16} *tmp = dct[i*4][0];
00061                         \textcolor{keywordflow}{for} (j = 0; j < 4; ++j)
00062                         \{
00063                                 \textcolor{keywordflow}{for} (k = 0; k < 16; ++k)
00064                                         tmp[\hyperlink{_p_b_macroblock_codec_8cpp_a1826216a962c3c8d20e6a32f7423ee05}{g_aucFrameScan64}[k*4+j]] = rst->
      \hyperlink{structmacroblock_info_ae8398ee14b29db905e426da03b462417}{dct_y_z}[\hyperlink{_i_macroblock_codec_8cpp_ae22bb3624a8e7a421b4e8008720d67a5}{LUMA_INDEX}[i*4+j]][k];
00065                         \}
00066                         \hyperlink{_quantisation_8cpp_a6096528e049a8f3c2a463926db773e42}{iquant8x8_c}(dct[i*4][0], Qp);
00067                         \hyperlink{_d_c_t_transform_8cpp_aab666ffcda45ced06a5b5853c52c94bf}{idct8x8}(dct[i*4][0]);
00068                 \}
00069                 \hyperlink{_types_8h_a259fa4834387bd68627ddf37bb3ebdb9}{int16} *dct8 = dct[0][0];
00070 
00071                 \textcolor{keywordtype}{int} v;
00072                 \textcolor{keywordflow}{for} (i = 0; i < 8; ++i)
00073                 \{
00074                         \textcolor{keywordflow}{for} (j = 0; j < 8; ++j)
00075                         \{
00076                                 v = dct8[i*8+j];
00077                                 dt[i][j] = (v);
00078                         \}
00079                 \}
00080 
00081                 dct8 += 64;
00082                 \textcolor{keywordflow}{for} (i = 0; i < 8; ++i)
00083                 \{
00084                         \textcolor{keywordflow}{for} (j = 0; j < 8; ++j)
00085                         \{
00086                                 v = dct8[i*8+j];
00087                                 dt[i][j+8] = (v);
00088                         \}
00089                 \}
00090 
00091                 dct8 += 64;
00092                 \textcolor{keywordflow}{for} (i = 0; i < 8; ++i)
00093                 \{
00094                         \textcolor{keywordflow}{for} (j = 0; j < 8; ++j)
00095                         \{
00096                                 v = dct8[i*8+j];
00097                                 dt[i+8][j] = (v);
00098                         \}
00099                 \}
00100 
00101                 dct8 += 64;
00102                 \textcolor{keywordflow}{for} (i = 0; i < 8; ++i)
00103                 \{
00104                         \textcolor{keywordflow}{for} (j = 0; j < 8; ++j)
00105                         \{
00106                                 v = dct8[i*8+j];
00107                                 dt[i+8][j+8] = (v);
00108                         \}
00109                 \}
00110 
00111         \}
00112 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=162pt]{_p_b_macroblock_codec_8cpp_abbc239e3b8c30f008cb5e540e168a743_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=420pt]{_p_b_macroblock_codec_8cpp_abbc239e3b8c30f008cb5e540e168a743_icgraph}
\end{center}
\end{figure}


\hypertarget{_p_b_macroblock_codec_8cpp_a907948e514ef3d05386e93a64d576c02}{
\index{PBMacroblockCodec.cpp@{PBMacroblockCodec.cpp}!macroblockInterDecode\_\-uv@{macroblockInterDecode\_\-uv}}
\index{macroblockInterDecode\_\-uv@{macroblockInterDecode\_\-uv}!PBMacroblockCodec.cpp@{PBMacroblockCodec.cpp}}
\subsubsection[{macroblockInterDecode\_\-uv}]{\setlength{\rightskip}{0pt plus 5cm}void macroblockInterDecode\_\-uv ({\bf exmacroblockdata\_\-uv} {\em dt}, \/  int {\em Qp\_\-uv}, \/  {\bf scanlist\_\-uv} {\em sl}, \/  {\bf scanlist\_\-uv\_\-h} {\em sl\_\-h})}}
\label{_p_b_macroblock_codec_8cpp_a907948e514ef3d05386e93a64d576c02}




\begin{footnotesize}\begin{alltt}
00115 \{
00116         \hyperlink{_types_8h_ae615613535a2b2445773922f5d45a861}{int16_t} udct[4][4][4];
00117         \hyperlink{_types_8h_ae615613535a2b2445773922f5d45a861}{int16_t} udct\_h[2][2];
00118 
00119         \textcolor{keywordtype}{int} l, i, j, k;
00120         \textcolor{keywordtype}{int} x, y;
00121         \textcolor{keywordflow}{for}(l = 0 ; l < 2 ; l ++)
00122         \{
00123                 \textcolor{keywordflow}{for}(i = 0 ; i < 4 ; i ++)
00124                         \hyperlink{_scanner_8h_a368d4bb8bcbc27ebecc3939c468dbcff}{unscan_zig_4x4}(sl[l][i], udct[i][0]);
00125                 \hyperlink{_scanner_8h_aaa0324e6a8196220003838250cc45e75}{unscan_zig_2x2}(sl\_h[l], udct\_h[0]);
00126                 
00127                 \hyperlink{_quantisation_8cpp_ad8c9813079b1dac9e7c7ab3d40a9a212}{iquant2x2dc_c}(udct\_h, Qp\_uv);
00128                 \hyperlink{_d_c_t_transform_8cpp_ada208d2366935100bdc2375bec45cc8f}{idct2x2dc_c}(udct\_h);
00129                 
00130                 \textcolor{keywordflow}{for}(i = 0 ; i < 4 ; i ++)
00131                 \{
00132                         \hyperlink{_quantisation_8cpp_a5985492c5cf012e5d7051f11fa86821c}{iquant4x4_c}(udct[i], Qp\_uv);
00133                         x = i>>1, y = i&1;
00134                         udct[i][0][0] = udct\_h[x][y];
00135                         x <<= 2; y <<= 2;
00136                         \hyperlink{_d_c_t_transform_8cpp_a923ec91bf45c73e8baaf4e1bbad9a289}{idct4x4_c}(udct[i]);
00137                         \textcolor{keywordflow}{for} (j = 0; j < 4; ++j)
00138                                 \textcolor{keywordflow}{for} (k = 0; k < 4; ++k)
00139                                 \{
00140                                         \hyperlink{_types_8h_a43d43196463bde49cb067f5c20ab8481}{int32} v = (\hyperlink{_types_8h_a43d43196463bde49cb067f5c20ab8481}{int32})udct[i][j][k];
00141                                         dt[l][x|j][y|k] = v;
00142                                 \}
00143                 \}
00144         \}
00145 \}
\end{alltt}\end{footnotesize}




Here is the call graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=151pt]{_p_b_macroblock_codec_8cpp_a907948e514ef3d05386e93a64d576c02_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=420pt]{_p_b_macroblock_codec_8cpp_a907948e514ef3d05386e93a64d576c02_icgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\hypertarget{_p_b_macroblock_codec_8cpp_a1826216a962c3c8d20e6a32f7423ee05}{
\index{PBMacroblockCodec.cpp@{PBMacroblockCodec.cpp}!g\_\-aucFrameScan64@{g\_\-aucFrameScan64}}
\index{g\_\-aucFrameScan64@{g\_\-aucFrameScan64}!PBMacroblockCodec.cpp@{PBMacroblockCodec.cpp}}
\subsubsection[{g\_\-aucFrameScan64}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf UChar} {\bf g\_\-aucFrameScan64}\mbox{[}64\mbox{]}}}
\label{_p_b_macroblock_codec_8cpp_a1826216a962c3c8d20e6a32f7423ee05}
{\bfseries Initial value:}

\begin{footnotesize}\begin{alltt}

\{
        0,  1,  8, 16,  9,  2,  3, 10,
        17, 24, 32, 25, 18, 11,  4,  5,
        12, 19, 26, 33, 40, 48, 41, 34,
        27, 20, 13,  6,  7, 14, 21, 28,
        35, 42, 49, 56, 57, 50, 43, 36,
        29, 22, 15, 23, 30, 37, 44, 51,
        58, 59, 52, 45, 38, 31, 39, 46,
        53, 60, 61, 54, 47, 55, 62, 63
\}
\end{alltt}\end{footnotesize}
\hypertarget{_p_b_macroblock_codec_8cpp_ae22bb3624a8e7a421b4e8008720d67a5}{
\index{PBMacroblockCodec.cpp@{PBMacroblockCodec.cpp}!LUMA\_\-INDEX@{LUMA\_\-INDEX}}
\index{LUMA\_\-INDEX@{LUMA\_\-INDEX}!PBMacroblockCodec.cpp@{PBMacroblockCodec.cpp}}
\subsubsection[{LUMA\_\-INDEX}]{\setlength{\rightskip}{0pt plus 5cm}const int {\bf LUMA\_\-INDEX}\mbox{[}16\mbox{]} = \{0, 1, 4, 5, 2, 3, 6, 7, 8, 9, 12, 13, 10, 11, 14, 15\}}}
\label{_p_b_macroblock_codec_8cpp_ae22bb3624a8e7a421b4e8008720d67a5}
\hypertarget{_p_b_macroblock_codec_8cpp_a12d5120842ae04b4f2743ad6b5fc6f74}{
\index{PBMacroblockCodec.cpp@{PBMacroblockCodec.cpp}!LUMA\_\-INDEX\_\-INV@{LUMA\_\-INDEX\_\-INV}}
\index{LUMA\_\-INDEX\_\-INV@{LUMA\_\-INDEX\_\-INV}!PBMacroblockCodec.cpp@{PBMacroblockCodec.cpp}}
\subsubsection[{LUMA\_\-INDEX\_\-INV}]{\setlength{\rightskip}{0pt plus 5cm}const int {\bf LUMA\_\-INDEX\_\-INV}\mbox{[}16\mbox{]} = \{0, 1, 4, 5, 2, 3, 6, 7, 8, 9, 12, 13, 10, 11, 14, 15\}}}
\label{_p_b_macroblock_codec_8cpp_a12d5120842ae04b4f2743ad6b5fc6f74}
