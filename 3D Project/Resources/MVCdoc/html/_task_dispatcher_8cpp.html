<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MVC: MVCDecoder/TaskDispatcher.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MVCDecoder/TaskDispatcher.cpp File Reference</h1><code>#include &lt;cstdio&gt;</code><br/>
<code>#include &lt;iostream&gt;</code><br/>
<code>#include &lt;cstdlib&gt;</code><br/>
<code>#include &lt;memory&gt;</code><br/>
<code>#include &quot;<a class="el" href="_picture_info_8h_source.html">PictureInfo.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_arch_8h_source.html">Arch/Arch.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_configure_8h_source.html">Configure.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_sequence_param_8h_source.html">Codec/SequenceParam.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_a_frame_controller_8h_source.html">Controller/AFrameController.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_frame_controller___parallel_8h_source.html">Controller/FrameController_Parallel.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_sliding_window_8h_source.html">SlidingWindow.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_task_dispatcher_8cpp.html">RawData.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_codec_info_8h_source.html">CodecInfo.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_bitstream_8h_source.html">Codec/Bitstream.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_in_stream_8h_source.html">Stream/InStream.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_consts4_standard_8h_source.html">Codec/Consts4Standard.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for TaskDispatcher.cpp:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8cpp__incl.png" border="0" usemap="#_m_v_c_decoder_2_task_dispatcher_8cpp_map" alt=""/></div>
<map name="_m_v_c_decoder_2_task_dispatcher_8cpp_map" id="_m_v_c_decoder_2_task_dispatcher_8cpp">
<area shape="rect" id="node11" href="_picture_info_8h.html" title="PictureInfo.h" alt="" coords="248,238,341,267"/><area shape="rect" id="node30" href="_arch_8h.html" title="Arch/Arch.h" alt="" coords="135,160,225,190"/><area shape="rect" id="node34" href="_configure_8h.html" title="Configure.h" alt="" coords="1645,83,1731,112"/><area shape="rect" id="node36" href="_sequence_param_8h.html" title="Codec/SequenceParam.h" alt="" coords="1253,238,1424,267"/><area shape="rect" id="node40" href="_a_frame_controller_8h.html" title="Controller/AFrameController.h" alt="" coords="720,160,912,190"/><area shape="rect" id="node57" href="_sliding_window_8h.html" title="SlidingWindow.h" alt="" coords="440,238,557,267"/><area shape="rect" id="node63" href="_frame_controller___parallel_8h.html" title="Controller/FrameController_Parallel.h" alt="" coords="564,83,799,112"/><area shape="rect" id="node74" href="_codec_info_8h.html" title="CodecInfo.h" alt="" coords="1176,160,1267,190"/><area shape="rect" id="node79" href="_bitstream_8h.html" title="Codec/Bitstream.h" alt="" coords="656,238,787,267"/><area shape="rect" id="node82" href="_in_stream_8h.html" title="Stream/InStream.h" alt="" coords="987,160,1117,190"/><area shape="rect" id="node91" href="_consts4_standard_8h.html" title="Codec/Consts4Standard.h" alt="" coords="316,83,489,112"/><area shape="rect" id="node17" href="_types_8h.html" title="Types.h" alt="" coords="287,392,353,422"/><area shape="rect" id="node19" href="_macros_8h.html" title="Macros.h" alt="" coords="316,315,391,344"/><area shape="rect" id="node24" href="_debug_8h.html" title="Debug.h" alt="" coords="121,315,191,344"/><area shape="rect" id="node38" href="_array_list_8h.html" title="ArrayList.h" alt="" coords="1053,315,1139,344"/><area shape="rect" id="node42" href="_common_8h.html" title="Common.h" alt="" coords="516,315,601,344"/><area shape="rect" id="node51" href="_picture_param_8h.html" title="Codec/PictureParam.h" alt="" coords="1077,238,1229,267"/><area shape="rect" id="node54" href="_slice_param_8h.html" title="Codec/SliceParam.h" alt="" coords="861,238,1003,267"/></map>
</div>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8cpp__dep__incl.png" border="0" usemap="#_m_v_c_decoder_2_task_dispatcher_8cppdep_map" alt=""/></div>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtag_s_p_u_s_t_a_t_u_s.html">tagSPUSTATUS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_working_status.html">WorkingStatus</a></td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structtag_s_p_u_s_t_a_t_u_s.html">tagSPUSTATUS</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#aaff9aea8fd1035c913630082fa89861e">SPUSTATUS</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structtag_s_p_u_s_t_a_t_u_s.html">SPUSTATUS</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#a15a4699036bd1e013ed749094a8fca9b">SPUSTATUSALL</a> [MAX_SPU_NUM]</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0f">WORK_STATUS</a> { <a class="el" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a">WS_NONE</a>, 
<a class="el" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611">WS_RUNNING</a>, 
<a class="el" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e">WS_WAITING</a>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#a4d4510d185efabc073b3e0ca88053fb1">TransferParam</a> (<a class="el" href="structtag_s_p_u_s_t_a_t_u_s.html">SPUSTATUS</a> &amp;spu, <a class="el" href="struct_coding_pict_info.html">CodingPictInfo</a> *pictInfo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#a1e5512b854fe00784fa90b20538f53a8">WaitForSpu</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#a9bcd530a1adc34d2682d1c3f4efde83d">QueryFreeSPU</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#a683a180d77fb88a0f2a3d94bb592be39">QueryFreeAll</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#a5eb536390124a07fc11778cc184e7d60">DispatchTask</a> (<a class="el" href="struct_coding_pict_info.html">CodingPictInfo</a> *pictInfo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#a1d60dff3d8b50942f03375c11e724af2">ProcessFrames</a> ()</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_working_status.html">WorkingStatus</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MVCThreadEntry&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#a2bef13de19406924682c9866f1b9aa15">decodeframe_i</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MVCThreadEntry&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#a01af4dde438ce227a4bbd77c704f2d37">decodeframe_p</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MVCThreadEntry&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#ab85bffa192c32e8cd2d17a5fd100f15c">decodeframe_b</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_a_frame_controller.html">AFrameController</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_task_dispatcher_8cpp.html#ab5d80279fc1eb333a1b618fee7c72293">frameController</a></td></tr>
</table>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="aaff9aea8fd1035c913630082fa89861e"></a><!-- doxytag: member="TaskDispatcher.cpp::SPUSTATUS" ref="aaff9aea8fd1035c913630082fa89861e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structtag_s_p_u_s_t_a_t_u_s.html">tagSPUSTATUS</a>  <a class="el" href="structtag_s_p_u_s_t_a_t_u_s.html">SPUSTATUS</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a15a4699036bd1e013ed749094a8fca9b"></a><!-- doxytag: member="TaskDispatcher.cpp::SPUSTATUSALL" ref="a15a4699036bd1e013ed749094a8fca9b" args="[MAX_SPU_NUM]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structtag_s_p_u_s_t_a_t_u_s.html">SPUSTATUS</a> <a class="el" href="_task_dispatcher_8cpp.html#a15a4699036bd1e013ed749094a8fca9b">SPUSTATUSALL</a>[MAX_SPU_NUM]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a02bbd7266c23c65371861ca915327f0f"></a><!-- doxytag: member="TaskDispatcher.cpp::WORK_STATUS" ref="a02bbd7266c23c65371861ca915327f0f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0f">WORK_STATUS</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a"></a><!-- doxytag: member="WS_NONE" ref="a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a" args="" -->WS_NONE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611"></a><!-- doxytag: member="WS_RUNNING" ref="a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611" args="" -->WS_RUNNING</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e"></a><!-- doxytag: member="WS_WAITING" ref="a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e" args="" -->WS_WAITING</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p><div class="fragment"><pre class="fragment"><a name="l00033"></a>00033              {
<a name="l00034"></a>00034         <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a">WS_NONE</a>, <span class="comment">// No code</span>
<a name="l00035"></a>00035         <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611">WS_RUNNING</a>, <span class="comment">// Running</span>
<a name="l00036"></a>00036         <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e">WS_WAITING</a> <span class="comment">// Pending</span>
<a name="l00037"></a>00037 } <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0f">WORK_STATUS</a>; <span class="comment">// Spe Status</span>
</pre></div></p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a5eb536390124a07fc11778cc184e7d60"></a><!-- doxytag: member="TaskDispatcher.cpp::DispatchTask" ref="a5eb536390124a07fc11778cc184e7d60" args="(CodingPictInfo *pictInfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DispatchTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_coding_pict_info.html">CodingPictInfo</a> *&nbsp;</td>
          <td class="paramname"> <em>pictInfo</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00123"></a>00123 {
<a name="l00124"></a>00124         MVCThreadEntry *pEntry;
<a name="l00125"></a>00125         <span class="keywordflow">if</span> (pictInfo-&gt;<a class="code" href="struct_coding_pict_info.html#a6bfb22b57d0d223546150c71e125fb39">PictType</a> == <a class="code" href="_picture_info_8h.html#a385c44f6fb256e5716a2302a5b940388ad73ce3031f74fa8f39aa61bd7df91d8c">PICT_IFRAME</a>)
<a name="l00126"></a>00126                 pEntry = <a class="code" href="_task_dispatcher_8cpp.html#a2bef13de19406924682c9866f1b9aa15">decodeframe_i</a>;
<a name="l00127"></a>00127         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pictInfo-&gt;<a class="code" href="struct_coding_pict_info.html#a6bfb22b57d0d223546150c71e125fb39">PictType</a> == <a class="code" href="_picture_info_8h.html#a385c44f6fb256e5716a2302a5b940388a4a4a4b0f98ff5f5d64cddef4d44d3fdd">PICT_PFRAME</a>)
<a name="l00128"></a>00128                 pEntry = <a class="code" href="_task_dispatcher_8cpp.html#a01af4dde438ce227a4bbd77c704f2d37">decodeframe_p</a>;
<a name="l00129"></a>00129         <span class="keywordflow">else</span> <span class="comment">//if (pictInfo-&gt;PictType == PICT_BFRAME)</span>
<a name="l00130"></a>00130                 pEntry = <a class="code" href="_task_dispatcher_8cpp.html#ab85bffa192c32e8cd2d17a5fd100f15c">decodeframe_b</a>;
<a name="l00131"></a>00131         <a class="code" href="_debug_8h.html#aa184ead4583be424a256b0ee06fea736">DEBUGINFP</a>(2100000000, (<span class="stringliteral">&quot;Working (%d,%d)&quot;</span>, pictInfo-&gt;<a class="code" href="struct_coding_pict_info.html#ad85dae4751165ea3cbb8f7b8c6e61dc3">timeId</a>, pictInfo-&gt;<a class="code" href="struct_coding_pict_info.html#a987595091bfba91b3166b04bca988697">viewId</a>));
<a name="l00132"></a>00132         <span class="keywordflow">while</span> (1)
<a name="l00133"></a>00133         {
<a name="l00134"></a>00134                 <a class="code" href="_task_dispatcher_8cpp.html#a1e5512b854fe00784fa90b20538f53a8">WaitForSpu</a>();
<a name="l00135"></a>00135                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_configure.html#ac48067b7f9d47427e932b4c44f4c9248">Configure::NUM_OF_SPU</a>; ++i)
<a name="l00136"></a>00136                 {
<a name="l00137"></a>00137                         <span class="keywordflow">if</span> (<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ct==pictInfo-&gt;<a class="code" href="struct_coding_pict_info.html#a6bfb22b57d0d223546150c71e125fb39">PictType</a> &amp;&amp;  <a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws==<a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e">WS_WAITING</a>)
<a name="l00138"></a>00138                         {
<a name="l00139"></a>00139                                 <a class="code" href="_debug_8h.html#aa184ead4583be424a256b0ee06fea736">DEBUGINFP</a>(10000, (<span class="stringliteral">&quot;Dispatch to %d\n&quot;</span>, i));
<a name="l00140"></a>00140                                 MVCWriteSignal(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave, <a class="code" href="_picture_info_8h.html#a562b615ec34d4eb99440e76b9b8a9174a435cbaa1d931366ee087951abb4d6f0a">CTS_WORKNEXT</a>);
<a name="l00141"></a>00141                                 <a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws = <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611">WS_RUNNING</a>;
<a name="l00142"></a>00142                                 
<a name="l00143"></a>00143                                 <a class="code" href="_task_dispatcher_8cpp.html#a4d4510d185efabc073b3e0ca88053fb1">TransferParam</a>(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i], pictInfo);
<a name="l00144"></a>00144                                 return ;
<a name="l00145"></a>00145                         }
<a name="l00146"></a>00146                 }
<a name="l00147"></a>00147                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; Configure::NUM_OF_SPU; ++i)
<a name="l00148"></a>00148                 {
<a name="l00149"></a>00149                         <span class="keywordflow">if</span> (<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws==<a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a">WS_NONE</a>)
<a name="l00150"></a>00150                         {
<a name="l00151"></a>00151                                 <a class="code" href="_debug_8h.html#aa184ead4583be424a256b0ee06fea736">DEBUGINFP</a>(10000, (<span class="stringliteral">&quot;Dispatch N to %d\n&quot;</span>, i));
<a name="l00152"></a>00152 
<a name="l00153"></a>00153                                 <a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave = MVCCreateThread(pEntry);
<a name="l00154"></a>00154                                 <a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ct = pictInfo-&gt;<a class="code" href="struct_coding_pict_info.html#a6bfb22b57d0d223546150c71e125fb39">PictType</a>;
<a name="l00155"></a>00155                                 <a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws = <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611">WS_RUNNING</a>;
<a name="l00156"></a>00156                                 
<a name="l00157"></a>00157                                 <a class="code" href="_task_dispatcher_8cpp.html#a4d4510d185efabc073b3e0ca88053fb1">TransferParam</a>(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i], pictInfo);
<a name="l00158"></a>00158                                 return ;
<a name="l00159"></a>00159                         }
<a name="l00160"></a>00160                 }
<a name="l00161"></a>00161                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; Configure::NUM_OF_SPU; ++i)
<a name="l00162"></a>00162                 {
<a name="l00163"></a>00163                         <span class="keywordflow">if</span> (<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws==<a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e">WS_WAITING</a>)
<a name="l00164"></a>00164                         {
<a name="l00165"></a>00165                                 <a class="code" href="_debug_8h.html#aa184ead4583be424a256b0ee06fea736">DEBUGINFP</a>(10000, (<span class="stringliteral">&quot;Dispatch DN to %d\n&quot;</span>, i));
<a name="l00166"></a>00166                                 <a class="code" href="_debug_8h.html#a3f7e58a01a8beb987f565ac1a304708c">DEBUGBLK</a>(10, <span class="stringliteral">&quot;Dispatch&quot;</span>);
<a name="l00167"></a>00167                                 MVCWriteSignal(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave, <a class="code" href="_picture_info_8h.html#a562b615ec34d4eb99440e76b9b8a9174a559a610ab332f3ca38d82e7900772e99">CTS_HALT</a>);
<a name="l00168"></a>00168                                 MVCReadSignal(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave);
<a name="l00169"></a>00169                                 MVCWaitThread(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave);
<a name="l00170"></a>00170                                 MVCDestroyThread(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave);
<a name="l00171"></a>00171 
<a name="l00172"></a>00172                                 <a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave = MVCCreateThread(pEntry);
<a name="l00173"></a>00173                                 <a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ct = pictInfo-&gt;<a class="code" href="struct_coding_pict_info.html#a6bfb22b57d0d223546150c71e125fb39">PictType</a>;
<a name="l00174"></a>00174                                 <a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws = <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611">WS_RUNNING</a>;
<a name="l00175"></a>00175                                 
<a name="l00176"></a>00176                                 <a class="code" href="_task_dispatcher_8cpp.html#a4d4510d185efabc073b3e0ca88053fb1">TransferParam</a>(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i], pictInfo);
<a name="l00177"></a>00177                                 return ;
<a name="l00178"></a>00178                         }
<a name="l00179"></a>00179                 }
<a name="l00180"></a>00180         }
<a name="l00181"></a>00181 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60_cgraph.png" border="0" usemap="#_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60_cgraph_map" alt=""></div>
<map name="_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60_cgraph_map" id="_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60_cgraph">
<area shape="rect" id="node3" href="_task_dispatcher_8cpp.html#a4d4510d185efabc073b3e0ca88053fb1" title="TransferParam" alt="" coords="155,5,261,35"/><area shape="rect" id="node5" href="_task_dispatcher_8cpp.html#a1e5512b854fe00784fa90b20538f53a8" title="WaitForSpu" alt="" coords="163,59,253,88"/><area shape="rect" id="node7" href="class_a_frame_controller.html#afd4834463eebfc33536fed009bfb966c" title="AFrameController::OnFrameComplete" alt="" coords="309,59,549,88"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60_icgraph.png" border="0" usemap="#_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60_icgraph_map" alt=""></div>
<map name="_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60_icgraph_map" id="_task_dispatcher_8cpp_a5eb536390124a07fc11778cc184e7d60_icgraph">
<area shape="rect" id="node3" href="_task_dispatcher_8h.html#a1d60dff3d8b50942f03375c11e724af2" title="ProcessFrames" alt="" coords="155,5,269,35"/><area shape="rect" id="node5" href="_mvc_decoder_8cpp.html#ac0f2228420376f4db7e1274f2b41667c" title="main" alt="" coords="317,5,368,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1d60dff3d8b50942f03375c11e724af2"></a><!-- doxytag: member="TaskDispatcher.cpp::ProcessFrames" ref="a1d60dff3d8b50942f03375c11e724af2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProcessFrames </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00184"></a>00184 {
<a name="l00185"></a>00185         <a class="code" href="class_sliding_window.html">SlidingWindow</a> sw;
<a name="l00186"></a>00186         <a class="code" href="class_bitstream_data.html">BitstreamData</a> bd(&amp;sw, <a class="code" href="class_configure.html#a0e7dd4e79c40df653c7ca73ecbab5d39">Configure::outputFileName</a>);
<a name="l00187"></a>00187         <span class="keywordflow">while</span> (1)
<a name="l00188"></a>00188         {
<a name="l00189"></a>00189                 <span class="keywordtype">int</span> viewCount = <a class="code" href="class_codec_info.html#ad439fd8062a03d868dfe9c9b615b747e">CodecInfo::GetInstance</a>().<a class="code" href="class_codec_info.html#aee785011cec77ff3c0c646b498fe1e7d">sps</a>.<a class="code" href="struct_sequence_parameters_set.html#af32c7819f630856ccd99aaf78e8f656c">viewCount</a>;
<a name="l00190"></a>00190                 <span class="keywordflow">if</span> (viewCount)
<a name="l00191"></a>00191                         <span class="keywordflow">break</span>;
<a name="l00192"></a>00192                 Sleep(10);
<a name="l00193"></a>00193         }
<a name="l00194"></a>00194         <a class="code" href="struct_sequence_parameters_set.html">SequenceParametersSet</a> &amp;sps = <a class="code" href="class_codec_info.html#ad439fd8062a03d868dfe9c9b615b747e">CodecInfo::GetInstance</a>().<a class="code" href="class_codec_info.html#aee785011cec77ff3c0c646b498fe1e7d">sps</a>;
<a name="l00195"></a>00195         <a class="code" href="class_raw_data.html">RawData</a> data(&amp;sw, <a class="code" href="class_configure.html#aa6d6606a0e2fb33b2f828f207df7e140">Configure::inputPattern</a>);
<a name="l00196"></a>00196         <a class="code" href="class_frame_controller___parallel.html">FrameController_Parallel</a> fc(&amp;sw);
<a name="l00197"></a>00197         <a class="code" href="_task_dispatcher_8cpp.html#ab5d80279fc1eb333a1b618fee7c72293">frameController</a> = &amp;fc;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199         printf(<span class="stringliteral">&quot;Decoding...\n&quot;</span>);
<a name="l00200"></a>00200         memset(&amp;<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>));
<a name="l00201"></a>00201 
<a name="l00202"></a>00202         <span class="keywordtype">long</span> start = <a class="code" href="_arch_8h.html#aae16a08f453f828deb4ccd262d87a278">MVCGetCurrentTime</a>();
<a name="l00203"></a>00203 
<a name="l00204"></a>00204         <span class="keywordflow">while</span> (!<a class="code" href="_task_dispatcher_8cpp.html#ab5d80279fc1eb333a1b618fee7c72293">frameController</a>-&gt;<a class="code" href="class_a_frame_controller.html#a92ba4b7f8c0c84fff8be7203fae5221d">ProcessCompleted</a>())
<a name="l00205"></a>00205         {
<a name="l00206"></a>00206                 <a class="code" href="_task_dispatcher_8cpp.html#a9bcd530a1adc34d2682d1c3f4efde83d">QueryFreeSPU</a>();
<a name="l00207"></a>00207                 <span class="keywordflow">if</span> (!<a class="code" href="_task_dispatcher_8cpp.html#a1e5512b854fe00784fa90b20538f53a8">WaitForSpu</a>())
<a name="l00208"></a>00208                         <span class="keywordflow">continue</span>;
<a name="l00209"></a>00209                 <a class="code" href="struct_coding_pict_info.html">CodingPictInfo</a> *cpi = <a class="code" href="_task_dispatcher_8cpp.html#ab5d80279fc1eb333a1b618fee7c72293">frameController</a>-&gt;<a class="code" href="class_a_frame_controller.html#acc142fa10ce535ee171698af719c4d27">GetNextProcessing</a>();
<a name="l00210"></a>00210                 <span class="keywordflow">if</span> (cpi)
<a name="l00211"></a>00211                 {
<a name="l00212"></a>00212                         <a class="code" href="_task_dispatcher_8cpp.html#a5eb536390124a07fc11778cc184e7d60">DispatchTask</a>(cpi);
<a name="l00213"></a>00213                 }
<a name="l00214"></a>00214                 <span class="keywordflow">else</span>
<a name="l00215"></a>00215                         Sleep(1);
<a name="l00216"></a>00216         }
<a name="l00217"></a>00217         <a class="code" href="_task_dispatcher_8cpp.html#a683a180d77fb88a0f2a3d94bb592be39">QueryFreeAll</a>();
<a name="l00218"></a>00218 
<a name="l00219"></a>00219         <span class="keywordtype">long</span> stop = <a class="code" href="_arch_8h.html#aae16a08f453f828deb4ccd262d87a278">MVCGetCurrentTime</a>();
<a name="l00220"></a>00220         printf(<span class="stringliteral">&quot;Time Used:%ld\n&quot;</span>, stop - start); 
<a name="l00221"></a>00221 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8cpp_a1d60dff3d8b50942f03375c11e724af2_cgraph.png" border="0" usemap="#_task_dispatcher_8cpp_a1d60dff3d8b50942f03375c11e724af2_cgraph_map" alt=""></div>
<map name="_task_dispatcher_8cpp_a1d60dff3d8b50942f03375c11e724af2_cgraph_map" id="_task_dispatcher_8cpp_a1d60dff3d8b50942f03375c11e724af2_cgraph">
<area shape="rect" id="node3" href="_task_dispatcher_8cpp.html#a5eb536390124a07fc11778cc184e7d60" title="DispatchTask" alt="" coords="240,56,341,85"/><area shape="rect" id="node7" href="_task_dispatcher_8cpp.html#a1e5512b854fe00784fa90b20538f53a8" title="WaitForSpu" alt="" coords="653,240,744,269"/><area shape="rect" id="node11" href="class_codec_info.html#ad439fd8062a03d868dfe9c9b615b747e" title="CodecInfo::GetInstance" alt="" coords="212,160,369,189"/><area shape="rect" id="node15" href="class_a_frame_controller.html#acc142fa10ce535ee171698af719c4d27" title="AFrameController::GetNextProcessing" alt="" coords="169,213,412,243"/><area shape="rect" id="node17" href="_arch_8h.html#aae16a08f453f828deb4ccd262d87a278" title="MVCGetCurrentTime" alt="" coords="220,267,361,296"/><area shape="rect" id="node19" href="class_a_frame_controller.html#a92ba4b7f8c0c84fff8be7203fae5221d" title="AFrameController::ProcessCompleted" alt="" coords="171,320,411,349"/><area shape="rect" id="node21" href="_task_dispatcher_8cpp.html#a683a180d77fb88a0f2a3d94bb592be39" title="QueryFreeAll" alt="" coords="241,424,340,453"/><area shape="rect" id="node24" href="_task_dispatcher_8cpp.html#a9bcd530a1adc34d2682d1c3f4efde83d" title="QueryFreeSPU" alt="" coords="479,372,588,401"/><area shape="rect" id="node5" href="_task_dispatcher_8cpp.html#a4d4510d185efabc073b3e0ca88053fb1" title="TransferParam" alt="" coords="480,5,587,35"/><area shape="rect" id="node9" href="class_a_frame_controller.html#afd4834463eebfc33536fed009bfb966c" title="AFrameController::OnFrameComplete" alt="" coords="792,332,1032,361"/><area shape="rect" id="node13" href="class_codec_info.html#ab2ecf673aaa2480fafb0b3d22896e4b6" title="CodecInfo::CodecInfo" alt="" coords="461,160,605,189"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8cpp_a1d60dff3d8b50942f03375c11e724af2_icgraph.png" border="0" usemap="#_task_dispatcher_8cpp_a1d60dff3d8b50942f03375c11e724af2_icgraph_map" alt=""></div>
<map name="_task_dispatcher_8cpp_a1d60dff3d8b50942f03375c11e724af2_icgraph_map" id="_task_dispatcher_8cpp_a1d60dff3d8b50942f03375c11e724af2_icgraph">
<area shape="rect" id="node3" href="_mvc_decoder_8cpp.html#ac0f2228420376f4db7e1274f2b41667c" title="main" alt="" coords="168,5,219,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a683a180d77fb88a0f2a3d94bb592be39"></a><!-- doxytag: member="TaskDispatcher.cpp::QueryFreeAll" ref="a683a180d77fb88a0f2a3d94bb592be39" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void QueryFreeAll </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00099"></a>00099 {
<a name="l00100"></a>00100         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_configure.html#ac48067b7f9d47427e932b4c44f4c9248">Configure::NUM_OF_SPU</a>; ++i)
<a name="l00101"></a>00101         {
<a name="l00102"></a>00102                 <span class="keywordflow">if</span> (<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws == <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611">WS_RUNNING</a>)
<a name="l00103"></a>00103                 {
<a name="l00104"></a>00104                         <span class="keywordflow">while</span> (!MVCIsSignaled(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave))
<a name="l00105"></a>00105                                 <a class="code" href="_task_dispatcher_8cpp.html#a9bcd530a1adc34d2682d1c3f4efde83d">QueryFreeSPU</a>();
<a name="l00106"></a>00106                         MVCReadSignal(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave);
<a name="l00107"></a>00107                         <a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws = <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e">WS_WAITING</a>;
<a name="l00108"></a>00108                         <a class="code" href="_task_dispatcher_8cpp.html#ab5d80279fc1eb333a1b618fee7c72293">frameController</a>-&gt;<a class="code" href="class_a_frame_controller.html#afd4834463eebfc33536fed009bfb966c">OnFrameComplete</a>(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].pif);<span class="comment">//---</span>
<a name="l00109"></a>00109                 }
<a name="l00110"></a>00110                 <span class="keywordflow">if</span> (<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws==<a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e">WS_WAITING</a>)
<a name="l00111"></a>00111                 {
<a name="l00112"></a>00112                         MVCWriteSignal(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave, <a class="code" href="_picture_info_8h.html#a562b615ec34d4eb99440e76b9b8a9174a559a610ab332f3ca38d82e7900772e99">CTS_HALT</a>);
<a name="l00113"></a>00113                         MVCReadSignal(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave);
<a name="l00114"></a>00114                         MVCWaitThread(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave);
<a name="l00115"></a>00115                         MVCDestroyThread(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave);
<a name="l00116"></a>00116 
<a name="l00117"></a>00117                         <a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws = <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a">WS_NONE</a>;
<a name="l00118"></a>00118                 }
<a name="l00119"></a>00119         }
<a name="l00120"></a>00120 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39_cgraph.png" border="0" usemap="#_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39_cgraph_map" alt=""></div>
<map name="_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39_cgraph_map" id="_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39_cgraph">
<area shape="rect" id="node3" href="class_a_frame_controller.html#afd4834463eebfc33536fed009bfb966c" title="AFrameController::OnFrameComplete" alt="" coords="451,5,691,35"/><area shape="rect" id="node5" href="_task_dispatcher_8cpp.html#a9bcd530a1adc34d2682d1c3f4efde83d" title="QueryFreeSPU" alt="" coords="153,31,263,60"/><area shape="rect" id="node7" href="_task_dispatcher_8cpp.html#a1e5512b854fe00784fa90b20538f53a8" title="WaitForSpu" alt="" coords="312,31,403,60"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39_icgraph.png" border="0" usemap="#_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39_icgraph_map" alt=""></div>
<map name="_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39_icgraph_map" id="_task_dispatcher_8cpp_a683a180d77fb88a0f2a3d94bb592be39_icgraph">
<area shape="rect" id="node3" href="_task_dispatcher_8h.html#a1d60dff3d8b50942f03375c11e724af2" title="ProcessFrames" alt="" coords="152,5,267,35"/><area shape="rect" id="node5" href="_mvc_decoder_8cpp.html#ac0f2228420376f4db7e1274f2b41667c" title="main" alt="" coords="315,5,365,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9bcd530a1adc34d2682d1c3f4efde83d"></a><!-- doxytag: member="TaskDispatcher.cpp::QueryFreeSPU" ref="a9bcd530a1adc34d2682d1c3f4efde83d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void QueryFreeSPU </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00088"></a>00088 {
<a name="l00089"></a>00089         <span class="keywordflow">while</span> (!<a class="code" href="_task_dispatcher_8cpp.html#a1e5512b854fe00784fa90b20538f53a8">WaitForSpu</a>())
<a name="l00090"></a>00090         {
<a name="l00091"></a>00091                 MVCThreadHandle threads[<a class="code" href="_configure_8h.html#ab58e1993d3e199885b35a2578cd2411a">MAX_SPU_NUM</a>];
<a name="l00092"></a>00092                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_configure.html#ac48067b7f9d47427e932b4c44f4c9248">Configure::NUM_OF_SPU</a>; ++i)
<a name="l00093"></a>00093                         threads[i] = <a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave;
<a name="l00094"></a>00094                 WaitSignals(threads, Configure::NUM_OF_SPU);
<a name="l00095"></a>00095         }
<a name="l00096"></a>00096 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d_cgraph.png" border="0" usemap="#_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d_cgraph_map" alt=""></div>
<map name="_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d_cgraph_map" id="_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d_cgraph">
<area shape="rect" id="node3" href="_task_dispatcher_8cpp.html#a1e5512b854fe00784fa90b20538f53a8" title="WaitForSpu" alt="" coords="165,5,256,35"/><area shape="rect" id="node5" href="class_a_frame_controller.html#afd4834463eebfc33536fed009bfb966c" title="AFrameController::OnFrameComplete" alt="" coords="304,5,544,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d_icgraph.png" border="0" usemap="#_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d_icgraph_map" alt=""></div>
<map name="_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d_icgraph_map" id="_task_dispatcher_8cpp_a9bcd530a1adc34d2682d1c3f4efde83d_icgraph">
<area shape="rect" id="node3" href="_task_dispatcher_8h.html#a1d60dff3d8b50942f03375c11e724af2" title="ProcessFrames" alt="" coords="312,5,427,35"/><area shape="rect" id="node7" href="_task_dispatcher_8cpp.html#a683a180d77fb88a0f2a3d94bb592be39" title="QueryFreeAll" alt="" coords="165,31,264,60"/><area shape="rect" id="node5" href="_mvc_decoder_8cpp.html#ac0f2228420376f4db7e1274f2b41667c" title="main" alt="" coords="475,5,525,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4d4510d185efabc073b3e0ca88053fb1"></a><!-- doxytag: member="TaskDispatcher.cpp::TransferParam" ref="a4d4510d185efabc073b3e0ca88053fb1" args="(SPUSTATUS &amp;spu, CodingPictInfo *pictInfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TransferParam </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtag_s_p_u_s_t_a_t_u_s.html">SPUSTATUS</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>spu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_coding_pict_info.html">CodingPictInfo</a> *&nbsp;</td>
          <td class="paramname"> <em>pictInfo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00061"></a>00061 {
<a name="l00062"></a>00062         spu.<a class="code" href="structtag_s_p_u_s_t_a_t_u_s.html#a06878bf12155793c0264fd8e3ca8a4c8">pif</a> = pictInfo;
<a name="l00063"></a>00063         MVCWriteSignal(spu.<a class="code" href="structtag_s_p_u_s_t_a_t_u_s.html#a527110a06626a2918c8f2129daafae57">slave</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)pictInfo);
<a name="l00064"></a>00064 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8cpp_a4d4510d185efabc073b3e0ca88053fb1_icgraph.png" border="0" usemap="#_task_dispatcher_8cpp_a4d4510d185efabc073b3e0ca88053fb1_icgraph_map" alt=""></div>
<map name="_task_dispatcher_8cpp_a4d4510d185efabc073b3e0ca88053fb1_icgraph_map" id="_task_dispatcher_8cpp_a4d4510d185efabc073b3e0ca88053fb1_icgraph">
<area shape="rect" id="node3" href="_task_dispatcher_8cpp.html#a5eb536390124a07fc11778cc184e7d60" title="DispatchTask" alt="" coords="160,5,261,35"/><area shape="rect" id="node5" href="_task_dispatcher_8h.html#a1d60dff3d8b50942f03375c11e724af2" title="ProcessFrames" alt="" coords="309,5,424,35"/><area shape="rect" id="node7" href="_mvc_decoder_8cpp.html#ac0f2228420376f4db7e1274f2b41667c" title="main" alt="" coords="472,5,523,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1e5512b854fe00784fa90b20538f53a8"></a><!-- doxytag: member="TaskDispatcher.cpp::WaitForSpu" ref="a1e5512b854fe00784fa90b20538f53a8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool WaitForSpu </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00068"></a>00068 {
<a name="l00069"></a>00069         <span class="keywordtype">bool</span> ret = <span class="keyword">false</span>;
<a name="l00070"></a>00070         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_configure.html#ac48067b7f9d47427e932b4c44f4c9248">Configure::NUM_OF_SPU</a>; ++i)
<a name="l00071"></a>00071         {
<a name="l00072"></a>00072                 <span class="keywordflow">if</span> (<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws == <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa7bc615bf5944313f56fbd5664aa4b611">WS_RUNNING</a>)
<a name="l00073"></a>00073                         <span class="keywordflow">if</span> (MVCIsSignaled(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave))
<a name="l00074"></a>00074                         {
<a name="l00075"></a>00075                                 MVCReadSignal(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].slave);
<a name="l00076"></a>00076                                 <a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws = <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e">WS_WAITING</a>;
<a name="l00077"></a>00077                                 
<a name="l00078"></a>00078                                 <a class="code" href="_task_dispatcher_8cpp.html#ab5d80279fc1eb333a1b618fee7c72293">frameController</a>-&gt;<a class="code" href="class_a_frame_controller.html#afd4834463eebfc33536fed009bfb966c">OnFrameComplete</a>(<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].pif);
<a name="l00079"></a>00079                         }
<a name="l00080"></a>00080                 <span class="keywordflow">if</span> ((<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws == <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0fa3173e50a0138d43cc2a9619827aa879e">WS_WAITING</a>) ||
<a name="l00081"></a>00081                         (<a class="code" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a>.<a class="code" href="struct_working_status.html#a2f406a85ec2bf9b4b9c25eb8052e4fb3">spustatus</a>[i].ws == <a class="code" href="_task_dispatcher_8cpp.html#a02bbd7266c23c65371861ca915327f0faf1716d3ff8efc8b9382e3c32e70ff46a">WS_NONE</a>))
<a name="l00082"></a>00082                         ret = <span class="keyword">true</span>;
<a name="l00083"></a>00083         }
<a name="l00084"></a>00084         <span class="keywordflow">return</span> ret;
<a name="l00085"></a>00085 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8_cgraph.png" border="0" usemap="#_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8_cgraph_map" alt=""></div>
<map name="_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8_cgraph_map" id="_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8_cgraph">
<area shape="rect" id="node3" href="class_a_frame_controller.html#afd4834463eebfc33536fed009bfb966c" title="AFrameController::OnFrameComplete" alt="" coords="144,5,384,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8_icgraph.png" border="0" usemap="#_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8_icgraph_map" alt=""></div>
<map name="_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8_icgraph_map" id="_task_dispatcher_8cpp_a1e5512b854fe00784fa90b20538f53a8_icgraph">
<area shape="rect" id="node3" href="_task_dispatcher_8cpp.html#a5eb536390124a07fc11778cc184e7d60" title="DispatchTask" alt="" coords="304,5,405,35"/><area shape="rect" id="node5" href="_task_dispatcher_8h.html#a1d60dff3d8b50942f03375c11e724af2" title="ProcessFrames" alt="" coords="453,83,568,112"/><area shape="rect" id="node10" href="_task_dispatcher_8cpp.html#a9bcd530a1adc34d2682d1c3f4efde83d" title="QueryFreeSPU" alt="" coords="145,109,255,139"/><area shape="rect" id="node7" href="_mvc_decoder_8cpp.html#ac0f2228420376f4db7e1274f2b41667c" title="main" alt="" coords="616,83,667,112"/><area shape="rect" id="node13" href="_task_dispatcher_8cpp.html#a683a180d77fb88a0f2a3d94bb592be39" title="QueryFreeAll" alt="" coords="305,160,404,189"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ab85bffa192c32e8cd2d17a5fd100f15c"></a><!-- doxytag: member="TaskDispatcher.cpp::decodeframe_b" ref="ab85bffa192c32e8cd2d17a5fd100f15c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MVCThreadEntry decodeframe_b</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2bef13de19406924682c9866f1b9aa15"></a><!-- doxytag: member="TaskDispatcher.cpp::decodeframe_i" ref="a2bef13de19406924682c9866f1b9aa15" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MVCThreadEntry decodeframe_i</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a01af4dde438ce227a4bbd77c704f2d37"></a><!-- doxytag: member="TaskDispatcher.cpp::decodeframe_p" ref="a01af4dde438ce227a4bbd77c704f2d37" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MVCThreadEntry decodeframe_p</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab5d80279fc1eb333a1b618fee7c72293"></a><!-- doxytag: member="TaskDispatcher.cpp::frameController" ref="ab5d80279fc1eb333a1b618fee7c72293" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_a_frame_controller.html">AFrameController</a>* <a class="el" href="_task_dispatcher_8cpp.html#ab5d80279fc1eb333a1b618fee7c72293">frameController</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa0dd44fdd96656327b5f2d0ebd634930"></a><!-- doxytag: member="TaskDispatcher.cpp::wk" ref="aa0dd44fdd96656327b5f2d0ebd634930" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_working_status.html">WorkingStatus</a> <a class="el" href="_task_dispatcher_8cpp.html#aa0dd44fdd96656327b5f2d0ebd634930">wk</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Jun 10 20:58:09 2010 for MVC by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
