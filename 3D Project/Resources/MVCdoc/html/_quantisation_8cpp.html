<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MVC: MVCDecoder/Codec/Quantisation.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MVCDecoder/Codec/Quantisation.cpp File Reference</h1><code>#include &quot;<a class="el" href="_quantisation_8cpp.html">Quantisation.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_common_8h_source.html">Common.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for Quantisation.cpp:</div>
<div class="dynsection">
<div class="center"><img src="_quantisation_8cpp__incl.png" border="0" usemap="#_m_v_c_decoder_2_codec_2_quantisation_8cpp_map" alt=""/></div>
<map name="_m_v_c_decoder_2_codec_2_quantisation_8cpp_map" id="_m_v_c_decoder_2_codec_2_quantisation_8cpp">
<area shape="rect" id="node4" href="_common_8h.html" title="Common.h" alt="" coords="131,83,216,112"/><area shape="rect" id="node13" href="_types_8h.html" title="Types.h" alt="" coords="272,160,339,190"/></map>
</div>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<div class="center"><img src="_quantisation_8cpp__dep__incl.png" border="0" usemap="#_m_v_c_decoder_2_codec_2_quantisation_8cppdep_map" alt=""/></div>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quantisation_8cpp.html#af304d1aed221004504fa9475387cf32e">quant4x4_c</a> (<a class="el" href="_quantisation_8h.html#aaf238cae50a8b754d811c856535578b4">param_quant4</a> dt, const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> Qp, <a class="el" href="_types_8h.html#a115ba3a1b24a8702355c5dbd61ce01e0">int32_t</a> is_intra)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quantisation_8cpp.html#a5985492c5cf012e5d7051f11fa86821c">iquant4x4_c</a> (<a class="el" href="_quantisation_8h.html#aaf238cae50a8b754d811c856535578b4">param_quant4</a> dt, const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> Qp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quantisation_8cpp.html#a6096528e049a8f3c2a463926db773e42">iquant8x8_c</a> (<a class="el" href="_quantisation_8h.html#a8bf84fa166851783a628e4a4e5a48888">param_quant8</a> dt, const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> Qp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quantisation_8cpp.html#aeb2be591bcf2be1d22c5bb6a23537c78">quant4x4dc_c</a> (<a class="el" href="_quantisation_8h.html#aaf238cae50a8b754d811c856535578b4">param_quant4</a> dt, const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> Qp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quantisation_8cpp.html#a480f9f1c650257964853863d5683ed34">iquant4x4dc_c</a> (<a class="el" href="_quantisation_8h.html#aaf238cae50a8b754d811c856535578b4">param_quant4</a> dt, const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> Qp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quantisation_8cpp.html#a805f7902eccf615fd707997d06e0c1ff">quant2x2dc_c</a> (<a class="el" href="_quantisation_8h.html#aa2419725a4ad76a3137ed57a1789cf8e">param_quant2</a> dt, const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> Qp, <a class="el" href="_types_8h.html#a115ba3a1b24a8702355c5dbd61ce01e0">int32_t</a> is_intra)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quantisation_8cpp.html#ad8c9813079b1dac9e7c7ab3d40a9a212">iquant2x2dc_c</a> (<a class="el" href="_quantisation_8h.html#aa2419725a4ad76a3137ed57a1789cf8e">param_quant2</a> dt, const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> Qp)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quantisation_8cpp.html#a42abedc99a2c36f53b9cbb3fddf75992">quant</a> [6][16]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quantisation_8cpp.html#a95540d880b7a1d95ae0df24d2d8a7ee9">dequant</a> [6][16]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="_types_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quantisation_8cpp.html#abbaef37d144eaea4f1f967739e320898">dequant64</a> [6][64]</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ad8c9813079b1dac9e7c7ab3d40a9a212"></a><!-- doxytag: member="Quantisation.cpp::iquant2x2dc_c" ref="ad8c9813079b1dac9e7c7ab3d40a9a212" args="(param_quant2 dt, const int32 Qp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iquant2x2dc_c </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_quantisation_8h.html#aa2419725a4ad76a3137ed57a1789cf8e">param_quant2</a>&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>&nbsp;</td>
          <td class="paramname"> <em>Qp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00194"></a>00194 {
<a name="l00195"></a>00195         <span class="comment">/*register */</span><a class="code" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> * <span class="keyword">const</span> data = dt[0];
<a name="l00196"></a>00196         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> qbits = Qp / 6 - 1;
<a name="l00197"></a>00197         <span class="keywordflow">if</span> (qbits &gt; -1 )
<a name="l00198"></a>00198         {
<a name="l00199"></a>00199                 <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> dmf = <a class="code" href="_quantisation_8cpp.html#a95540d880b7a1d95ae0df24d2d8a7ee9">dequant</a>[Qp % 6][0] &lt;&lt; qbits;
<a name="l00200"></a>00200                 data[0] = data[0] * dmf;
<a name="l00201"></a>00201                 data[1] = data[1] * dmf;
<a name="l00202"></a>00202                 data[2] = data[2] * dmf;
<a name="l00203"></a>00203                 data[3] = data[3] * dmf;
<a name="l00204"></a>00204         }
<a name="l00205"></a>00205         <span class="keywordflow">else</span>
<a name="l00206"></a>00206         {
<a name="l00207"></a>00207                 <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> dmf = <a class="code" href="_quantisation_8cpp.html#a95540d880b7a1d95ae0df24d2d8a7ee9">dequant</a>[Qp % 6][0];
<a name="l00208"></a>00208                 data[0] = (data[0] * dmf) &gt;&gt; 1;
<a name="l00209"></a>00209                 data[1] = (data[1] * dmf) &gt;&gt; 1;
<a name="l00210"></a>00210                 data[2] = (data[2] * dmf) &gt;&gt; 1;
<a name="l00211"></a>00211                 data[3] = (data[3] * dmf) &gt;&gt; 1;
<a name="l00212"></a>00212         }
<a name="l00213"></a>00213 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_quantisation_8cpp_ad8c9813079b1dac9e7c7ab3d40a9a212_icgraph.png" border="0" usemap="#_quantisation_8cpp_ad8c9813079b1dac9e7c7ab3d40a9a212_icgraph_map" alt=""></div>
<map name="_quantisation_8cpp_ad8c9813079b1dac9e7c7ab3d40a9a212_icgraph_map" id="_quantisation_8cpp_ad8c9813079b1dac9e7c7ab3d40a9a212_icgraph">
<area shape="rect" id="node3" href="_p_b_macroblock_codec_8cpp.html#a907948e514ef3d05386e93a64d576c02" title="macroblockInterDecode_uv" alt="" coords="161,59,337,88"/><area shape="rect" id="node21" href="_i_macroblock_codec_8cpp.html#a0d5a08323fa05b03ffbebb448898663e" title="macroblockIntraDecode_uv" alt="" coords="161,112,337,141"/><area shape="rect" id="node5" href="_p_b_macroblock_codec_8h.html#ad7127f8c7dabe086c8648f61be463740" title="macroblockInterDecode" alt="" coords="388,59,545,88"/><area shape="rect" id="node7" href="_p_slice_8cpp.html#aa96fb8edf03d2055a439bb9fefd52a10" title="process_data_decode" alt="" coords="600,59,749,88"/><area shape="rect" id="node9" href="_p_slice_8cpp.html#a18283e001efb21359ea20ded9bc27eff" title="macroblock_processor_PB" alt="" coords="803,59,981,88"/><area shape="rect" id="node11" href="_p_slice_8h.html#a08458d29753b64df9de1d40b748fdf0b" title="PSliceDecode" alt="" coords="1029,59,1133,88"/><area shape="rect" id="node13" href="decodeframe__b_8cpp.html#a01538ccadc6514406416e19a6ebae001" title="DoProcessDB" alt="" coords="1181,5,1285,35"/><area shape="rect" id="node17" href="decodeframe__p_8cpp.html#a49c748890470e9cac9c8f01ad19d562c" title="DoProcessDP" alt="" coords="1181,59,1285,88"/><area shape="rect" id="node15" href="decodeframe__b_8cpp.html#a501cfeae2c764e7998e9c9f2240748bd" title="decodeframe_b" alt="" coords="1335,5,1444,35"/><area shape="rect" id="node19" href="decodeframe__p_8cpp.html#a7f615124f132ce807e3850fff0997a9a" title="decodeframe_p" alt="" coords="1335,59,1444,88"/><area shape="rect" id="node23" href="_i_macroblock_codec_8h.html#acaa2acf29de1293461dea9f2882931c5" title="macroblockIntraDecode" alt="" coords="388,112,545,141"/><area shape="rect" id="node25" href="_i_slice_8h.html#a23c43acab8cba26c6a4938028715f817" title="process_data_decode_I" alt="" coords="596,112,753,141"/><area shape="rect" id="node27" href="_i_slice_8cpp.html#a582f95d234a6f0902b8df497f3712c01" title="macroblock_processor_I" alt="" coords="811,112,973,141"/><area shape="rect" id="node29" href="_i_slice_8h.html#a3d8b6dcdaff59baf9c7b27ae426f0a5a" title="ISliceDecode" alt="" coords="1032,112,1131,141"/><area shape="rect" id="node31" href="decodeframe__i_8cpp.html#ad773df895663c88740670e8e13891c1f" title="DoProcessDI" alt="" coords="1184,112,1283,141"/><area shape="rect" id="node33" href="decodeframe__i_8cpp.html#ab7628a5173510caf4fce82bfba6b4a40" title="decodeframe_i" alt="" coords="1336,112,1443,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5985492c5cf012e5d7051f11fa86821c"></a><!-- doxytag: member="Quantisation.cpp::iquant4x4_c" ref="a5985492c5cf012e5d7051f11fa86821c" args="(param_quant4 dt, const int32 Qp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iquant4x4_c </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_quantisation_8h.html#aaf238cae50a8b754d811c856535578b4">param_quant4</a>&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>&nbsp;</td>
          <td class="paramname"> <em>Qp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00121"></a>00121 {
<a name="l00122"></a>00122         <span class="comment">/*register */</span><a class="code" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> * <span class="keyword">const</span> data = dt[0];
<a name="l00123"></a>00123         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> qbits = Qp / 6;
<a name="l00124"></a>00124         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> index_mf = Qp % 6;
<a name="l00125"></a>00125         <span class="comment">//int i;</span>
<a name="l00126"></a>00126         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; 16 ; ++i)
<a name="l00127"></a>00127                 data[i] = (data[i] * <a class="code" href="_quantisation_8cpp.html#a95540d880b7a1d95ae0df24d2d8a7ee9">dequant</a>[index_mf][i]) &lt;&lt; qbits;
<a name="l00128"></a>00128 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_quantisation_8cpp_a5985492c5cf012e5d7051f11fa86821c_icgraph.png" border="0" usemap="#_quantisation_8cpp_a5985492c5cf012e5d7051f11fa86821c_icgraph_map" alt=""></div>
<map name="_quantisation_8cpp_a5985492c5cf012e5d7051f11fa86821c_icgraph_map" id="_quantisation_8cpp_a5985492c5cf012e5d7051f11fa86821c_icgraph">
<area shape="rect" id="node3" href="_p_b_macroblock_codec_8cpp.html#abbc239e3b8c30f008cb5e540e168a743" title="macroblockInterDecode16x16_y" alt="" coords="148,5,353,35"/><area shape="rect" id="node21" href="_p_b_macroblock_codec_8cpp.html#a907948e514ef3d05386e93a64d576c02" title="macroblockInterDecode_uv" alt="" coords="163,59,339,88"/><area shape="rect" id="node24" href="_i_macroblock_codec_8cpp.html#a0d5a08323fa05b03ffbebb448898663e" title="macroblockIntraDecode_uv" alt="" coords="163,112,339,141"/><area shape="rect" id="node39" href="_i_macroblock_codec_8cpp.html#a3bb69edd67d7438ffa2148822898e335" title="macroblockIntraDecode_y" alt="" coords="165,165,336,195"/><area shape="rect" id="node5" href="_p_b_macroblock_codec_8h.html#ad7127f8c7dabe086c8648f61be463740" title="macroblockInterDecode" alt="" coords="404,59,561,88"/><area shape="rect" id="node7" href="_p_slice_8cpp.html#aa96fb8edf03d2055a439bb9fefd52a10" title="process_data_decode" alt="" coords="616,59,765,88"/><area shape="rect" id="node9" href="_p_slice_8cpp.html#a18283e001efb21359ea20ded9bc27eff" title="macroblock_processor_PB" alt="" coords="819,59,997,88"/><area shape="rect" id="node11" href="_p_slice_8h.html#a08458d29753b64df9de1d40b748fdf0b" title="PSliceDecode" alt="" coords="1045,59,1149,88"/><area shape="rect" id="node13" href="decodeframe__b_8cpp.html#a01538ccadc6514406416e19a6ebae001" title="DoProcessDB" alt="" coords="1197,5,1301,35"/><area shape="rect" id="node17" href="decodeframe__p_8cpp.html#a49c748890470e9cac9c8f01ad19d562c" title="DoProcessDP" alt="" coords="1197,59,1301,88"/><area shape="rect" id="node15" href="decodeframe__b_8cpp.html#a501cfeae2c764e7998e9c9f2240748bd" title="decodeframe_b" alt="" coords="1351,5,1460,35"/><area shape="rect" id="node19" href="decodeframe__p_8cpp.html#a7f615124f132ce807e3850fff0997a9a" title="decodeframe_p" alt="" coords="1351,59,1460,88"/><area shape="rect" id="node26" href="_i_macroblock_codec_8h.html#acaa2acf29de1293461dea9f2882931c5" title="macroblockIntraDecode" alt="" coords="404,112,561,141"/><area shape="rect" id="node28" href="_i_slice_8h.html#a23c43acab8cba26c6a4938028715f817" title="process_data_decode_I" alt="" coords="612,112,769,141"/><area shape="rect" id="node30" href="_i_slice_8cpp.html#a582f95d234a6f0902b8df497f3712c01" title="macroblock_processor_I" alt="" coords="827,112,989,141"/><area shape="rect" id="node32" href="_i_slice_8h.html#a3d8b6dcdaff59baf9c7b27ae426f0a5a" title="ISliceDecode" alt="" coords="1048,112,1147,141"/><area shape="rect" id="node34" href="decodeframe__i_8cpp.html#ad773df895663c88740670e8e13891c1f" title="DoProcessDI" alt="" coords="1200,112,1299,141"/><area shape="rect" id="node36" href="decodeframe__i_8cpp.html#ab7628a5173510caf4fce82bfba6b4a40" title="decodeframe_i" alt="" coords="1352,112,1459,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a480f9f1c650257964853863d5683ed34"></a><!-- doxytag: member="Quantisation.cpp::iquant4x4dc_c" ref="a480f9f1c650257964853863d5683ed34" args="(param_quant4 dt, const int32 Qp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iquant4x4dc_c </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_quantisation_8h.html#aaf238cae50a8b754d811c856535578b4">param_quant4</a>&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>&nbsp;</td>
          <td class="paramname"> <em>Qp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00158"></a>00158 {
<a name="l00159"></a>00159         <span class="comment">/*register */</span><a class="code" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> * <span class="keyword">const</span> data = dt[0];
<a name="l00160"></a>00160         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> qbits = Qp / 6 - 2;
<a name="l00161"></a>00161         <span class="comment">//int32 i;</span>
<a name="l00162"></a>00162         <span class="keywordflow">if</span> (qbits &gt; -1)
<a name="l00163"></a>00163         {
<a name="l00164"></a>00164                 <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> mf_index = Qp % 6;
<a name="l00165"></a>00165                 <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> dmf = <a class="code" href="_quantisation_8cpp.html#a95540d880b7a1d95ae0df24d2d8a7ee9">dequant</a>[mf_index][0] &lt;&lt; qbits;
<a name="l00166"></a>00166                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; 16 ; i ++)
<a name="l00167"></a>00167                         data[i] = data[i] * dmf;
<a name="l00168"></a>00168         }
<a name="l00169"></a>00169         <span class="keywordflow">else</span>
<a name="l00170"></a>00170         {
<a name="l00171"></a>00171                 <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> dmf = <a class="code" href="_quantisation_8cpp.html#a95540d880b7a1d95ae0df24d2d8a7ee9">dequant</a>[Qp % 6][0];
<a name="l00172"></a>00172                 <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> t2  = 1 &lt;&lt; (1 + qbits);
<a name="l00173"></a>00173                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; 16 ; i ++)
<a name="l00174"></a>00174                         data[i] = (data[i] * dmf + t2) &gt;&gt; (-qbits);
<a name="l00175"></a>00175         }
<a name="l00176"></a>00176 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_quantisation_8cpp_a480f9f1c650257964853863d5683ed34_icgraph.png" border="0" usemap="#_quantisation_8cpp_a480f9f1c650257964853863d5683ed34_icgraph_map" alt=""></div>
<map name="_quantisation_8cpp_a480f9f1c650257964853863d5683ed34_icgraph_map" id="_quantisation_8cpp_a480f9f1c650257964853863d5683ed34_icgraph">
<area shape="rect" id="node3" href="_i_macroblock_codec_8cpp.html#a3bb69edd67d7438ffa2148822898e335" title="macroblockIntraDecode_y" alt="" coords="161,32,332,61"/><area shape="rect" id="node5" href="_i_macroblock_codec_8h.html#acaa2acf29de1293461dea9f2882931c5" title="macroblockIntraDecode" alt="" coords="383,32,540,61"/><area shape="rect" id="node7" href="_i_slice_8h.html#a23c43acab8cba26c6a4938028715f817" title="process_data_decode_I" alt="" coords="591,32,748,61"/><area shape="rect" id="node9" href="_i_slice_8cpp.html#a582f95d234a6f0902b8df497f3712c01" title="macroblock_processor_I" alt="" coords="805,5,968,35"/><area shape="rect" id="node17" href="_p_slice_8cpp.html#a18283e001efb21359ea20ded9bc27eff" title="macroblock_processor_PB" alt="" coords="797,59,976,88"/><area shape="rect" id="node11" href="_i_slice_8h.html#a3d8b6dcdaff59baf9c7b27ae426f0a5a" title="ISliceDecode" alt="" coords="1027,5,1125,35"/><area shape="rect" id="node13" href="decodeframe__i_8cpp.html#ad773df895663c88740670e8e13891c1f" title="DoProcessDI" alt="" coords="1179,5,1277,35"/><area shape="rect" id="node15" href="decodeframe__i_8cpp.html#ab7628a5173510caf4fce82bfba6b4a40" title="decodeframe_i" alt="" coords="1331,5,1437,35"/><area shape="rect" id="node19" href="_p_slice_8h.html#a08458d29753b64df9de1d40b748fdf0b" title="PSliceDecode" alt="" coords="1024,59,1128,88"/><area shape="rect" id="node21" href="decodeframe__b_8cpp.html#a01538ccadc6514406416e19a6ebae001" title="DoProcessDB" alt="" coords="1176,59,1280,88"/><area shape="rect" id="node25" href="decodeframe__p_8cpp.html#a49c748890470e9cac9c8f01ad19d562c" title="DoProcessDP" alt="" coords="1176,112,1280,141"/><area shape="rect" id="node23" href="decodeframe__b_8cpp.html#a501cfeae2c764e7998e9c9f2240748bd" title="decodeframe_b" alt="" coords="1329,59,1439,88"/><area shape="rect" id="node27" href="decodeframe__p_8cpp.html#a7f615124f132ce807e3850fff0997a9a" title="decodeframe_p" alt="" coords="1329,112,1439,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6096528e049a8f3c2a463926db773e42"></a><!-- doxytag: member="Quantisation.cpp::iquant8x8_c" ref="a6096528e049a8f3c2a463926db773e42" args="(param_quant8 dt, const int32 Qp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iquant8x8_c </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_quantisation_8h.html#a8bf84fa166851783a628e4a4e5a48888">param_quant8</a>&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>&nbsp;</td>
          <td class="paramname"> <em>Qp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00131"></a>00131 {
<a name="l00132"></a>00132         <a class="code" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> * <span class="keyword">const</span> data = dt;
<a name="l00133"></a>00133         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> qbits = Qp / 6;
<a name="l00134"></a>00134         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> index_mf = Qp % 6;
<a name="l00135"></a>00135         <span class="comment">//int i;</span>
<a name="l00136"></a>00136         <span class="keywordtype">int</span> iAdd = ( qbits &lt;= 5 ? ( 1 &lt;&lt; ( 5 - qbits ) ) : 0 );
<a name="l00137"></a>00137         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; 64 ; i ++)
<a name="l00138"></a>00138                 <span class="comment">//data[i] = (data[i] * dequant[index_mf][i]) &lt;&lt; qbits;</span>
<a name="l00139"></a>00139                 data[i] = ( ( data[i] * <a class="code" href="_quantisation_8cpp.html#abbaef37d144eaea4f1f967739e320898">dequant64</a>[index_mf][i] * 16 + iAdd ) &lt;&lt; qbits ) &gt;&gt; 6;
<a name="l00140"></a>00140 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="_quantisation_8cpp_a6096528e049a8f3c2a463926db773e42_icgraph.png" border="0" usemap="#_quantisation_8cpp_a6096528e049a8f3c2a463926db773e42_icgraph_map" alt=""></div>
<map name="_quantisation_8cpp_a6096528e049a8f3c2a463926db773e42_icgraph_map" id="_quantisation_8cpp_a6096528e049a8f3c2a463926db773e42_icgraph">
<area shape="rect" id="node3" href="_p_b_macroblock_codec_8cpp.html#abbc239e3b8c30f008cb5e540e168a743" title="macroblockInterDecode16x16_y" alt="" coords="148,59,353,88"/><area shape="rect" id="node21" href="_i_macroblock_codec_8cpp.html#a3bb69edd67d7438ffa2148822898e335" title="macroblockIntraDecode_y" alt="" coords="165,112,336,141"/><area shape="rect" id="node5" href="_p_b_macroblock_codec_8h.html#ad7127f8c7dabe086c8648f61be463740" title="macroblockInterDecode" alt="" coords="404,59,561,88"/><area shape="rect" id="node7" href="_p_slice_8cpp.html#aa96fb8edf03d2055a439bb9fefd52a10" title="process_data_decode" alt="" coords="616,59,765,88"/><area shape="rect" id="node9" href="_p_slice_8cpp.html#a18283e001efb21359ea20ded9bc27eff" title="macroblock_processor_PB" alt="" coords="819,59,997,88"/><area shape="rect" id="node11" href="_p_slice_8h.html#a08458d29753b64df9de1d40b748fdf0b" title="PSliceDecode" alt="" coords="1045,59,1149,88"/><area shape="rect" id="node13" href="decodeframe__b_8cpp.html#a01538ccadc6514406416e19a6ebae001" title="DoProcessDB" alt="" coords="1197,5,1301,35"/><area shape="rect" id="node17" href="decodeframe__p_8cpp.html#a49c748890470e9cac9c8f01ad19d562c" title="DoProcessDP" alt="" coords="1197,59,1301,88"/><area shape="rect" id="node15" href="decodeframe__b_8cpp.html#a501cfeae2c764e7998e9c9f2240748bd" title="decodeframe_b" alt="" coords="1351,5,1460,35"/><area shape="rect" id="node19" href="decodeframe__p_8cpp.html#a7f615124f132ce807e3850fff0997a9a" title="decodeframe_p" alt="" coords="1351,59,1460,88"/><area shape="rect" id="node23" href="_i_macroblock_codec_8h.html#acaa2acf29de1293461dea9f2882931c5" title="macroblockIntraDecode" alt="" coords="404,112,561,141"/><area shape="rect" id="node25" href="_i_slice_8h.html#a23c43acab8cba26c6a4938028715f817" title="process_data_decode_I" alt="" coords="612,112,769,141"/><area shape="rect" id="node27" href="_i_slice_8cpp.html#a582f95d234a6f0902b8df497f3712c01" title="macroblock_processor_I" alt="" coords="827,112,989,141"/><area shape="rect" id="node29" href="_i_slice_8h.html#a3d8b6dcdaff59baf9c7b27ae426f0a5a" title="ISliceDecode" alt="" coords="1048,112,1147,141"/><area shape="rect" id="node31" href="decodeframe__i_8cpp.html#ad773df895663c88740670e8e13891c1f" title="DoProcessDI" alt="" coords="1200,112,1299,141"/><area shape="rect" id="node33" href="decodeframe__i_8cpp.html#ab7628a5173510caf4fce82bfba6b4a40" title="decodeframe_i" alt="" coords="1352,112,1459,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a805f7902eccf615fd707997d06e0c1ff"></a><!-- doxytag: member="Quantisation.cpp::quant2x2dc_c" ref="a805f7902eccf615fd707997d06e0c1ff" args="(param_quant2 dt, const int32 Qp, int32_t is_intra)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void quant2x2dc_c </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_quantisation_8h.html#aa2419725a4ad76a3137ed57a1789cf8e">param_quant2</a>&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>&nbsp;</td>
          <td class="paramname"> <em>Qp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_types_8h.html#a115ba3a1b24a8702355c5dbd61ce01e0">int32_t</a>&nbsp;</td>
          <td class="paramname"> <em>is_intra</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00179"></a>00179 {
<a name="l00180"></a>00180         <span class="comment">/*register */</span><a class="code" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> * <span class="keyword">const</span> data = dt[0];
<a name="l00181"></a>00181         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> qbits    = 15 + Qp / 6;
<a name="l00182"></a>00182         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> mf_index = Qp % 6;
<a name="l00183"></a>00183         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> mf00 = <a class="code" href="_quantisation_8cpp.html#a42abedc99a2c36f53b9cbb3fddf75992">quant</a>[mf_index][0];
<a name="l00184"></a>00184         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> f2 = (2 &lt;&lt; qbits) / (is_intra ? 3 : 6);
<a name="l00185"></a>00185         <span class="comment">//int i;</span>
<a name="l00186"></a>00186         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; 4 ; i ++)
<a name="l00187"></a>00187                 <span class="keywordflow">if</span> (data[i] &gt; 0)
<a name="l00188"></a>00188                         data[i] = (data[i] * mf00 + f2) &gt;&gt; (qbits + 1);
<a name="l00189"></a>00189                 <span class="keywordflow">else</span>
<a name="l00190"></a>00190                         data[i] = -((-(data[i] * mf00) + f2) &gt;&gt; (qbits + 1));
<a name="l00191"></a>00191 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="af304d1aed221004504fa9475387cf32e"></a><!-- doxytag: member="Quantisation.cpp::quant4x4_c" ref="af304d1aed221004504fa9475387cf32e" args="(param_quant4 dt, const int32 Qp, int32_t is_intra)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void quant4x4_c </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_quantisation_8h.html#aaf238cae50a8b754d811c856535578b4">param_quant4</a>&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>&nbsp;</td>
          <td class="paramname"> <em>Qp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_types_8h.html#a115ba3a1b24a8702355c5dbd61ce01e0">int32_t</a>&nbsp;</td>
          <td class="paramname"> <em>is_intra</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00107"></a>00107 {
<a name="l00108"></a>00108         <span class="comment">/*register */</span><a class="code" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> * <span class="keyword">const</span> data = dt[0];
<a name="l00109"></a>00109         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> qbits    = 15 + Qp / 6;
<a name="l00110"></a>00110         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> mf_index = Qp % 6;
<a name="l00111"></a>00111         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> f = (1 &lt;&lt; qbits) / (is_intra ? 3 : 6);
<a name="l00112"></a>00112         <span class="comment">//int i;</span>
<a name="l00113"></a>00113         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; 16 ; i ++)
<a name="l00114"></a>00114                 <span class="keywordflow">if</span> (data[i] &gt; 0)
<a name="l00115"></a>00115                         data[i] = (data[i] * <a class="code" href="_quantisation_8cpp.html#a42abedc99a2c36f53b9cbb3fddf75992">quant</a>[mf_index][i] + f) &gt;&gt; qbits;
<a name="l00116"></a>00116                 <span class="keywordflow">else</span>
<a name="l00117"></a>00117                         data[i] = -((-(data[i] * <a class="code" href="_quantisation_8cpp.html#a42abedc99a2c36f53b9cbb3fddf75992">quant</a>[mf_index][i]) + f) &gt;&gt; qbits);
<a name="l00118"></a>00118 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="aeb2be591bcf2be1d22c5bb6a23537c78"></a><!-- doxytag: member="Quantisation.cpp::quant4x4dc_c" ref="aeb2be591bcf2be1d22c5bb6a23537c78" args="(param_quant4 dt, const int32 Qp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void quant4x4dc_c </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_quantisation_8h.html#aaf238cae50a8b754d811c856535578b4">param_quant4</a>&nbsp;</td>
          <td class="paramname"> <em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a>&nbsp;</td>
          <td class="paramname"> <em>Qp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="fragment"><pre class="fragment"><a name="l00143"></a>00143 {
<a name="l00144"></a>00144         <span class="comment">/*register */</span><a class="code" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> * <span class="keyword">const</span> data = dt[0];
<a name="l00145"></a>00145         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> qbits    = 15 + Qp / 6;
<a name="l00146"></a>00146         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> mf_index = Qp % 6;
<a name="l00147"></a>00147         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> mf00 = <a class="code" href="_quantisation_8cpp.html#a42abedc99a2c36f53b9cbb3fddf75992">quant</a>[mf_index][0];
<a name="l00148"></a>00148         <span class="keyword">const</span> <a class="code" href="_types_8h.html#a43d43196463bde49cb067f5c20ab8481">int32</a> f2 = (2 &lt;&lt; qbits) / 3;      <span class="comment">// Only 16x16 intra mode</span>
<a name="l00149"></a>00149         <span class="comment">//int32 i;</span>
<a name="l00150"></a>00150         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; 16 ; i ++)
<a name="l00151"></a>00151                 <span class="keywordflow">if</span> (data[i] &gt; 0)
<a name="l00152"></a>00152                         data[i] = (data[i] * mf00 + f2) &gt;&gt; (qbits + 1);
<a name="l00153"></a>00153                 <span class="keywordflow">else</span>
<a name="l00154"></a>00154                         data[i] = -((-(data[i] * mf00) + f2) &gt;&gt; (qbits + 1));
<a name="l00155"></a>00155 }
</pre></div></p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a95540d880b7a1d95ae0df24d2d8a7ee9"></a><!-- doxytag: member="Quantisation.cpp::dequant" ref="a95540d880b7a1d95ae0df24d2d8a7ee9" args="[6][16]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> <a class="el" href="_quantisation_8cpp.html#a95540d880b7a1d95ae0df24d2d8a7ee9">dequant</a>[6][16]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> 
{
    {10, 13, 10, 13, 13, 16, 13, 16, 10, 13, 10, 13, 13, 16, 13, 16},
    {11, 14, 11, 14, 14, 18, 14, 18, 11, 14, 11, 14, 14, 18, 14, 18},
    {13, 16, 13, 16, 16, 20, 16, 20, 13, 16, 13, 16, 16, 20, 16, 20},
    {14, 18, 14, 18, 18, 23, 18, 23, 14, 18, 14, 18, 18, 23, 18, 23},
    {16, 20, 16, 20, 20, 25, 20, 25, 16, 20, 16, 20, 20, 25, 20, 25},
    {18, 23, 18, 23, 23, 29, 23, 29, 18, 23, 18, 23, 23, 29, 23, 29}
}
</pre></div>
</div>
</div>
<a class="anchor" id="abbaef37d144eaea4f1f967739e320898"></a><!-- doxytag: member="Quantisation.cpp::dequant64" ref="abbaef37d144eaea4f1f967739e320898" args="[6][64]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="_types_8h.html#a7cc214a236ad3bb6ad435bdcf5262a3f">Int</a> <a class="el" href="_quantisation_8cpp.html#abbaef37d144eaea4f1f967739e320898">dequant64</a>[6][64]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a42abedc99a2c36f53b9cbb3fddf75992"></a><!-- doxytag: member="Quantisation.cpp::quant" ref="a42abedc99a2c36f53b9cbb3fddf75992" args="[6][16]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="_types_8h.html#a259fa4834387bd68627ddf37bb3ebdb9">int16</a> <a class="el" href="_quantisation_8cpp.html#a42abedc99a2c36f53b9cbb3fddf75992">quant</a>[6][16]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{
   {13107, 8066, 13107, 8066, 8066, 5243, 8066, 5243,
    13107, 8066, 13107, 8066, 8066, 5243, 8066, 5243},
   {11916, 7490, 11916, 7490, 7490, 4660, 7490, 4660,
    11916, 7490, 11916, 7490, 7490, 4660, 7490, 4660},
   {10082, 6554, 10082, 6554, 6554, 4194, 6554, 4194,
    10082, 6554, 10082, 6554, 6554, 4194, 6554, 4194},
    {9362, 5825,  9362, 5825, 5825, 3647, 5825, 3647,
     9362, 5825,  9362, 5825, 5825, 3647, 5825, 3647},
    {8192, 5243,  8192, 5243, 5243, 3355, 5243, 3355,
     8192, 5243,  8192, 5243, 5243, 3355, 5243, 3355},
    {7282, 4559,  7282, 4559, 4559, 2893, 4559, 2893,
     7282, 4559,  7282, 4559, 4559, 2893, 4559, 2893}
}
</pre></div>
</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Jun 10 20:57:27 2010 for MVC by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
